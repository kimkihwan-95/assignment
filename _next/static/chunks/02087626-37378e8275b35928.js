"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[270],{5337:(t,e,i)=>{i.d(e,{AS:()=>eH,Ts:()=>eX});var n,r,o,a,s,l,u,c,h,d,p,g,v,f,m,y=function(t,e){return(y=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function _(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var x=function(){return(x=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function b(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&0>e.indexOf(n)&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)0>e.indexOf(n[r])&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]]);return i}function C(t,e,i,n){return new(i||(i=Promise))(function(r,o){function a(t){try{l(n.next(t))}catch(t){o(t)}}function s(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof i?e:new i(function(t){t(e)})).then(a,s)}l((n=n.apply(t,e||[])).next())})}function w(t,e){var i,n,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(i)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function S(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function E(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a}function I(t,e,i){if(i||2==arguments.length)for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError,function(t){t.Dashed="dashed",t.Solid="solid"}(n||(n={})),function(t){t.Stroke="stroke",t.Fill="fill",t.StrokeFill="stroke_fill"}(r||(r={})),function(t){t.Always="always",t.FollowCross="follow_cross",t.None="none"}(o||(o={})),function(t){t.Standard="standard",t.Rect="rect"}(a||(a={})),function(t){t.Left="left",t.Middle="middle",t.Right="right"}(s||(s={})),function(t){t.Fixed="fixed",t.Pointer="pointer"}(l||(l={})),function(t){t.CandleSolid="candle_solid",t.CandleStroke="candle_stroke",t.CandleUpStroke="candle_up_stroke",t.CandleDownStroke="candle_down_stroke",t.Ohlc="ohlc",t.Area="area"}(u||(u={}));var T="#F92855",P="rgba(249, 40, 85, .7)",k="#2DC08E",M="rgba(45, 192, 142, .7)",D="#888888",A="#FFFFFF",R="#1677FF",B="#76808F",F="#DDDDDD";function L(t){return"rgba(22, 119, 255, ".concat(t,")")}function O(){return{show:!0,size:"auto",axisLine:{show:!0,color:F,size:1},tickText:{show:!0,color:B,size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:4},tickLine:{show:!0,size:1,length:3,color:F}}}function N(t,e,i,n,r,o){}function V(t,e,i){}function W(t,e){if(H(t)||H(e)){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=t[i],r=e[i];H(r)&&H(n)?W(n,r):K(e[i])&&(t[i]=z(e[i]))}}}function z(t){if(!H(t))return t;var e=null;for(var i in e=Y(t)?[]:{},t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i];H(n)?e[i]=z(n):e[i]=n}return e}function Y(t){return"[object Array]"===Object.prototype.toString.call(t)}function X(t){return"function"==typeof t}function H(t){return"object"==typeof t&&K(t)}function G(t){return"number"==typeof t&&Number.isFinite(t)}function K(t){return null!=t}function U(t){return"boolean"==typeof t}function Z(t){return"string"==typeof t}var j=/\\(\\)?/g,q=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g");function J(t,e,i){if(K(t)){var n=[];e.replace(q,function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=t;return K(e[1])?r=e[2].replace(j,"$1"):K(e[0])&&(r=e[0].trim()),n.push(r),""});for(var r=t,o=0,a=n.length;K(r)&&o<a;)r=null==r?void 0:r[n[o++]];return K(r)?r:null!=i?i:"--"}return null!=i?i:"--"}function Q(t,e){var i={};return t.formatToParts(new Date(e)).forEach(function(t){var e=t.type,n=t.value;switch(e){case"year":i.YYYY=n;break;case"month":i.MM=n;break;case"day":i.DD=n;break;case"hour":i.HH="24"===n?"00":n;break;case"minute":i.mm=n;break;case"second":i.ss=n}}),i}function $(t,e){var i=+t;return G(i)?i.toFixed(null!=e?e:2):"".concat(t)}function tt(t){var e=+t;if(G(e)){if(e>1e9)return"".concat(+(e/1e9).toFixed(3),"B");if(e>1e6)return"".concat(+(e/1e6).toFixed(3),"M");if(e>1e3)return"".concat(+(e/1e3).toFixed(3),"K")}return"".concat(t)}var te=null;function ti(t){var e,i;return null!==(i=null===(e=t.ownerDocument.defaultView)||void 0===e?void 0:e.devicePixelRatio)&&void 0!==i?i:1}function tn(t,e,i){return"".concat(null!=e?e:"normal"," ").concat(null!=t?t:12,"px ").concat(null!=i?i:"Helvetica Neue")}function tr(t,e,i,n){if(!K(te)){var r=document.createElement("canvas"),o=ti(r);(te=r.getContext("2d")).scale(o,o)}return te.font=tn(e,i,n),Math.round(te.measureText(t).width)}!function(t){t.OnZoom="onZoom",t.OnScroll="onScroll",t.OnVisibleRangeChange="onVisibleRangeChange",t.OnTooltipIconClick="onTooltipIconClick",t.OnCrosshairChange="onCrosshairChange",t.OnCandleBarClick="onCandleBarClick",t.OnPaneDrag="onPaneDrag"}(c||(c={}));var to=function(){function t(){this._callbacks=[]}return t.prototype.subscribe=function(t){0>this._callbacks.indexOf(t)&&this._callbacks.push(t)},t.prototype.unsubscribe=function(t){if(X(t)){var e=this._callbacks.indexOf(t);e>-1&&this._callbacks.splice(e,1)}else this._callbacks=[]},t.prototype.execute=function(t){this._callbacks.forEach(function(e){e(t)})},t.prototype.isEmpty=function(){return 0===this._callbacks.length},t}();function ta(t,e,i,n){var r,o=t.result,a=t.figures,s=t.styles,l=J(s,"circles",i.circles),u=l.length,c=J(s,"bars",i.bars),h=c.length,d=J(s,"lines",i.lines),p=d.length,g=0,v=0,f=0,m=0;a.forEach(function(a){var s;switch(a.type){case"circle":m=g;var y=l[g%u];r=x(x({},y),{color:y.noChangeColor}),g++;break;case"bar":m=v;var _=c[v%h];r=x(x({},_),{color:_.noChangeColor}),v++;break;case"line":m=f,r=d[f%p],f++}if(K(a.type)){var b=null===(s=a.styles)||void 0===s?void 0:s.call(a,{data:{prev:o[e-1],current:o[e],next:o[e+1]},indicator:t,defaultStyles:i});n(a,x(x({},r),b),m)}})}!function(t){t.Normal="normal",t.Price="price",t.Volume="volume"}(h||(h={})),function(t){t.Loading="loading",t.Error="error",t.Ready="ready"}(d||(d={}));var ts=function(){function t(t){this.precision=4,this.calcParams=[],this.shouldOhlc=!1,this.shouldFormatBigNumber=!1,this.visible=!0,this.zLevel=0,this.series=h.Normal,this.figures=[],this.minValue=null,this.maxValue=null,this.styles=null,this.shouldUpdate=function(t,e){var i=JSON.stringify(t.calcParams)!==JSON.stringify(e.calcParams)||t.figures!==e.figures||t.calc!==e.calc,n=i||t.shortName!==e.shortName||t.series!==e.series||t.minValue!==e.minValue||t.maxValue!==e.maxValue||t.precision!==e.precision||t.shouldOhlc!==e.shouldOhlc||t.shouldFormatBigNumber!==e.shouldFormatBigNumber||t.visible!==e.visible||t.zLevel!==e.zLevel||t.extendData!==e.extendData||t.regenerateFigures!==e.regenerateFigures||t.createTooltipDataSource!==e.createTooltipDataSource||t.draw!==e.draw;return{calc:i,draw:n}},this.calc=function(){return[]},this.regenerateFigures=null,this.createTooltipDataSource=null,this.draw=null,this.onDataStateChange=null,this.result=[],this._lockSeriesPrecision=!1,this.override(t),this._lockSeriesPrecision=!1}return t.prototype.override=function(t){var e,i,n=this.result,r=b(this,["result"]);this._prevIndicator=x(x({},z(r)),{result:n});var o=t.name,a=t.shortName,s=t.precision,l=t.styles,u=t.figures,c=t.calcParams,h=b(t,["name","shortName","precision","styles","figures","calcParams"]);Z(this.name)||(this.name=null!=o?o:""),this.shortName=null!==(e=null!=a?a:this.shortName)&&void 0!==e?e:this.name,G(s)&&(this.precision=s,this._lockSeriesPrecision=!0),K(l)&&(null!==(i=this.styles)&&void 0!==i||(this.styles={}),W(this.styles,l)),W(this,h),K(c)&&(this.calcParams=c,X(this.regenerateFigures)&&(this.figures=this.regenerateFigures(this.calcParams))),this.figures=null!=u?u:this.figures},t.prototype.setSeriesPrecision=function(t){this._lockSeriesPrecision||(this.precision=t)},t.prototype.shouldUpdateImp=function(){var t=this._prevIndicator.zLevel!==this.zLevel,e=this.shouldUpdate(this._prevIndicator,this);return U(e)?{calc:e,draw:e,sort:t}:x(x({},e),{sort:t})},t.prototype.calcImp=function(t){return C(this,void 0,void 0,function(){var e;return w(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.calc(t,this)];case 1:return e=i.sent(),this.result=e,[2,!0];case 2:return i.sent(),[2,!1];case 3:return[2]}})})},t.extend=function(e){return function(t){function i(){return t.call(this,e)||this}return _(i,t),i}(t)},t}();!function(t){t.Normal="normal",t.WeakMagnet="weak_magnet",t.StrongMagnet="strong_magnet"}(p||(p={}));var tl="overlay_figure_",tu=function(){function t(t){this.groupId="",this.totalStep=1,this.currentStep=1,this.lock=!1,this.visible=!0,this.zLevel=0,this.needDefaultPointFigure=!1,this.needDefaultXAxisFigure=!1,this.needDefaultYAxisFigure=!1,this.mode=p.Normal,this.modeSensitivity=8,this.points=[],this.extendData=null,this.styles=null,this.createPointFigures=null,this.createXAxisFigures=null,this.createYAxisFigures=null,this.performEventPressedMove=null,this.performEventMoveForDrawing=null,this.onDrawStart=null,this.onDrawing=null,this.onDrawEnd=null,this.onClick=null,this.onDoubleClick=null,this.onRightClick=null,this.onPressedMoveStart=null,this.onPressedMoving=null,this.onPressedMoveEnd=null,this.onMouseEnter=null,this.onMouseLeave=null,this.onRemoved=null,this.onSelected=null,this.onDeselected=null,this._prevPressedPoint=null,this._prevPressedPoints=[],this.override(t)}return t.prototype.override=function(t){this._prevOverlay=z(this);var e,i,n=t.id,r=t.name;t.currentStep;var o=t.points,a=t.styles;if(W(this,b(t,["id","name","currentStep","points","styles"])),Z(this.name)||(this.name=null!=r?r:""),!Z(this.id)&&Z(n)&&(this.id=n),K(a)&&(null!==(e=this.styles)&&void 0!==e||(this.styles={}),W(this.styles,a)),Y(o)&&o.length>0){var s=0;if(this.points=I([],E(o),!1),o.length>=this.totalStep-1?(this.currentStep=-1,s=this.totalStep-1):(this.currentStep=o.length+1,s=o.length),X(this.performEventMoveForDrawing))for(var l=0;l<s;l++)this.performEventMoveForDrawing({currentStep:l+2,mode:this.mode,points:this.points,performPointIndex:l,performPoint:this.points[l]});-1===this.currentStep&&(null===(i=this.performEventPressedMove)||void 0===i||i.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:this.points.length-1,performPoint:this.points[this.points.length-1]}))}},t.prototype.shouldUpdate=function(){var t=this._prevOverlay.zLevel!==this.zLevel,e=t||JSON.stringify(this._prevOverlay)!==JSON.stringify(this.points)||this._prevOverlay.visible!==this.visible||this._prevOverlay.extendData!==this.extendData||this._prevOverlay.styles!==this.styles;return{sort:t,draw:e}},t.prototype.nextStep=function(){this.currentStep===this.totalStep-1?this.currentStep=-1:this.currentStep++},t.prototype.forceComplete=function(){this.currentStep=-1},t.prototype.isDrawing=function(){return -1!==this.currentStep},t.prototype.isStart=function(){return 1===this.currentStep},t.prototype.eventMoveForDrawing=function(t){var e,i=this.currentStep-1,n={};G(t.timestamp)&&(n.timestamp=t.timestamp),G(t.dataIndex)&&(n.dataIndex=t.dataIndex),G(t.value)&&(n.value=t.value),this.points[i]=n,null===(e=this.performEventMoveForDrawing)||void 0===e||e.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:i,performPoint:n})},t.prototype.eventPressedPointMove=function(t,e){var i;G(t.dataIndex)&&(this.points[e].dataIndex=t.dataIndex,this.points[e].timestamp=t.timestamp),G(t.value)&&(this.points[e].value=t.value),null===(i=this.performEventPressedMove)||void 0===i||i.call(this,{currentStep:this.currentStep,points:this.points,mode:this.mode,performPointIndex:e,performPoint:this.points[e]})},t.prototype.startPressedMove=function(t){this._prevPressedPoint=x({},t),this._prevPressedPoints=z(this.points)},t.prototype.eventPressedOtherMove=function(t,e){if(null!==this._prevPressedPoint){var i=null;G(t.dataIndex)&&G(this._prevPressedPoint.dataIndex)&&(i=t.dataIndex-this._prevPressedPoint.dataIndex);var n=null;G(t.value)&&G(this._prevPressedPoint.value)&&(n=t.value-this._prevPressedPoint.value),this.points=this._prevPressedPoints.map(function(t){G(t.timestamp)&&(t.dataIndex=e.timestampToDataIndex(t.timestamp));var r,o=x({},t);return G(i)&&G(t.dataIndex)&&(o.dataIndex=t.dataIndex+i,o.timestamp=null!==(r=e.dataIndexToTimestamp(o.dataIndex))&&void 0!==r?r:void 0),G(n)&&G(t.value)&&(o.value=t.value+n),o})}},t.extend=function(e){return function(t){function i(){return t.call(this,e)||this}return _(i,t),i}(t)},t}();function tc(t){var e={width:0,height:0,left:0,right:0,top:0,bottom:0};return K(t)&&W(e,t),e}function th(t){return X(window.requestAnimationFrame)?window.requestAnimationFrame(t):window.setTimeout(t,20)}function td(t){X(window.cancelAnimationFrame)?window.cancelAnimationFrame(t):window.clearTimeout(t)}function tp(t){if(X(window.requestIdleCallback))return window.requestIdleCallback(t);var e=performance.now();return window.setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(performance.now()-e))}})},1)}!function(t){t[t.Tooltip=0]="Tooltip",t[t.Crosshair=1]="Crosshair",t[t.XAxis=2]="XAxis"}(g||(g={}));var tg=function(){function t(t){this._options={duration:500,iterationCount:1},this._currentIterationCount=0,this._running=!1,this._time=0,W(this._options,t)}return t.prototype._loop=function(){var t=this;this._running=!0;var e=function(){var i;if(t._running){var n=new Date().getTime()-t._time;n<t._options.duration?(null===(i=t._doFrameCallback)||void 0===i||i.call(t,n),th(e)):(t.stop(),t._currentIterationCount++,t._currentIterationCount<t._options.iterationCount&&t.start())}};th(e)},t.prototype.doFrame=function(t){return this._doFrameCallback=t,this},t.prototype.setDuration=function(t){return this._options.duration=t,this},t.prototype.setIterationCount=function(t){return this._options.iterationCount=t,this},t.prototype.start=function(){this._running||(this._time=new Date().getTime(),this._loop())},t.prototype.stop=function(){var t;this._running&&(null===(t=this._doFrameCallback)||void 0===t||t.call(this,this._options.duration)),this._running=!1},t}(),tv=1,tf=new Date().getTime();function tm(t){var e=new Date().getTime();return e===tf?++tv:tv=1,tf=e,"".concat(null!=t?t:"").concat(e,"_").concat(tv)}function ty(t,e){var i,n=document.createElement(t),r=null!=e?e:{};for(var o in r)n.style[o]=null!==(i=r[o])&&void 0!==i?i:"";return n}function t_(t,e,i){var n=0,r=0;for(r=t.length-1;n!==r;){var o=Math.floor((r+n)/2),a=r-n,s=t[o][e];if(i===t[n][e])break;if(i===t[r][e])return r;if(i===s)return o;if(i>s?n=o:r=o,a<=2)break}return n}function tx(t,e){var i=Math.pow(10,e=Math.max(0,null!=e?e:0));return Math.round(t*i)/i}function tb(t,e,i){for(var n,r,o=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],a=t.length,s=0;s<a;){var l=t[s];o[0]=Math.max(null!==(n=l[e])&&void 0!==n?n:Number.MIN_SAFE_INTEGER,o[0]),o[1]=Math.min(null!==(r=l[i])&&void 0!==r?r:Number.MAX_SAFE_INTEGER,o[1]),++s}return o}function tC(t){return 0===t?0:Math.log10(t)}function tw(t){return Math.pow(10,t)}function tS(){return{from:0,to:0,realFrom:0,realTo:0}}function tE(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.join("_")}!function(t){t.Init="init",t.Forward="forward",t.Backward="backward",t.Update="update"}(v||(v={}));var tI=function(){function t(t){this._requestIdleCallbackId=-1,this._tasks=null!=t?t:[],this._operateTasks()}return t.prototype._operateTasks=function(t){var e,i=this;-1!==this._requestIdleCallbackId&&(e=this._requestIdleCallbackId,X(window.cancelIdleCallback)?window.cancelIdleCallback(e):window.clearTimeout(e),this._requestIdleCallbackId=-1),null==t||t(),this._requestIdleCallbackId=tp(function(t){i._runTasks(t)})},t.prototype._runTasks=function(t){for(var e=this;t.timeRemaining()>0&&this._tasks.length>0;){var i=this._tasks.shift();null==i||i.handler()}this._tasks.length>0&&(this._requestIdleCallbackId=tp(function(t){e._runTasks(t)}))},t.prototype.addTask=function(t){var e=this;return this._operateTasks(function(){var i=e._tasks.findIndex(function(e){return e.id===t.id});i>-1?e._tasks[i]=t:e._tasks.push(t)}),this},t.prototype.removeTask=function(t){var e=this;return this._operateTasks(function(){var i=e._tasks.findIndex(function(e){return e.id===t});i>-1&&e._tasks.splice(i,1)}),this},t}(),tT={name:"AVP",shortName:"AVP",series:h.Price,precision:2,figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:function(t){var e=0,i=0;return t.map(function(t){var n,r,o={},a=null!==(n=t.turnover)&&void 0!==n?n:0,s=null!==(r=t.volume)&&void 0!==r?r:0;return e+=a,0!==(i+=s)&&(o.avp=e/i),o})}},tP={name:"BOLL",shortName:"BOLL",series:h.Price,calcParams:[20,2],precision:2,shouldOhlc:!0,figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:function(t,e){var i=e.calcParams,n=i[0]-1,r=0;return t.map(function(e,o){var a=e.close,s={};if(r+=a,o>=n){s.mid=r/i[0];var l,u,c,h,d=(l=t.slice(o-n,o+1),u=s.mid,c=l.length,h=0,l.forEach(function(t){var e=t.close-u;h+=e*e}),Math.sqrt((h=Math.abs(h))/c));s.up=s.mid+i[1]*d,s.dn=s.mid-i[1]*d,r-=t[o-n].close}return s})}},tk={name:"BBI",shortName:"BBI",series:h.Price,precision:2,calcParams:[3,6,12,24],shouldOhlc:!0,figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:function(t,e){var i=e.calcParams,n=Math.max.apply(Math,I([],E(i),!1)),r=[],o=[];return t.map(function(e,a){var s={},l=e.close;if(i.forEach(function(e,i){var n;r[i]=(null!==(n=r[i])&&void 0!==n?n:0)+l,a>=e-1&&(o[i]=r[i]/e,r[i]-=t[a-(e-1)].close)}),a>=n-1){var u=0;o.forEach(function(t){u+=t}),s.bbi=u/4}return s})}},tM={name:"EMA",shortName:"EMA",series:h.Price,calcParams:[6,12,20],precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:function(t){return t.map(function(t,e){return{key:"ema".concat(e+1),title:"EMA".concat(t,": "),type:"line"}})},calc:function(t,e){var i=e.calcParams,n=e.figures,r=0,o=[];return t.map(function(t,e){var a={},s=t.close;return r+=s,i.forEach(function(t,i){e>=t-1&&(e>t-1?o[i]=(2*s+(t-1)*o[i])/(t+1):o[i]=r/t,a[n[i].key]=o[i])}),a})}},tD={name:"MA",shortName:"MA",series:h.Price,calcParams:[5,10,30,60],precision:2,shouldOhlc:!0,figures:[{key:"ma5",title:"MA5: ",type:"line"},{key:"ma10",title:"MA10: ",type:"line"},{key:"ma30",title:"MA30: ",type:"line"},{key:"ma60",title:"MA60: ",type:"line"}],regenerateFigures:function(t){return t.map(function(t,e){return{key:"ma".concat(e+1),title:"MA".concat(t,": "),type:"line"}})},calc:function(t,e){var i=e.calcParams,n=e.figures,r=[];return t.map(function(e,o){var a={},s=e.close;return i.forEach(function(e,i){var l;r[i]=(null!==(l=r[i])&&void 0!==l?l:0)+s,o>=e-1&&(a[n[i].key]=r[i]/e,r[i]-=t[o-(e-1)].close)}),a})}},tA={name:"SMA",shortName:"SMA",series:h.Price,calcParams:[12,2],precision:2,figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:function(t,e){var i=e.calcParams,n=0,r=0;return t.map(function(t,e){var o={},a=t.close;return n+=a,e>=i[0]-1&&(r=e>i[0]-1?(a*i[1]+r*(i[0]-i[1]+1))/(i[0]+1):n/i[0],o.sma=r),o})}},tR={name:"SAR",shortName:"SAR",series:h.Price,calcParams:[2,2,20],precision:2,shouldOhlc:!0,figures:[{key:"sar",title:"SAR: ",type:"circle",styles:function(t){var e,i,n,r=t.data,o=t.indicator,a=t.defaultStyles,s=r.current;return{color:(null!==(e=null==s?void 0:s.sar)&&void 0!==e?e:Number.MIN_SAFE_INTEGER)<((null!==(i=null==s?void 0:s.high)&&void 0!==i?i:0)+(null!==(n=null==s?void 0:s.low)&&void 0!==n?n:0))/2?J(o.styles,"circles[0].upColor",a.circles[0].upColor):J(o.styles,"circles[0].downColor",a.circles[0].downColor)}}}],calc:function(t,e){var i=e.calcParams,n=i[0]/100,r=i[1]/100,o=i[2]/100,a=n,s=-100,l=!1,u=0;return t.map(function(e,i){var c=u,h=e.high,d=e.low;if(l){(-100===s||s<h)&&(s=h,a=Math.min(a+r,o)),u=c+a*(s-c);var p=Math.min(t[Math.max(1,i)-1].low,d);u>e.low?(u=s,a=n,s=-100,l=!l):u>p&&(u=p)}else{(-100===s||s>d)&&(s=d,a=Math.min(a+r,o)),u=c+a*(s-c);var g=Math.max(t[Math.max(1,i)-1].high,h);u<e.high?(u=s,a=0,s=-100,l=!l):u<g&&(u=g)}return{high:h,low:d,sar:u}})}};function tB(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(t){var e=t.data,i=t.indicator,n=t.defaultStyles,r=e.current,o=J(i.styles,"bars[0].noChangeColor",n.bars[0].noChangeColor);return K(r)&&(r.close>r.open?o=J(i.styles,"bars[0].upColor",n.bars[0].upColor):r.close<r.open&&(o=J(i.styles,"bars[0].downColor",n.bars[0].downColor))),{color:o}}}}var tF={name:"VOL",shortName:"VOL",series:h.Volume,calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},tB()],regenerateFigures:function(t){var e=t.map(function(t,e){return{key:"ma".concat(e+1),title:"MA".concat(t,": "),type:"line"}});return e.push(tB()),e},calc:function(t,e){var i=e.calcParams,n=e.figures,r=[];return t.map(function(e,o){var a,s=null!==(a=e.volume)&&void 0!==a?a:0,l={volume:s,open:e.open,close:e.close};return i.forEach(function(e,i){var a,u;r[i]=(null!==(a=r[i])&&void 0!==a?a:0)+s,o>=e-1&&(l[n[i].key]=r[i]/e,r[i]-=null!==(u=t[o-(e-1)].volume)&&void 0!==u?u:0)}),l})}},tL={};function tO(t){var e;return null!==(e=tL[t])&&void 0!==e?e:null}[tT,{name:"AO",shortName:"AO",calcParams:[5,34],figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:function(t){var e,i,n=t.data,o=t.indicator,a=t.defaultStyles,s=n.prev,l=n.current,u=null!==(e=null==s?void 0:s.ao)&&void 0!==e?e:Number.MIN_SAFE_INTEGER,c=null!==(i=null==l?void 0:l.ao)&&void 0!==i?i:Number.MIN_SAFE_INTEGER,h="";return{color:h=c>u?J(o.styles,"bars[0].upColor",a.bars[0].upColor):J(o.styles,"bars[0].downColor",a.bars[0].downColor),style:c>u?r.Stroke:r.Fill,borderColor:h}}}],calc:function(t,e){var i=e.calcParams,n=Math.max(i[0],i[1]),r=0,o=0,a=0,s=0;return t.map(function(e,l){var u={},c=(e.low+e.high)/2;if(r+=c,o+=c,l>=i[0]-1){a=r/i[0];var h=t[l-(i[0]-1)];r-=(h.low+h.high)/2}if(l>=i[1]-1){s=o/i[1];var h=t[l-(i[1]-1)];o-=(h.low+h.high)/2}return l>=n-1&&(u.ao=a-s),u})}},{name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:function(t){return t.map(function(t,e){return{key:"bias".concat(e+1),title:"BIAS".concat(t,": "),type:"line"}})},calc:function(t,e){var i=e.calcParams,n=e.figures,r=[];return t.map(function(e,o){var a={},s=e.close;return i.forEach(function(e,l){var u;if(r[l]=(null!==(u=r[l])&&void 0!==u?u:0)+s,o>=e-1){var c=r[l]/i[l];a[n[l].key]=(s-c)/c*100,r[l]-=t[o-(e-1)].close}}),a})}},tP,{name:"BRAR",shortName:"BRAR",calcParams:[26],figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:function(t,e){var i=e.calcParams,n=0,r=0,o=0,a=0;return t.map(function(e,s){var l,u,c={},h=e.high,d=e.low,p=e.open,g=(null!==(l=t[s-1])&&void 0!==l?l:e).close;if(o+=h-p,a+=p-d,n+=h-g,r+=g-d,s>=i[0]-1){0!==a?c.ar=o/a*100:c.ar=0,0!==r?c.br=n/r*100:c.br=0;var v=t[s-(i[0]-1)],f=v.high,m=v.low,y=v.open,_=(null!==(u=t[s-i[0]])&&void 0!==u?u:t[s-(i[0]-1)]).close;n-=f-_,r-=_-m,o-=f-y,a-=y-m}return c})}},tk,{name:"CCI",shortName:"CCI",calcParams:[20],figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:function(t,e){var i=e.calcParams,n=i[0]-1,r=0,o=[];return t.map(function(e,a){var s={},l=(e.high+e.low+e.close)/3;if(r+=l,o.push(l),a>=n){var u=r/i[0],c=o.slice(a-n,a+1),h=0;c.forEach(function(t){h+=Math.abs(t-u)});var d=h/i[0];s.cci=0!==d?(l-u)/d/.015:0;var p=(t[a-n].high+t[a-n].low+t[a-n].close)/3;r-=p}return s})}},{name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:function(t,e){var i=e.calcParams,n=Math.ceil(i[1]/2.5+1),r=Math.ceil(i[2]/2.5+1),o=Math.ceil(i[3]/2.5+1),a=Math.ceil(i[4]/2.5+1),s=0,l=[],u=0,c=[],h=0,d=[],p=0,g=[],v=[];return t.forEach(function(e,f){var m,y,_,x,b,C={},w=null!==(m=t[f-1])&&void 0!==m?m:e,S=(w.high+w.close+w.low+w.open)/4,E=Math.max(0,e.high-S),I=Math.max(0,S-e.low);f>=i[0]-1&&(0!==I?C.cr=E/I*100:C.cr=0,s+=C.cr,u+=C.cr,h+=C.cr,p+=C.cr,f>=i[0]+i[1]-2&&(l.push(s/i[1]),f>=i[0]+i[1]+n-3&&(C.ma1=l[l.length-1-n]),s-=null!==(y=v[f-(i[1]-1)].cr)&&void 0!==y?y:0),f>=i[0]+i[2]-2&&(c.push(u/i[2]),f>=i[0]+i[2]+r-3&&(C.ma2=c[c.length-1-r]),u-=null!==(_=v[f-(i[2]-1)].cr)&&void 0!==_?_:0),f>=i[0]+i[3]-2&&(d.push(h/i[3]),f>=i[0]+i[3]+o-3&&(C.ma3=d[d.length-1-o]),h-=null!==(x=v[f-(i[3]-1)].cr)&&void 0!==x?x:0),f>=i[0]+i[4]-2&&(g.push(p/i[4]),f>=i[0]+i[4]+a-3&&(C.ma4=g[g.length-1-a]),p-=null!==(b=v[f-(i[4]-1)].cr)&&void 0!==b?b:0)),v.push(C)}),v}},{name:"DMA",shortName:"DMA",calcParams:[10,50,10],figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:function(t,e){var i=e.calcParams,n=Math.max(i[0],i[1]),r=0,o=0,a=0,s=[];return t.forEach(function(e,l){var u,c={},h=e.close;r+=h,o+=h;var d=0,p=0;if(l>=i[0]-1&&(d=r/i[0],r-=t[l-(i[0]-1)].close),l>=i[1]-1&&(p=o/i[1],o-=t[l-(i[1]-1)].close),l>=n-1){var g=d-p;c.dma=g,a+=g,l>=n+i[2]-2&&(c.ama=a/i[2],a-=null!==(u=s[l-(i[2]-1)].dma)&&void 0!==u?u:0)}s.push(c)}),s}},{name:"DMI",shortName:"DMI",calcParams:[14,6],figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:function(t,e){var i=e.calcParams,n=0,r=0,o=0,a=0,s=0,l=0,u=0,c=0,h=[];return t.forEach(function(e,d){var p,g,v={},f=null!==(p=t[d-1])&&void 0!==p?p:e,m=f.close,y=e.high,_=e.low,x=Math.abs(y-m),b=Math.abs(m-_),C=y-f.high,w=f.low-_,S=Math.max(Math.max(y-_,x),b),E=C>0&&C>w?C:0,I=w>0&&w>C?w:0;if(n+=S,r+=E,o+=I,d>=i[0]-1){d>i[0]-1?(a=a-a/i[0]+S,s=s-s/i[0]+E,l=l-l/i[0]+I):(a=n,s=r,l=o);var T=0,P=0;0!==a&&(T=100*s/a,P=100*l/a),v.pdi=T,v.mdi=P;var k=0;P+T!==0&&(k=Math.abs(P-T)/(P+T)*100),u+=k,d>=2*i[0]-2&&(c=d>2*i[0]-2?(c*(i[0]-1)+k)/i[0]:u/i[0],v.adx=c,d>=2*i[0]+i[1]-3&&(v.adxr=((null!==(g=h[d-(i[1]-1)].adx)&&void 0!==g?g:0)+c)/2))}h.push(v)}),h}},{name:"EMV",shortName:"EMV",calcParams:[14,9],figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:function(t,e){var i=e.calcParams,n=0,r=[];return t.map(function(e,o){var a,s={};if(o>0){var l=t[o-1],u=e.high,c=e.low,h=null!==(a=e.volume)&&void 0!==a?a:0,d=(u+c)/2-(l.high+l.low)/2;0===h||u-c==0?s.emv=0:s.emv=d/(h/1e8/(u-c)),n+=s.emv,r.push(s.emv),o>=i[0]&&(s.maEmv=n/i[0],n-=r[o-i[0]])}return s})}},tM,{name:"MTM",shortName:"MTM",calcParams:[12,6],figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:function(t,e){var i=e.calcParams,n=0,r=[];return t.forEach(function(e,o){var a,s={};if(o>=i[0]){var l=e.close,u=t[o-i[0]].close;s.mtm=l-u,n+=s.mtm,o>=i[0]+i[1]-1&&(s.maMtm=n/i[1],n-=null!==(a=r[o-(i[1]-1)].mtm)&&void 0!==a?a:0)}r.push(s)}),r}},tD,{name:"MACD",shortName:"MACD",calcParams:[12,26,9],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:function(t){var e,i,n=t.data,o=t.indicator,a=t.defaultStyles,s=n.prev,l=n.current,u=null!==(e=null==s?void 0:s.macd)&&void 0!==e?e:Number.MIN_SAFE_INTEGER,c=null!==(i=null==l?void 0:l.macd)&&void 0!==i?i:Number.MIN_SAFE_INTEGER,h="";return h=c>0?J(o.styles,"bars[0].upColor",a.bars[0].upColor):c<0?J(o.styles,"bars[0].downColor",a.bars[0].downColor):J(o.styles,"bars[0].noChangeColor",a.bars[0].noChangeColor),{style:u<c?r.Stroke:r.Fill,color:h,borderColor:h}}}],calc:function(t,e){var i=e.calcParams,n=0,r=0,o=0,a=0,s=0,l=0,u=Math.max(i[0],i[1]);return t.map(function(t,e){var c={},h=t.close;return n+=h,e>=i[0]-1&&(r=e>i[0]-1?(2*h+(i[0]-1)*r)/(i[0]+1):n/i[0]),e>=i[1]-1&&(o=e>i[1]-1?(2*h+(i[1]-1)*o)/(i[1]+1):n/i[1]),e>=u-1&&(a=r-o,c.dif=a,s+=a,e>=u+i[2]-2&&(l=e>u+i[2]-2?(2*a+l*(i[2]-1))/(i[2]+1):s/i[2],c.macd=(a-l)*2,c.dea=l)),c})}},{name:"OBV",shortName:"OBV",calcParams:[30],figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:function(t,e){var i=e.calcParams,n=0,r=0,o=[];return t.forEach(function(e,a){var s,l,u,c,h=null!==(s=t[a-1])&&void 0!==s?s:e;e.close<h.close?r-=null!==(l=e.volume)&&void 0!==l?l:0:e.close>h.close&&(r+=null!==(u=e.volume)&&void 0!==u?u:0);var d={obv:r};n+=r,a>=i[0]-1&&(d.maObv=n/i[0],n-=null!==(c=o[a-(i[0]-1)].obv)&&void 0!==c?c:0),o.push(d)}),o}},{name:"PVT",shortName:"PVT",figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:function(t){var e=0;return t.map(function(i,n){var r,o,a={},s=i.close,l=null!==(r=i.volume)&&void 0!==r?r:1,u=(null!==(o=t[n-1])&&void 0!==o?o:i).close,c=0,h=u*l;return 0!==h&&(c=(s-u)/h),e+=c,a.pvt=e,a})}},{name:"PSY",shortName:"PSY",calcParams:[12,6],figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:function(t,e){var i=e.calcParams,n=0,r=0,o=[],a=[];return t.forEach(function(e,s){var l,u,c={},h=(null!==(l=t[s-1])&&void 0!==l?l:e).close,d=e.close-h>0?1:0;o.push(d),n+=d,s>=i[0]-1&&(c.psy=n/i[0]*100,r+=c.psy,s>=i[0]+i[1]-2&&(c.maPsy=r/i[1],r-=null!==(u=a[s-(i[1]-1)].psy)&&void 0!==u?u:0),n-=o[s-(i[0]-1)]),a.push(c)}),a}},{name:"ROC",shortName:"ROC",calcParams:[12,6],figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:function(t,e){var i=e.calcParams,n=[],r=0;return t.forEach(function(e,o){var a,s,l={};if(o>=i[0]-1){var u=e.close,c=(null!==(a=t[o-i[0]])&&void 0!==a?a:t[o-(i[0]-1)]).close;0!==c?l.roc=(u-c)/c*100:l.roc=0,r+=l.roc,o>=i[0]-1+i[1]-1&&(l.maRoc=r/i[1],r-=null!==(s=n[o-(i[1]-1)].roc)&&void 0!==s?s:0)}n.push(l)}),n}},{name:"RSI",shortName:"RSI",calcParams:[6,12,24],figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:function(t){return t.map(function(t,e){var i=e+1;return{key:"rsi".concat(i),title:"RSI".concat(i,": "),type:"line"}})},calc:function(t,e){var i=e.calcParams,n=e.figures,r=[],o=[];return t.map(function(e,a){var s,l={},u=(null!==(s=t[a-1])&&void 0!==s?s:e).close,c=e.close-u;return i.forEach(function(e,i){var s,u,h;if(c>0?r[i]=(null!==(s=r[i])&&void 0!==s?s:0)+c:o[i]=(null!==(u=o[i])&&void 0!==u?u:0)+Math.abs(c),a>=e-1){0!==o[i]?l[n[i].key]=100-100/(1+r[i]/o[i]):l[n[i].key]=0;var d=t[a-(e-1)],p=null!==(h=t[a-e])&&void 0!==h?h:d,g=d.close-p.close;g>0?r[i]-=g:o[i]-=Math.abs(g)}}),l})}},tA,{name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:function(t,e){var i=e.calcParams,n=[];return t.forEach(function(e,r){var o,a,s,l,u={},c=e.close;if(r>=i[0]-1){var h=tb(t.slice(r-(i[0]-1),r+1),"high","low"),d=h[0],p=h[1],g=d-p;u.k=((i[1]-1)*(null!==(a=null===(o=n[r-1])||void 0===o?void 0:o.k)&&void 0!==a?a:50)+(c-p)/(0===g?1:g)*100)/i[1],u.d=((i[2]-1)*(null!==(l=null===(s=n[r-1])||void 0===s?void 0:s.d)&&void 0!==l?l:50)+u.k)/i[2],u.j=3*u.k-2*u.d}n.push(u)}),n}},tR,{name:"TRIX",shortName:"TRIX",calcParams:[12,9],figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:function(t,e){var i=e.calcParams,n=0,r=0,o=0,a=0,s=0,l=0,u=0,c=[];return t.forEach(function(t,e){var h,d={},p=t.close;if(n+=p,e>=i[0]-1&&(r=e>i[0]-1?(2*p+(i[0]-1)*r)/(i[0]+1):n/i[0],s+=r,e>=2*i[0]-2&&(o=e>2*i[0]-2?(2*r+(i[0]-1)*o)/(i[0]+1):s/i[0],l+=o,e>=3*i[0]-3))){var g=0,v=0;e>3*i[0]-3?v=((g=(2*o+(i[0]-1)*a)/(i[0]+1))-a)/a*100:g=l/i[0],a=g,d.trix=v,u+=v,e>=3*i[0]+i[1]-4&&(d.maTrix=u/i[1],u-=null!==(h=c[e-(i[1]-1)].trix)&&void 0!==h?h:0)}c.push(d)}),c}},tF,{name:"VR",shortName:"VR",calcParams:[26,6],figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:function(t,e){var i=e.calcParams,n=0,r=0,o=0,a=0,s=[];return t.forEach(function(e,l){var u,c,h,d,p,g={},v=e.close,f=(null!==(u=t[l-1])&&void 0!==u?u:e).close,m=null!==(c=e.volume)&&void 0!==c?c:0;if(v>f?n+=m:v<f?r+=m:o+=m,l>=i[0]-1){var y=o/2;r+y===0?g.vr=0:g.vr=(n+y)/(r+y)*100,a+=g.vr,l>=i[0]+i[1]-2&&(g.maVr=a/i[1],a-=null!==(h=s[l-(i[1]-1)].vr)&&void 0!==h?h:0);var _=t[l-(i[0]-1)],x=null!==(d=t[l-i[0]])&&void 0!==d?d:_,b=_.close,C=null!==(p=_.volume)&&void 0!==p?p:0;b>x.close?n-=C:b<x.close?r-=C:o-=C}s.push(g)}),s}},{name:"WR",shortName:"WR",calcParams:[6,10,14],figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:function(t){return t.map(function(t,e){return{key:"wr".concat(e+1),title:"WR".concat(e+1,": "),type:"line"}})},calc:function(t,e){var i=e.calcParams,n=e.figures;return t.map(function(e,r){var o={},a=e.close;return i.forEach(function(e,i){var s=e-1;if(r>=s){var l=tb(t.slice(r-s,r+1),"high","low"),u=l[0],c=u-l[1];o[n[i].key]=0===c?0:(a-u)/c*100}}),o})}}].forEach(function(t){tL[t.name]=ts.extend(t)});var tN=function(){function t(){this._children=[],this._callbacks=new Map}return t.prototype.registerEvent=function(t,e){return this._callbacks.set(t,e),this},t.prototype.onEvent=function(t,e,i){var n=this._callbacks.get(t);return!!(K(n)&&this.checkEventOn(e))&&n(e,i)},t.prototype.checkEventOn=function(t){var e,i;try{for(var n=S(this._children),r=n.next();!r.done;r=n.next())if(r.value.checkEventOn(t))return!0}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}return!1},t.prototype.dispatchEvent=function(t,e,i){var n=this._children.length-1;if(n>-1){for(var r=n;r>-1;r--)if(this._children[r].dispatchEvent(t,e,i))return!0}return this.onEvent(t,e,i)},t.prototype.addChild=function(t){return this._children.push(t),this},t.prototype.clear=function(){this._children=[]},t}(),tV=function(t){function e(e){var i=t.call(this)||this;return i.attrs=e.attrs,i.styles=e.styles,i}return _(e,t),e.prototype.checkEventOn=function(t){return this.checkEventOnImp(t,this.attrs,this.styles)},e.prototype.setAttrs=function(t){return this.attrs=t,this},e.prototype.setStyles=function(t){return this.styles=t,this},e.prototype.draw=function(t){this.drawImp(t,this.attrs,this.styles)},e.extend=function(t){return function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return _(i,e),i.prototype.checkEventOnImp=function(e,i,n){return t.checkEventOn(e,i,n)},i.prototype.drawImp=function(e,i,n){t.draw(e,i,n)},i}(e)},e}(tN);function tW(t,e){return null!==t?e.x*t[0]+t[1]:e.y}function tz(t,e){var i=t.x-e.x;if(0!==i){var n=(t.y-e.y)/i,r=t.y-n*t.x;return[n,r]}return null}function tY(t,e,i){var n=e.length,r=G(i)?i>0&&i<1?i:0:i?.5:0;if(r>0&&n>2){for(var o=e[0].x,a=e[0].y,s=1;s<n-1;s++){var l=e[s-1],u=e[s],c=e[s+1],h=u.x-l.x,d=u.y-l.y,p=c.x-u.x,g=c.y-u.y,v=c.x-l.x,f=c.y-l.y,m=Math.sqrt(h*h+d*d),y=Math.sqrt(p*p+g*g),_=y/(y+m),x=u.x+v*r*_,b=u.y+f*r*_;x=Math.min(x,Math.max(c.x,u.x)),b=Math.min(b,Math.max(c.y,u.y)),x=Math.max(x,Math.min(c.x,u.x)),b=Math.max(b,Math.min(c.y,u.y)),v=x-u.x,f=b-u.y;var C=u.x-v*m/y,w=u.y-f*m/y;C=Math.min(C,Math.max(l.x,u.x)),w=Math.min(w,Math.max(l.y,u.y)),C=Math.max(C,Math.min(l.x,u.x)),w=Math.max(w,Math.min(l.y,u.y)),v=u.x-C,f=u.y-w,x=u.x+v*y/m,b=u.y+f*y/m,t.bezierCurveTo(o,a,C,w,u.x,u.y),o=x,a=b}var S=e[n-1];t.bezierCurveTo(o,a,S.x,S.y,S.x,S.y)}else for(var s=1;s<n;s++)t.lineTo(e[s].x,e[s].y)}function tX(t,e,i){var n=null!=i?i:0,r=[];if(t.length>1){if(t[0].x===t[1].x){var o=e.height;if(r.push({coordinates:[{x:t[0].x,y:0},{x:t[0].x,y:o}]}),t.length>2){r.push({coordinates:[{x:t[2].x,y:0},{x:t[2].x,y:o}]});for(var a=t[0].x-t[2].x,s=0;s<n;s++){var l=a*(s+1);r.push({coordinates:[{x:t[0].x+l,y:0},{x:t[0].x+l,y:o}]})}}}else{var u=e.width,c=tz(t[0],t[1]),h=c[0],d=c[1];if(r.push({coordinates:[{x:0,y:0*h+d},{x:u,y:u*h+d}]}),t.length>2){var p=t[2].y-h*t[2].x;r.push({coordinates:[{x:0,y:0*h+p},{x:u,y:u*h+p}]});for(var a=d-p,s=0;s<n;s++){var g=d+a*(s+1);r.push({coordinates:[{x:0,y:0*h+g},{x:u,y:u*h+g}]})}}}}return r}var tH={name:"simpleAnnotation",totalStep:2,styles:{line:{style:n.Dashed}},createPointFigures:function(t){var e,i=t.overlay,n=t.coordinates,r="";K(i.extendData)&&(r=X(i.extendData)?i.extendData(i):null!==(e=i.extendData)&&void 0!==e?e:"");var o=n[0].x,a=n[0].y-6,s=a-50,l=s-5;return[{type:"line",attrs:{coordinates:[{x:o,y:a},{x:o,y:s}]},ignoreEvent:!0},{type:"polygon",attrs:{coordinates:[{x:o,y:s},{x:o-4,y:l},{x:o+4,y:l}]},ignoreEvent:!0},{type:"text",attrs:{x:o,y:l,text:r,align:"center",baseline:"bottom"},ignoreEvent:!0}]}},tG={name:"simpleTag",totalStep:2,styles:{line:{style:n.Dashed}},createPointFigures:function(t){var e=t.bounding,i=t.coordinates;return{type:"line",attrs:{coordinates:[{x:0,y:i[0].y},{x:e.width,y:i[0].y}]},ignoreEvent:!0}},createYAxisFigures:function(t){var e,i,n=t.chart,r=t.overlay,o=t.coordinates,a=t.bounding,s=t.yAxis,l=null!==(e=null==s?void 0:s.isFromZero())&&void 0!==e&&e,u="left",c=0;l?(u="left",c=0):(u="right",c=a.width);var h="";return K(r.extendData)&&(h=X(r.extendData)?r.extendData(r):null!==(i=r.extendData)&&void 0!==i?i:""),!K(h)&&G(r.points[0].value)&&(h=$(r.points[0].value,n.getPrecision().price)),{type:"text",attrs:{x:c,y:o[0].y,text:h,align:u,baseline:"middle"}}}},tK={};[{name:"fibonacciLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e,i,n=t.chart,r=t.coordinates,o=t.bounding,a=t.overlay,s=t.yAxis,l=a.points;if(r.length>0){var u=0;null===(e=null==s?void 0:s.isInCandle())||void 0===e||e?u=n.getPrecision().price:(null!==(i=n.getIndicators({paneId:a.paneId}).get(a.paneId))&&void 0!==i?i:[]).forEach(function(t){u=Math.max(u,t.precision)});var c=[],h=[],d=o.width;if(r.length>1&&G(l[0].value)&&G(l[1].value)){var p=r[0].y-r[1].y,g=l[0].value-l[1].value;[1,.786,.618,.5,.382,.236,0].forEach(function(t){var e,i=r[1].y+p*t,o=n.getDecimalFold().format(n.getThousandsSeparator().format(((null!==(e=l[1].value)&&void 0!==e?e:0)+g*t).toFixed(u)));c.push({coordinates:[{x:0,y:i},{x:d,y:i}]}),h.push({x:0,y:i,text:"".concat(o," (").concat((100*t).toFixed(1),"%)"),baseline:"bottom"})})}return[{type:"line",attrs:c},{type:"text",isCheckEvent:!1,attrs:h}]}return[]}},{name:"horizontalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates,i=t.bounding,n={x:0,y:e[0].y};return K(e[1])&&e[0].x<e[1].x&&(n.x=i.width),[{type:"line",attrs:{coordinates:[e[0],n]}}]},performEventPressedMove:function(t){var e=t.points,i=t.performPoint;e[0].value=i.value,e[1].value=i.value},performEventMoveForDrawing:function(t){var e=t.currentStep,i=t.points,n=t.performPoint;2===e&&(i[0].value=n.value)}},{name:"horizontalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates,i=[];return 2===e.length&&i.push({coordinates:e}),[{type:"line",attrs:i}]},performEventPressedMove:function(t){var e=t.points,i=t.performPoint;e[0].value=i.value,e[1].value=i.value},performEventMoveForDrawing:function(t){var e=t.currentStep,i=t.points,n=t.performPoint;2===e&&(i[0].value=n.value)}},{name:"horizontalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates,i=t.bounding;return[{type:"line",attrs:{coordinates:[{x:0,y:e[0].y},{x:i.width,y:e[0].y}]}}]}},{name:"parallelStraightLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){return[{type:"line",attrs:tX(t.coordinates,t.bounding)}]}},{name:"priceChannelLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){return[{type:"line",attrs:tX(t.coordinates,t.bounding,1)}]}},{name:"priceLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e,i,n=t.chart,r=t.coordinates,o=t.bounding,a=t.overlay,s=t.yAxis,l=0;null===(e=null==s?void 0:s.isInCandle())||void 0===e||e?l=n.getPrecision().price:(null!==(i=n.getIndicators({paneId:a.paneId}).get(a.paneId))&&void 0!==i?i:[]).forEach(function(t){l=Math.max(l,t.precision)});var u=a.points[0].value;return[{type:"line",attrs:{coordinates:[r[0],{x:o.width,y:r[0].y}]}},{type:"text",ignoreEvent:!0,attrs:{x:r[0].x,y:r[0].y,text:n.getDecimalFold().format(n.getThousandsSeparator().format((void 0===u?0:u).toFixed(l))),baseline:"bottom"}}]}},{name:"rayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){return[{type:"line",attrs:function(t,e){if(t.length>1){var i,n,r,o,a,s,l={x:0,y:0};return l=t[0].x===t[1].x&&t[0].y!==t[1].y?t[0].y<t[1].y?{x:t[0].x,y:e.height}:{x:t[0].x,y:0}:t[0].x>t[1].x?{x:0,y:(i=t[0],n=t[1],r={x:0,y:t[0].y},tW(tz(i,n),r))}:{x:e.width,y:(o=t[0],a=t[1],s={x:e.width,y:t[0].y},tW(tz(o,a),s))},{coordinates:[t[0],l]}}return[]}(t.coordinates,t.bounding)}]}},{name:"segment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates;return 2===e.length?[{type:"line",attrs:{coordinates:e}}]:[]}},{name:"straightLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e,i,n,r,o,a,s=t.coordinates,l=t.bounding;return 2===s.length?s[0].x===s[1].x?[{type:"line",attrs:{coordinates:[{x:s[0].x,y:0},{x:s[0].x,y:l.height}]}}]:[{type:"line",attrs:{coordinates:[{x:0,y:(e=s[0],i=s[1],n={x:0,y:s[0].y},tW(tz(e,i),n))},{x:l.width,y:(r=s[0],o=s[1],a={x:l.width,y:s[0].y},tW(tz(r,o),a))}]}}]:[]}},{name:"verticalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates,i=t.bounding;if(2===e.length){var n={x:e[0].x,y:0};return e[0].y<e[1].y&&(n.y=i.height),[{type:"line",attrs:{coordinates:[e[0],n]}}]}return[]},performEventPressedMove:function(t){var e=t.points,i=t.performPoint;e[0].timestamp=i.timestamp,e[0].dataIndex=i.dataIndex,e[1].timestamp=i.timestamp,e[1].dataIndex=i.dataIndex},performEventMoveForDrawing:function(t){var e=t.currentStep,i=t.points,n=t.performPoint;2===e&&(i[0].timestamp=n.timestamp,i[0].dataIndex=n.dataIndex)}},{name:"verticalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates;return 2===e.length?[{type:"line",attrs:{coordinates:e}}]:[]},performEventPressedMove:function(t){var e=t.points,i=t.performPoint;e[0].timestamp=i.timestamp,e[0].dataIndex=i.dataIndex,e[1].timestamp=i.timestamp,e[1].dataIndex=i.dataIndex},performEventMoveForDrawing:function(t){var e=t.currentStep,i=t.points,n=t.performPoint;2===e&&(i[0].timestamp=n.timestamp,i[0].dataIndex=n.dataIndex)}},{name:"verticalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(t){var e=t.coordinates,i=t.bounding;return[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:i.height}]}}]}},tH,tG].forEach(function(t){tK[t.name]=tu.extend(t)});var tU={light:{grid:{horizontal:{color:"#EDEDED"},vertical:{color:"#EDEDED"}},candle:{priceMark:{high:{color:"#76808F"},low:{color:"#76808F"}},tooltip:{rect:{color:"#FEFEFE",borderColor:"#F2F3F5"},text:{color:"#76808F"}}},indicator:{tooltip:{text:{color:"#76808F"}}},xAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},yAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},separator:{color:"#DDDDDD"},crosshair:{horizontal:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}},vertical:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}}}},dark:{grid:{horizontal:{color:"#292929"},vertical:{color:"#292929"}},candle:{priceMark:{high:{color:"#929AA5"},low:{color:"#929AA5"}},tooltip:{rect:{color:"rgba(10, 10, 10, .6)",borderColor:"rgba(10, 10, 10, .6)"},text:{color:"#929AA5"}}},indicator:{tooltip:{text:{color:"#929AA5"}}},xAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},yAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},separator:{color:"#333333"},crosshair:{horizontal:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}},vertical:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}}}}},tZ={CANDLE:"candle_pane",INDICATOR:"indicator_pane_",X_AXIS:"x_axis_pane"},tj={Year:31536e3,Month:2592e3,Day:86400,Hour:3600,Minute:60,Second:1},tq={MIN:1,MAX:50},tJ=function(){function t(t,e){var i,s,c,h,d=this;this._styles={grid:function(){function t(){return{show:!0,size:1,color:"#EDEDED",style:n.Dashed,dashedValue:[2,2]}}return{show:!0,horizontal:t(),vertical:t()}}(),candle:(i={show:!0,color:B,textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"},{type:u.CandleSolid,bar:{upColor:k,downColor:T,noChangeColor:D,upBorderColor:k,downBorderColor:T,noChangeBorderColor:D,upWickColor:k,downWickColor:T,noChangeWickColor:D},area:{lineSize:2,lineColor:R,smooth:!1,value:"close",backgroundColor:[{offset:0,color:L(.01)},{offset:1,color:L(.2)}],point:{show:!0,color:R,radius:4,rippleColor:L(.3),rippleRadius:8,animation:!0,animationDuration:1e3}},priceMark:{show:!0,high:x({},i),low:x({},i),last:{show:!0,upColor:k,downColor:T,noChangeColor:D,line:{show:!0,style:n.Dashed,dashedValue:[4,4],size:1},text:{show:!0,style:r.Fill,size:12,paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderColor:"transparent",borderStyle:n.Solid,borderSize:0,borderDashedValue:[2,2],color:A,family:"Helvetica Neue",weight:"normal",borderRadius:2}}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:o.Always,showType:a.Standard,custom:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}],defaultValue:"n/a",rect:{position:l.Fixed,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,offsetLeft:4,offsetTop:4,offsetRight:4,offsetBottom:4,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",color:"#FEFEFE"},text:{size:12,family:"Helvetica Neue",weight:"normal",color:B,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},icons:[]}}),indicator:(s=["#FF9600","#935EBD",R,"#E11D74","#01C5C4"].map(function(t){return{style:n.Solid,smooth:!1,size:1,dashedValue:[2,2],color:t}}),{ohlc:{upColor:M,downColor:P,noChangeColor:D},bars:[{style:r.Fill,borderStyle:n.Solid,borderSize:1,borderDashedValue:[2,2],upColor:M,downColor:P,noChangeColor:D}],lines:s,circles:[{style:r.Fill,borderStyle:n.Solid,borderSize:1,borderDashedValue:[2,2],upColor:M,downColor:P,noChangeColor:D}],lastValueMark:{show:!1,text:{show:!1,style:r.Fill,color:A,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:n.Solid,borderColor:"transparent",borderSize:0,borderDashedValue:[2,2],paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderRadius:2}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:o.Always,showType:a.Standard,showName:!0,showParams:!0,defaultValue:"n/a",text:{size:12,family:"Helvetica Neue",weight:"normal",color:B,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},icons:[]}}),xAxis:O(),yAxis:O(),separator:{size:1,color:F,fill:!0,activeBackgroundColor:L(.08)},crosshair:function(){function t(){return{show:!0,line:{show:!0,style:n.Dashed,dashedValue:[4,2],size:1,color:B},text:{show:!0,style:r.Fill,color:A,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:n.Solid,borderDashedValue:[2,2],borderSize:1,borderColor:B,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:B}}}return{show:!0,horizontal:t(),vertical:t()}}(),overlay:(c=L(.35),h=L(.25),{point:{color:R,borderColor:c,borderSize:1,radius:5,activeColor:R,activeBorderColor:c,activeBorderSize:3,activeRadius:5},line:{style:n.Solid,smooth:!1,color:R,size:1,dashedValue:[2,2]},rect:{style:r.Fill,color:h,borderColor:R,borderSize:1,borderRadius:0,borderStyle:n.Solid,borderDashedValue:[2,2]},polygon:{style:r.Fill,color:R,borderColor:R,borderSize:1,borderStyle:n.Solid,borderDashedValue:[2,2]},circle:{style:r.Fill,color:h,borderColor:R,borderSize:1,borderStyle:n.Solid,borderDashedValue:[2,2]},arc:{style:n.Solid,color:R,size:1,dashedValue:[2,2]},text:{style:r.Fill,color:A,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:n.Solid,borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:R,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:R}})},this._customApi={formatDate:function(t,e){var i;return i=Q(d._dateTimeFormat,t),e.replace(/YYYY|MM|DD|HH|mm|ss/g,function(t){return i[t]})},formatBigNumber:tt},this._locale="en-US",this._thousandsSeparator={sign:",",format:function(t){return function(t,e){var i="".concat(t);if(0===e.length)return i;if(i.includes(".")){var n=i.split(".");return"".concat(n[0].replace(/(\d)(?=(\d{3})+$)/g,function(t){return"".concat(t).concat(e)}),".").concat(n[1])}return i.replace(/(\d)(?=(\d{3})+$)/g,function(t){return"".concat(t).concat(e)})}(t,d._thousandsSeparator.sign)}},this._decimalFold={threshold:3,format:function(t){return function(t,e){var i="".concat(t);if(RegExp("\\.0{"+e+",}[1-9][0-9]*$").test(i)){var n=i.split("."),r=n.length-1,o=n[r],a=/0*/.exec(o);if(K(a)){var s=a[0].length;return n[r]=o.replace(/0*/,"0{".concat(s,"}")),n.join(".")}}return i}(t,d._decimalFold.threshold)}},this._precision={price:2,volume:0},this._dataList=[],this._loadMoreDataCallback=null,this._loading=!0,this._loadDataMore={forward:!1,backward:!1},this._zoomEnabled=!0,this._scrollEnabled=!0,this._totalBarSpace=0,this._barSpace=10,this._offsetRightDistance=80,this._startLastBarRightSideDiffBarCount=0,this._scrollLimitRole=0,this._minVisibleBarCount={left:2,right:2},this._maxOffsetDistance={left:50,right:50},this._visibleRange=tS(),this._cacheVisibleRange=tS(),this._timeTicks=new Map,this._visibleRangeTimeTickList=[],this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._crosshair={},this._activeTooltipIcon=null,this._actions=new Map,this._indicators=new Map,this._taskScheduler=new tI,this._overlays=new Map,this._progressOverlayInfo=null,this._pressedOverlayInfo={paneId:"",overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._hoverOverlayInfo={paneId:"",overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._clickOverlayInfo={paneId:"",overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._chart=t,this._calcOptimalBarSpace(),this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace;var p=null!=e?e:{},g=p.styles,v=p.locale,f=p.timezone,m=p.customApi,y=p.thousandsSeparator,_=p.decimalFold;K(g)&&this.setStyles(g),Z(v)&&this.setLocale(v),this.setTimezone(null!=f?f:""),K(m)&&this.setCustomApi(m),K(y)&&this.setThousandsSeparator(y),K(_)&&this.setDecimalFold(_)}return t.prototype.setStyles=function(t){var e,i,n,r=null;r=Z(t)?null!==(e=tU[t])&&void 0!==e?e:null:t,W(this._styles,r),Y(null===(n=null===(i=null==r?void 0:r.candle)||void 0===i?void 0:i.tooltip)||void 0===n?void 0:n.custom)&&(this._styles.candle.tooltip.custom=r.candle.tooltip.custom)},t.prototype.getStyles=function(){return this._styles},t.prototype.setCustomApi=function(t){W(this._customApi,t)},t.prototype.getCustomApi=function(){return this._customApi},t.prototype.setLocale=function(t){this._locale=t},t.prototype.getLocale=function(){return this._locale},t.prototype.setTimezone=function(t){if(!K(this._dateTimeFormat)||this.getTimezone()!==t){var e={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};t.length>0&&(e.timeZone=t);var i=null;try{i=new Intl.DateTimeFormat("en",e)}catch(t){V("","","Timezone is error!!!")}null!==i&&(this._classifyTimeTicks(this._dataList),this._adjustVisibleRangeTimeTickList(),this._dateTimeFormat=i)}},t.prototype.getTimezone=function(){return this._dateTimeFormat.resolvedOptions().timeZone},t.prototype.setThousandsSeparator=function(t){W(this._thousandsSeparator,t)},t.prototype.getThousandsSeparator=function(){return this._thousandsSeparator},t.prototype.setDecimalFold=function(t){W(this._decimalFold,t)},t.prototype.getDecimalFold=function(){return this._decimalFold},t.prototype.getPrecision=function(){return this._precision},t.prototype.setPrecision=function(t){W(this._precision,t),this._synchronizeIndicatorSeriesPrecision()},t.prototype.getDataList=function(){return this._dataList},t.prototype.getVisibleRangeDataList=function(){return this._visibleRangeDataList},t.prototype.getVisibleRangeHighLowPrice=function(){return this._visibleRangeHighLowPrice},t.prototype.addData=function(t,e,i){var n,r,o,a,s=this,l=!1,u=!1,c=0;if(Y(t)){switch(c=t.length,e){case v.Init:this.clearData(),this._dataList=t,this._loadDataMore.backward=null!==(n=null==i?void 0:i.forward)&&void 0!==n&&n,this._loadDataMore.forward=null!==(r=null==i?void 0:i.forward)&&void 0!==r&&r,this._classifyTimeTicks(this._dataList),this.setOffsetRightDistance(this._offsetRightDistance),u=!0;break;case v.Backward:this._classifyTimeTicks(t,!0),this._dataList=this._dataList.concat(t),this._loadDataMore.backward=null!==(o=null==i?void 0:i.backward)&&void 0!==o&&o,u=c>0;break;case v.Forward:this._dataList=t.concat(this._dataList),this._classifyTimeTicks(this._dataList),this._loadDataMore.forward=null!==(a=null==i?void 0:i.forward)&&void 0!==a&&a,u=c>0}this._loading=!1,l=!0}else{var h=this._dataList.length,d=t.timestamp,p=J(this._dataList[h-1],"timestamp",0);if(d>p){this._classifyTimeTicks([t],!0),this._dataList.push(t);var g=this.getLastBarRightSideDiffBarCount();g<0&&this.setLastBarRightSideDiffBarCount(--g),c=1,l=!0,u=!0}else d===p&&(this._dataList[h-1]=t,l=!0,u=!0)}l&&(c>0&&this._overlays.forEach(function(t){t.forEach(function(t){t.points.forEach(function(t){if(!K(t.timestamp)&&K(t.dataIndex)){e===v.Forward&&(t.dataIndex=t.dataIndex+c);var i=s._dataList[t.dataIndex];t.timestamp=null==i?void 0:i.timestamp}})})}),u&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,!0),this.getIndicatorsByFilter({}).forEach(function(t,i){t.forEach(function(t){s._addIndicatorCalcTask(i,t,e)})}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})))},t.prototype.setLoadMoreDataCallback=function(t){this._loadMoreDataCallback=t},t.prototype._calcOptimalBarSpace=function(){var t=1-.2*Math.atan(Math.max(4,this._barSpace)-4)/(.5*Math.PI),e=Math.min(Math.floor(this._barSpace*t),Math.floor(this._barSpace));e%2==0&&e+2>=this._barSpace&&--e,this._gapBarSpace=Math.max(1,e)},t.prototype._classifyTimeTicks=function(t,e){var i,n=0,r=null;null!=e&&e?(n=this._dataList.length,r=this._dataList[n-1]):this._timeTicks.clear();for(var o=0;o<t.length;o++){var a=t[o],s=tj.Second,l=Q(this._dateTimeFormat,a.timestamp);if(K(r)){var u=Q(this._dateTimeFormat,r.timestamp);s=l.YYYY!==u.YYYY?tj.Year:l.MM!==u.MM?tj.Month:l.DD!==u.DD?tj.Day:l.HH!==u.HH?tj.Hour:l.mm!==u.mm?tj.Minute:tj.Second}var c=null!==(i=this._timeTicks.get(s))&&void 0!==i?i:[];c.push({dataIndex:o+n,weight:s,dateTime:l,timestamp:a.timestamp}),this._timeTicks.set(s,c),r=a}},t.prototype._adjustVisibleRangeTimeTickList=function(){var t,e,i=this,n=this._styles.xAxis.tickText,r=Math.ceil(Math.max(Math.ceil(this._totalBarSpace/10),tr("0000-00-00 00:00",n.size,n.weight,n.family))/this._barSpace),o=[];Array.from(this._timeTicks.keys()).sort(function(t,e){return e-t}).forEach(function(t){var e=o;o=[];for(var n=e.length,a=0,s=i._timeTicks.get(t),l=s.length,u=1/0,c=-1/0,h=0;h<l;h++){for(var d=s[h],p=d.dataIndex;a<n;){var g=e[a],v=g.dataIndex;if(v<p)a++,o.push(g),c=v,u=1/0;else{u=v;break}}u-p>=r&&p-c>=r&&(o.push(d),c=p)}for(;a<n;a++)o.push(e[a])}),this._visibleRangeTimeTickList=[];try{for(var a=S(o),s=a.next();!s.done;s=a.next()){var l=s.value;l.dataIndex>=this._visibleRange.from&&l.dataIndex<=this._visibleRange.to&&this._visibleRangeTimeTickList.push(l)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}},t.prototype.getVisibleRangeTimeTickList=function(){return this._visibleRangeTimeTickList},t.prototype._adjustVisibleRange=function(){var t,e,i=this,n=this._dataList.length,r=this._totalBarSpace/this._barSpace,o=0,a=0;1===this._scrollLimitRole?(o=(this._totalBarSpace-this._maxOffsetDistance.right)/this._barSpace,a=(this._totalBarSpace-this._maxOffsetDistance.left)/this._barSpace):(o=this._minVisibleBarCount.left,a=this._minVisibleBarCount.right),o=Math.max(0,o),a=Math.max(0,a);var s=r-Math.min(o,n);this._lastBarRightSideDiffBarCount>s&&(this._lastBarRightSideDiffBarCount=s);var l=-n+Math.min(a,n);this._lastBarRightSideDiffBarCount<l&&(this._lastBarRightSideDiffBarCount=l);var u=Math.round(this._lastBarRightSideDiffBarCount+n+.5),h=u;u>n&&(u=n);var d=Math.round(u-r)-1;d<0&&(d=0);var p=this._lastBarRightSideDiffBarCount>0?Math.round(n+this._lastBarRightSideDiffBarCount-r)-1:d;this._visibleRange={from:d,to:u,realFrom:p,realTo:h},this.executeAction(c.OnVisibleRangeChange,this._visibleRange),this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}];for(var g=p;g<h;g++){var f=this._dataList[g],m=this.dataIndexToCoordinate(g);this._visibleRangeDataList.push({dataIndex:g,x:m,data:f}),K(f)&&(this._visibleRangeHighLowPrice[0].price<f.high&&(this._visibleRangeHighLowPrice[0].price=f.high,this._visibleRangeHighLowPrice[0].x=m),this._visibleRangeHighLowPrice[1].price>f.low&&(this._visibleRangeHighLowPrice[1].price=f.low,this._visibleRangeHighLowPrice[1].x=m))}if((this._cacheVisibleRange.from!==this._visibleRange.from||this._cacheVisibleRange.to!==this._visibleRange.to)&&(this._cacheVisibleRange=x({},this._visibleRange),this._adjustVisibleRangeTimeTickList()),!this._loading&&K(this._loadMoreDataCallback)){var y=null;0===d?this._loadDataMore.forward&&(this._loading=!0,y={type:v.Forward,data:null!==(t=this._dataList[0])&&void 0!==t?t:null,callback:function(t,e){i.addData(t,v.Forward,{forward:null!=e&&e,backward:null!=e&&e})}}):u===n&&this._loadDataMore.backward&&(this._loading=!0,y={type:v.Backward,data:null!==(e=this._dataList[n-1])&&void 0!==e?e:null,callback:function(t,e){i.addData(t,v.Backward,{forward:null!=e&&e,backward:null!=e&&e})}}),K(y)&&this._loadMoreDataCallback(y)}},t.prototype.getBarSpace=function(){return{bar:this._barSpace,halfBar:this._barSpace/2,gapBar:this._gapBarSpace,halfGapBar:Math.floor(this._gapBarSpace/2)}},t.prototype.setBarSpace=function(t,e){t<tq.MIN||t>tq.MAX||this._barSpace===t||(this._barSpace=t,this._calcOptimalBarSpace(),null==e||e(),this._adjustVisibleRange(),this.setCrosshair(this._crosshair,!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}))},t.prototype.setTotalBarSpace=function(t){this._totalBarSpace!==t&&(this._totalBarSpace=t,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,!0))},t.prototype.setOffsetRightDistance=function(t,e){return this._offsetRightDistance=1===this._scrollLimitRole?Math.min(this._maxOffsetDistance.right,t):t,this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace,null!=e&&e&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})),this},t.prototype.getInitialOffsetRightDistance=function(){return this._offsetRightDistance},t.prototype.getOffsetRightDistance=function(){return Math.max(0,this._lastBarRightSideDiffBarCount*this._barSpace)},t.prototype.getLastBarRightSideDiffBarCount=function(){return this._lastBarRightSideDiffBarCount},t.prototype.setLastBarRightSideDiffBarCount=function(t){this._lastBarRightSideDiffBarCount=t},t.prototype.setMaxOffsetLeftDistance=function(t){this._scrollLimitRole=1,this._maxOffsetDistance.left=t},t.prototype.setMaxOffsetRightDistance=function(t){this._scrollLimitRole=1,this._maxOffsetDistance.right=t},t.prototype.setLeftMinVisibleBarCount=function(t){this._scrollLimitRole=0,this._minVisibleBarCount.left=t},t.prototype.setRightMinVisibleBarCount=function(t){this._scrollLimitRole=0,this._minVisibleBarCount.right=t},t.prototype.getVisibleRange=function(){return this._visibleRange},t.prototype.startScroll=function(){this._startLastBarRightSideDiffBarCount=this._lastBarRightSideDiffBarCount},t.prototype.scroll=function(t){if(this._scrollEnabled){var e=t/this._barSpace,i=this._lastBarRightSideDiffBarCount*this._barSpace;this._lastBarRightSideDiffBarCount=this._startLastBarRightSideDiffBarCount-e,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0});var n=Math.round(i-this._lastBarRightSideDiffBarCount*this._barSpace);0!==n&&this.executeAction(c.OnScroll,{distance:n})}},t.prototype.getDataByDataIndex=function(t){var e;return null!==(e=this._dataList[t])&&void 0!==e?e:null},t.prototype.coordinateToFloatIndex=function(t){var e=this._dataList.length,i=(this._totalBarSpace-t)/this._barSpace;return Math.round(1e6*(e+this._lastBarRightSideDiffBarCount-i))/1e6},t.prototype.dataIndexToTimestamp=function(t){var e,i=this.getDataByDataIndex(t);return null!==(e=null==i?void 0:i.timestamp)&&void 0!==e?e:null},t.prototype.timestampToDataIndex=function(t){return 0===this._dataList.length?0:t_(this._dataList,"timestamp",t)},t.prototype.dataIndexToCoordinate=function(t){var e=this._dataList.length+this._lastBarRightSideDiffBarCount-t;return Math.floor(this._totalBarSpace-(e-.5)*this._barSpace+.5)},t.prototype.coordinateToDataIndex=function(t){return Math.ceil(this.coordinateToFloatIndex(t))-1},t.prototype.zoom=function(t,e){var i,n=this;if(this._zoomEnabled){var r=null!=e?e:null;G(null==r?void 0:r.x)||(r={x:null!==(i=this._crosshair.x)&&void 0!==i?i:this._totalBarSpace/2});var o=r.x,a=this.coordinateToFloatIndex(o),s=this._barSpace,l=this._barSpace+t*(this._barSpace/10);this.setBarSpace(l,function(){n._lastBarRightSideDiffBarCount+=a-n.coordinateToFloatIndex(o)});var u=this._barSpace/s;1!==u&&this.executeAction(c.OnZoom,{scale:u})}},t.prototype.setZoomEnabled=function(t){this._zoomEnabled=t},t.prototype.isZoomEnabled=function(){return this._zoomEnabled},t.prototype.setScrollEnabled=function(t){this._scrollEnabled=t},t.prototype.isScrollEnabled=function(){return this._scrollEnabled},t.prototype.setCrosshair=function(t,e){var i=null!=t?t:{},n=0,r=0;r=G(i.x)?(n=this.coordinateToDataIndex(i.x))<0?0:n>this._dataList.length-1?this._dataList.length-1:n:n=this._dataList.length-1;var o=this._dataList[r],a=this.dataIndexToCoordinate(n),s={x:this._crosshair.x,y:this._crosshair.y,paneId:this._crosshair.paneId};this._crosshair=x(x({},i),{realX:a,kLineData:o,realDataIndex:n,dataIndex:r}),s.x===i.x&&s.y===i.y&&s.paneId===i.paneId||(K(o)&&this._chart.crosshairChange(this._crosshair),null!=e&&e||this._chart.updatePane(1))},t.prototype.getCrosshair=function(){return this._crosshair},t.prototype.setActiveTooltipIcon=function(t){this._activeTooltipIcon=null!=t?t:null},t.prototype.getActiveTooltipIcon=function(){return this._activeTooltipIcon},t.prototype.executeAction=function(t,e){var i;null===(i=this._actions.get(t))||void 0===i||i.execute(e)},t.prototype.subscribeAction=function(t,e){var i;this._actions.has(t)||this._actions.set(t,new to),null===(i=this._actions.get(t))||void 0===i||i.subscribe(e)},t.prototype.unsubscribeAction=function(t,e){var i=this._actions.get(t);K(i)&&(i.unsubscribe(e),i.isEmpty()&&this._actions.delete(t))},t.prototype.hasAction=function(t){var e=this._actions.get(t);return K(e)&&!e.isEmpty()},t.prototype._sortIndicators=function(t){var e;Z(t)?null===(e=this._indicators.get(t))||void 0===e||e.sort(function(t,e){return t.zLevel-e.zLevel}):this._indicators.forEach(function(t){t.sort(function(t,e){return t.zLevel-e.zLevel})})},t.prototype._addIndicatorCalcTask=function(t,e,i){var n=this;this._taskScheduler.addTask({id:tE(t,e.name),handler:function(){var t;null===(t=e.onDataStateChange)||void 0===t||t.call(e,{state:d.Loading,type:i,indicator:e}),e.calcImp(n._dataList).then(function(t){var r;t&&(n._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}),null===(r=e.onDataStateChange)||void 0===r||r.call(e,{state:d.Ready,type:i,indicator:e}))}).catch(function(){var t;null===(t=e.onDataStateChange)||void 0===t||t.call(e,{state:d.Error,type:i,indicator:e})})}})},t.prototype.addIndicator=function(t,e,i){var n=t.name,r=this._indicators.get(e);if(K(r)&&K(r.find(function(t){return t.name===n})))return!1;K(r)||(r=[]);var o=new(tO(n));return this._synchronizeIndicatorSeriesPrecision(o),o.override(t),i||(this.removeIndicator({paneId:e}),r=[]),r.push(o),this._indicators.set(e,r),this._sortIndicators(e),this._addIndicatorCalcTask(e,o,v.Init),!0},t.prototype.getIndicatorsByPaneId=function(t){var e;return null!==(e=this._indicators.get(t))&&void 0!==e?e:[]},t.prototype.getIndicatorsByFilter=function(t){var e=function(t,e){return t.filter(function(t){return!K(e)||t.name===e})},i=t.paneId,n=t.name,r=new Map;if(K(i)){var o=this.getIndicatorsByPaneId(i);r.set(i,e(o,n))}else K(n)?this._indicators.forEach(function(t,i){r.set(i,e(t,n))}):this._indicators.forEach(function(t,i){r.set(i,e(t))});return r},t.prototype.removeIndicator=function(t){var e=this,i=!1;return this.getIndicatorsByFilter(t).forEach(function(t,n){var r=e.getIndicatorsByPaneId(n);t.forEach(function(t){var o=r.findIndex(function(e){return e.name===t.name});o>-1&&(e._taskScheduler.removeTask(tE(n,t.name)),r.splice(o,1),i=!0)}),0===r.length&&e._indicators.delete(n)}),i},t.prototype.hasIndicators=function(t){return this._indicators.has(t)},t.prototype._synchronizeIndicatorSeriesPrecision=function(t){var e=this._precision,i=e.price,n=e.volume,r=function(t){switch(t.series){case h.Price:t.setSeriesPrecision(i);break;case h.Volume:t.setSeriesPrecision(n)}};K(t)?r(t):this._indicators.forEach(function(t){t.forEach(function(t){r(t)})})},t.prototype.overrideIndicator=function(t,e){var i=this,n=t.name,r=new Map;if(K(e)){var o=this._indicators.get(e);K(o)&&r.set(e,o)}else r=this._indicators;var a=!1,s=!1;return r.forEach(function(e,r){var o=e.find(function(t){return t.name===n});if(K(o)){o.override(t);var l=o.shouldUpdateImp(),u=l.calc,c=l.draw;l.sort&&(s=!0),u?i._addIndicatorCalcTask(r,o,v.Update):c&&(a=!0)}}),s&&this._sortIndicators(),!!a&&(this._chart.layout({update:!0}),!0)},t.prototype.getOverlaysByFilter=function(t){var e,i,n=t.id,r=t.groupId,o=t.paneId,a=t.name,s=function(t){return t.filter(function(t){return K(n)?t.id===n:K(r)?t.groupId===r&&(!K(a)||t.name===a):!K(a)||t.name===a})},l=new Map;if(K(o)){var u=this.getOverlaysByPaneId(o);l.set(o,s(u))}else this._overlays.forEach(function(t,e){l.set(e,s(t))});var c=null===(e=this._progressOverlayInfo)||void 0===e?void 0:e.overlay;if(K(c)){var h=null!==(i=l.get(c.paneId))&&void 0!==i?i:[];h.push(c),l.set(c.paneId,h)}return l},t.prototype.getOverlaysByPaneId=function(t){var e;if(!Z(t)){var i=[];return this._overlays.forEach(function(t){i=i.concat(t)}),i}return null!==(e=this._overlays.get(t))&&void 0!==e?e:[]},t.prototype._sortOverlays=function(t){var e;Z(t)?null===(e=this._overlays.get(t))||void 0===e||e.sort(function(t,e){return t.zLevel-e.zLevel}):this._overlays.forEach(function(t){t.sort(function(t,e){return t.zLevel-e.zLevel})})},t.prototype.addOverlays=function(t,e){var i=this,n=[],r=t.map(function(t,r){if(K(t.id)){var o,a,s,l,u,c,h,d=null;try{for(var p=S(i._overlays),g=p.next();!g.done;g=p.next()){var v=E(g.value,2)[1].find(function(e){return e.id===t.id});if(K(v)){d=v;break}}}catch(t){a={error:t}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}if(K(d))return t.id}var f=null!==(o=tK[t.name])&&void 0!==o?o:null;if(K(f)){var m=null!==(l=t.id)&&void 0!==l?l:tm("overlay_"),v=new f;t.id=m,null!==(u=t.groupId)&&void 0!==u||(t.groupId=m),v.override(t);var y=v.paneId;return n.includes(y)||n.push(y),v.isDrawing()?i._progressOverlayInfo={paneId:y,overlay:v,appointPaneFlag:e[r]}:(i._overlays.has(y)||i._overlays.set(y,[]),null===(c=i._overlays.get(y))||void 0===c||c.push(v)),v.isStart()&&(null===(h=v.onDrawStart)||void 0===h||h.call(v,{overlay:v,chart:i._chart})),m}return null});return n.length>0&&(this._sortOverlays(),n.forEach(function(t){i._chart.updatePane(1,t)}),this._chart.updatePane(1,tZ.X_AXIS)),r},t.prototype.getProgressOverlayInfo=function(){return this._progressOverlayInfo},t.prototype.progressOverlayComplete=function(){var t;if(null!==this._progressOverlayInfo){var e=this._progressOverlayInfo,i=e.overlay,n=e.paneId;i.isDrawing()||(this._overlays.has(n)||this._overlays.set(n,[]),null===(t=this._overlays.get(n))||void 0===t||t.push(i),this._sortOverlays(n),this._progressOverlayInfo=null)}},t.prototype.updateProgressOverlayInfo=function(t,e){null!==this._progressOverlayInfo&&(U(e)&&e&&(this._progressOverlayInfo.appointPaneFlag=e),this._progressOverlayInfo.paneId=t,this._progressOverlayInfo.overlay.override({paneId:t}))},t.prototype.overrideOverlay=function(t){var e=this,i=!1,n=[];return this.getOverlaysByFilter(t).forEach(function(e,r){e.forEach(function(e){e.override(t);var o=e.shouldUpdate(),a=o.sort,s=o.draw;a&&(i=!0),(a||s)&&!n.includes(r)&&n.push(r)})}),i&&this._sortOverlays(),n.length>0&&(n.forEach(function(t){e._chart.updatePane(1,t)}),this._chart.updatePane(1,tZ.X_AXIS),!0)},t.prototype.removeOverlay=function(t){var e=this,i=[];return this.getOverlaysByFilter(t).forEach(function(t,n){var r=e.getOverlaysByPaneId(n);t.forEach(function(t){var o;if(null===(o=t.onRemoved)||void 0===o||o.call(t,{overlay:t,chart:e._chart}),i.includes(n)||i.push(n),t.isDrawing())e._progressOverlayInfo=null;else{var a=r.findIndex(function(e){return e.id===t.id});a>-1&&r.splice(a,1)}0===r.length&&e._overlays.delete(n)})}),i.length>0&&(i.forEach(function(t){e._chart.updatePane(1,t)}),this._chart.updatePane(1,tZ.X_AXIS),!0)},t.prototype.setPressedOverlayInfo=function(t){this._pressedOverlayInfo=t},t.prototype.getPressedOverlayInfo=function(){return this._pressedOverlayInfo},t.prototype.setHoverOverlayInfo=function(t,e){var i=this._hoverOverlayInfo,n=i.overlay,r=i.figureType,o=i.figureKey,a=i.figureIndex,s=t.overlay;if(((null==n?void 0:n.id)!==(null==s?void 0:s.id)||r!==t.figureType||a!==t.figureIndex)&&(this._hoverOverlayInfo=t,(null==n?void 0:n.id)!==(null==s?void 0:s.id))){var l=!1,u=!1;null!==n&&(u=!0,X(n.onMouseLeave)&&(n.onMouseLeave(x({chart:this._chart,overlay:n,figureKey:o,figureIndex:a},e)),l=!0)),null!==s&&(u=!0,X(s.onMouseEnter)&&(s.onMouseEnter(x({chart:this._chart,overlay:s,figureKey:t.figureKey,figureIndex:t.figureIndex},e)),l=!0)),u&&this._sortOverlays(),l||this._chart.updatePane(1)}},t.prototype.getHoverOverlayInfo=function(){return this._hoverOverlayInfo},t.prototype.setClickOverlayInfo=function(t,e){var i,n,r,o,a=this._clickOverlayInfo,s=a.paneId,l=a.overlay,u=a.figureType,c=a.figureKey,h=a.figureIndex,d=t.overlay;null!==(i=null==d?void 0:d.isDrawing())&&void 0!==i&&i||null===(n=null==d?void 0:d.onClick)||void 0===n||n.call(d,x({chart:this._chart,overlay:d,figureKey:t.figureKey,figureIndex:t.figureIndex},e)),((null==l?void 0:l.id)!==(null==d?void 0:d.id)||u!==t.figureType||h!==t.figureIndex)&&(this._clickOverlayInfo=t,(null==l?void 0:l.id)!==(null==d?void 0:d.id)&&(null===(r=null==l?void 0:l.onDeselected)||void 0===r||r.call(l,x({chart:this._chart,overlay:l,figureKey:c,figureIndex:h},e)),null===(o=null==d?void 0:d.onSelected)||void 0===o||o.call(d,x({chart:this._chart,overlay:d,figureKey:t.figureKey,figureIndex:t.figureIndex},e)),this._chart.updatePane(1,t.paneId),s!==t.paneId&&this._chart.updatePane(1,s),this._chart.updatePane(1,tZ.X_AXIS)))},t.prototype.getClickOverlayInfo=function(){return this._clickOverlayInfo},t.prototype.isOverlayEmpty=function(){return 0===this._overlays.size&&null===this._progressOverlayInfo},t.prototype.isOverlayDrawing=function(){var t,e;return null!==(e=null===(t=this._progressOverlayInfo)||void 0===t?void 0:t.overlay.isDrawing())&&void 0!==e&&e},t.prototype.clearData=function(){this._loadDataMore.backward=!1,this._loadDataMore.forward=!1,this._loading=!0,this._dataList=[],this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._visibleRange=tS(),this._cacheVisibleRange=tS(),this._timeTicks.clear(),this._crosshair={},this._activeTooltipIcon=null},t.prototype.getChart=function(){return this._chart},t}(),tQ={MAIN:"main",X_AXIS:"xAxis",Y_AXIS:"yAxis",SEPARATOR:"separator"},t$=function(){function t(t,e){var i=this;this._supportedDevicePixelContentBox=!1,this._width=0,this._height=0,this._pixelWidth=0,this._pixelHeight=0,this._nextPixelWidth=0,this._nextPixelHeight=0,this._requestAnimationId=-1,this._mediaQueryListener=function(){var t=ti(i._element);i._nextPixelWidth=Math.round(i._element.clientWidth*t),i._nextPixelHeight=Math.round(i._element.clientHeight*t),i._resetPixelRatio()},this._listener=e,this._element=ty("canvas",t),this._ctx=this._element.getContext("2d"),(function(){return C(this,void 0,void 0,function(){return w(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){var e=new ResizeObserver(function(i){t(i.every(function(t){return"devicePixelContentBoxSize"in t})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})];case 1:return[2,t.sent()]}})})})().then(function(t){i._supportedDevicePixelContentBox=t,t?(i._resizeObserver=new ResizeObserver(function(t){var e=t.find(function(t){return t.target===i._element}),n=null==e?void 0:e.devicePixelContentBoxSize[0];K(n)&&(i._nextPixelWidth=n.inlineSize,i._nextPixelHeight=n.blockSize,(i._pixelWidth!==i._nextPixelWidth||i._pixelHeight!==i._nextPixelHeight)&&i._resetPixelRatio())}),i._resizeObserver.observe(i._element,{box:"device-pixel-content-box"})):(i._mediaQueryList=window.matchMedia("(resolution: ".concat(ti(i._element),"dppx)")),i._mediaQueryList.addListener(i._mediaQueryListener))}).catch(function(t){return!1})}return t.prototype._resetPixelRatio=function(){var t=this;this._executeListener(function(){var e=t._element.clientWidth,i=t._element.clientHeight;t._width=e,t._height=i,t._pixelWidth=t._nextPixelWidth,t._pixelHeight=t._nextPixelHeight,t._element.width=t._nextPixelWidth,t._element.height=t._nextPixelHeight;var n=t._nextPixelWidth/e,r=t._nextPixelHeight/i;t._ctx.scale(n,r)})},t.prototype._executeListener=function(t){var e=this;-1===this._requestAnimationId&&(this._requestAnimationId=th(function(){e._ctx.clearRect(0,0,e._width,e._height),null==t||t(),e._listener(),e._requestAnimationId=-1}))},t.prototype.update=function(t,e){if(this._width!==t||this._height!==e){if(this._element.style.width="".concat(t,"px"),this._element.style.height="".concat(e,"px"),!this._supportedDevicePixelContentBox){var i=ti(this._element);this._nextPixelWidth=Math.round(t*i),this._nextPixelHeight=Math.round(e*i),this._resetPixelRatio()}}else this._executeListener()},t.prototype.getElement=function(){return this._element},t.prototype.getContext=function(){return this._ctx},t.prototype.destroy=function(){K(this._resizeObserver)&&this._resizeObserver.unobserve(this._element),K(this._mediaQueryList)&&this._mediaQueryList.removeListener(this._mediaQueryListener)},t}(),t0=function(t){function e(e,i){var n=t.call(this)||this;return n._bounding=tc(),n._pane=i,n._rootContainer=e,n._container=n.createContainer(),e.appendChild(n._container),n}return _(e,t),e.prototype.setBounding=function(t){return W(this._bounding,t),this},e.prototype.getContainer=function(){return this._container},e.prototype.getBounding=function(){return this._bounding},e.prototype.getPane=function(){return this._pane},e.prototype.update=function(t){this.updateImp(this._container,this._bounding,null!=t?t:3)},e.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},e}(tN),t1=function(t){function e(e,i){var n=t.call(this,e,i)||this;n._mainCanvas=new t$({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){n.updateMain(n._mainCanvas.getContext())}),n._overlayCanvas=new t$({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){n.updateOverlay(n._overlayCanvas.getContext())});var r=n.getContainer();return r.appendChild(n._mainCanvas.getElement()),r.appendChild(n._overlayCanvas.getElement()),n}return _(e,t),e.prototype.createContainer=function(){return ty("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box",zIndex:"1"})},e.prototype.updateImp=function(t,e,i){var n=e.width,r=e.height,o=e.left;t.style.left="".concat(o,"px");var a=i,s=t.clientWidth,l=t.clientHeight;switch((n!==s||r!==l)&&(t.style.width="".concat(n,"px"),t.style.height="".concat(r,"px"),a=3),a){case 0:this._mainCanvas.update(n,r);break;case 1:this._overlayCanvas.update(n,r);break;case 3:case 4:this._mainCanvas.update(n,r),this._overlayCanvas.update(n,r)}},e.prototype.destroy=function(){this._mainCanvas.destroy(),this._overlayCanvas.destroy()},e.prototype.getImage=function(t){var e=this.getBounding(),i=e.width,n=e.height,r=ty("canvas",{width:"".concat(i,"px"),height:"".concat(n,"px"),boxSizing:"border-box"}),o=r.getContext("2d"),a=ti(r);return r.width=i*a,r.height=n*a,o.scale(a,a),o.drawImage(this._mainCanvas.getElement(),0,0,i,n),t&&o.drawImage(this._overlayCanvas.getElement(),0,0,i,n),r},e}(t0);function t2(t){return"transparent"===t||"none"===t||/^[rR][gG][Bb][Aa]\(([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){3}[\s]*0[\s]*\)$/.test(t)||/^[hH][Ss][Ll][Aa]\(([\s]*(360｜3[0-5][0-9]|[012]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*0[\s]*)\)$/.test(t)}function t3(t,e,i){var o,a=[];a=a.concat(e);var s=i.style,l=void 0===s?r.Fill:s,u=i.color,c=void 0===u?"transparent":u,h=i.borderSize,d=void 0===h?1:h,p=i.borderColor,g=void 0===p?"transparent":p,v=i.borderStyle,f=void 0===v?n.Solid:v,m=i.borderRadius,y=void 0===m?0:m,_=i.borderDashedValue,x=null!==(o=t.roundRect)&&void 0!==o?o:t.rect,b=(l===r.Fill||i.style===r.StrokeFill)&&(!Z(c)||!t2(c));if(b&&(t.fillStyle=c,a.forEach(function(e){var i=e.x,n=e.y,r=e.width,o=e.height;t.beginPath(),x.call(t,i,n,r,o,y),t.closePath(),t.fill()})),(l===r.Stroke||i.style===r.StrokeFill)&&d>0&&!t2(g)){t.strokeStyle=g,t.fillStyle=g,t.lineWidth=d,f===n.Dashed?t.setLineDash(void 0===_?[2,2]:_):t.setLineDash([]);var C=d%2==1?.5:0,w=Math.round(2*C);a.forEach(function(e){var i=e.x,n=e.y,r=e.width,o=e.height;r>2*d&&o>2*d?(t.beginPath(),x.call(t,i+C,n+C,r-w,o-w,y),t.closePath(),t.stroke()):b||t.fillRect(i,n,r,o)})}}function t4(t,e){var i=e.size,n=void 0===i?12:i,r=e.paddingLeft,o=e.paddingTop,a=e.paddingRight,s=e.paddingBottom,l=e.weight,u=e.family,c=t.x,h=t.y,d=t.text,p=t.align,g=t.baseline,v=t.width,f=t.height,m=null!=v?v:(void 0===r?0:r)+tr(d,n,void 0===l?"normal":l,u)+(void 0===a?0:a),y=null!=f?f:(void 0===o?0:o)+n+(void 0===s?0:s),_=0;switch(void 0===p?"left":p){case"left":case"start":_=c;break;case"right":case"end":_=c-m;break;default:_=c-m/2}var x=0;switch(void 0===g?"top":g){case"top":case"hanging":x=h;break;case"bottom":case"ideographic":case"alphabetic":x=h-y;break;default:x=h-y/2}return{x:_,y:x,width:m,height:y}}var t5={};[{name:"circle",checkEventOn:function(t,e){var i,n,r=[];r=r.concat(e);try{for(var o=S(r),a=o.next();!a.done;a=o.next()){var s=a.value,l=s.x,u=s.y,c=s.r,h=t.x-l,d=t.y-u;if(!(h*h+d*d>c*c))return!0}}catch(t){i={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return!1},draw:function(t,e,i){var o,a,s,l,u,c,h,d,p,g,v,f,m;o=(o=[]).concat(e),s=void 0===(a=i.style)?r.Fill:a,u=void 0===(l=i.color)?"currentColor":l,h=void 0===(c=i.borderSize)?1:c,p=void 0===(d=i.borderColor)?"currentColor":d,v=void 0===(g=i.borderStyle)?n.Solid:g,f=i.borderDashedValue,(m=(s===r.Fill||i.style===r.StrokeFill)&&(!Z(u)||!t2(u)))&&(t.fillStyle=u,o.forEach(function(e){var i=e.x,n=e.y,r=e.r;t.beginPath(),t.arc(i,n,r,0,2*Math.PI),t.closePath(),t.fill()})),(s===r.Stroke||i.style===r.StrokeFill)&&h>0&&!t2(p)&&(t.strokeStyle=p,t.lineWidth=h,v===n.Dashed?t.setLineDash(void 0===f?[2,2]:f):t.setLineDash([]),o.forEach(function(e){var i=e.x,n=e.y,r=e.r;(!m||r>h)&&(t.beginPath(),t.arc(i,n,r,0,2*Math.PI),t.closePath(),t.stroke())}))}},{name:"line",checkEventOn:function(t,e){var i,n,r=[];r=r.concat(e);try{for(var o=S(r),a=o.next();!a.done;a=o.next()){var s=a.value.coordinates;if(s.length>1)for(var l=1;l<s.length;l++){var u=s[l-1],c=s[l];if(u.x===c.x){if(Math.abs(u.y-t.y)+Math.abs(c.y-t.y)-Math.abs(u.y-c.y)<4&&2>Math.abs(t.x-u.x))return!0}else{var h=tz(u,c),d=tW(h,t),p=Math.abs(d-t.y);if(Math.abs(u.x-t.x)+Math.abs(c.x-t.x)-Math.abs(u.x-c.x)<4&&p*p/(h[0]*h[0]+1)<4)return!0}}}}catch(t){i={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return!1},draw:function(t,e,i){var r,o,a,s,l,u,c,h,d,p;r=(r=[]).concat(e),a=void 0===(o=i.style)?n.Solid:o,l=void 0!==(s=i.smooth)&&s,c=void 0===(u=i.size)?1:u,h=i.color,d=i.dashedValue,t.lineWidth=c,t.strokeStyle=void 0===h?"currentColor":h,a===n.Dashed?t.setLineDash(void 0===d?[2,2]:d):t.setLineDash([]),p=c%2==1?.5:0,r.forEach(function(e){var i=e.coordinates;i.length>1&&(2===i.length&&(i[0].x===i[1].x||i[0].y===i[1].y)?(t.beginPath(),i[0].x===i[1].x?(t.moveTo(i[0].x+p,i[0].y),t.lineTo(i[1].x+p,i[1].y)):(t.moveTo(i[0].x,i[0].y+p),t.lineTo(i[1].x,i[1].y+p)),t.stroke(),t.closePath()):(t.save(),c%2==1&&t.translate(.5,.5),t.beginPath(),t.moveTo(i[0].x,i[0].y),tY(t,i,l),t.stroke(),t.closePath(),t.restore()))})}},{name:"polygon",checkEventOn:function(t,e){var i,n,r=[];r=r.concat(e);try{for(var o=S(r),a=o.next();!a.done;a=o.next()){for(var s=a.value,l=!1,u=s.coordinates,c=0,h=u.length-1;c<u.length;h=c++)u[c].y>t.y!=u[h].y>t.y&&t.x<(u[h].x-u[c].x)*(t.y-u[c].y)/(u[h].y-u[c].y)+u[c].x&&(l=!l);if(l)return!0}}catch(t){i={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return!1},draw:function(t,e,i){var o,a,s,l,u,c,h,d,p,g,v,f;o=(o=[]).concat(e),s=void 0===(a=i.style)?r.Fill:a,u=void 0===(l=i.color)?"currentColor":l,h=void 0===(c=i.borderSize)?1:c,p=void 0===(d=i.borderColor)?"currentColor":d,v=void 0===(g=i.borderStyle)?n.Solid:g,f=i.borderDashedValue,s!==r.Fill&&i.style!==r.StrokeFill||Z(u)&&t2(u)||(t.fillStyle=u,o.forEach(function(e){var i=e.coordinates;t.beginPath(),t.moveTo(i[0].x,i[0].y);for(var n=1;n<i.length;n++)t.lineTo(i[n].x,i[n].y);t.closePath(),t.fill()})),(s===r.Stroke||i.style===r.StrokeFill)&&h>0&&!t2(p)&&(t.strokeStyle=p,t.lineWidth=h,v===n.Dashed?t.setLineDash(void 0===f?[2,2]:f):t.setLineDash([]),o.forEach(function(e){var i=e.coordinates;t.beginPath(),t.moveTo(i[0].x,i[0].y);for(var n=1;n<i.length;n++)t.lineTo(i[n].x,i[n].y);t.closePath(),t.stroke()}))}},{name:"rect",checkEventOn:function(t,e){var i,n,r=[];r=r.concat(e);try{for(var o=S(r),a=o.next();!a.done;a=o.next()){var s=a.value,l=s.x,u=s.width;u<4&&(l-=2,u=4);var c=s.y,h=s.height;if(h<4&&(c-=2,h=4),t.x>=l&&t.x<=l+u&&t.y>=c&&t.y<=c+h)return!0}}catch(t){i={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return!1},draw:function(t,e,i){t3(t,e,i)}},{name:"text",checkEventOn:function(t,e,i){var n,r,o=[];o=o.concat(e);try{for(var a=S(o),s=a.next();!s.done;s=a.next()){var l=s.value,u=t4(l,i),c=u.x,h=u.y,d=u.width,p=u.height;if(t.x>=c&&t.x<=c+d&&t.y>=h&&t.y<=h+p)return!0}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return!1},draw:function(t,e,i){var n,r,o,a,s,l,u,c,h,d,p,g;n=(n=[]).concat(e),r=i.color,o=i.size,a=i.family,s=i.weight,u=void 0===(l=i.paddingLeft)?0:l,h=void 0===(c=i.paddingTop)?0:c,p=void 0===(d=i.paddingRight)?0:d,t3(t,g=n.map(function(t){return t4(t,i)}),x(x({},i),{color:i.backgroundColor})),t.textAlign="left",t.textBaseline="top",t.font=tn(void 0===o?12:o,s,a),t.fillStyle=void 0===r?"currentColor":r,n.forEach(function(e,i){var n=g[i];t.fillText(e.text,n.x+u,n.y+h,n.width-u-p)})}},{name:"arc",checkEventOn:function(t,e){var i,n,r=[];r=r.concat(e);try{for(var o=S(r),a=o.next();!a.done;a=o.next()){var s=a.value;if(2>Math.abs(function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}(t,s)-s.r)){var l=s.r,u=s.startAngle,c=s.endAngle,h=l*Math.cos(u)+s.x,d=l*Math.sin(u)+s.y,p=l*Math.cos(c)+s.x,g=l*Math.sin(c)+s.y;if(t.x<=Math.max(h,p)+2&&t.x>=Math.min(h,p)-2&&t.y<=Math.max(d,g)+2&&t.y>=Math.min(d,g)-2)return!0}}}catch(t){i={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return!1},draw:function(t,e,i){var r,o,a,s,l,u;r=(r=[]).concat(e),a=void 0===(o=i.style)?n.Solid:o,s=i.size,l=i.color,u=i.dashedValue,t.lineWidth=void 0===s?1:s,t.strokeStyle=void 0===l?"currentColor":l,a===n.Dashed?t.setLineDash(void 0===u?[2,2]:u):t.setLineDash([]),r.forEach(function(e){var i=e.x,n=e.y,r=e.r,o=e.startAngle,a=e.endAngle;t.beginPath(),t.arc(i,n,r,o,a),t.stroke(),t.closePath()})}}].forEach(function(t){t5[t.name]=tV.extend(t)});var t6=function(t){function e(e){var i=t.call(this)||this;return i._widget=e,i}return _(e,t),e.prototype.getWidget=function(){return this._widget},e.prototype.createFigure=function(t,e){var i,n=null!==(i=t5[t.name])&&void 0!==i?i:null;if(null!==n){var r=new n(t);if(K(e)){for(var o in e)e.hasOwnProperty(o)&&r.registerEvent(o,e[o]);this.addChild(r)}return r}return null},e.prototype.draw=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.clear(),this.drawImp(t,e)},e}(tN),t8=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.drawImp=function(t){var e,i,n=this.getWidget(),r=this.getWidget().getPane(),o=r.getChart(),a=n.getBounding(),s=o.getStyles().grid;if(s.show){t.save(),t.globalCompositeOperation="destination-over";var l=s.horizontal;if(l.show){var u=r.getAxisComponent().getTicks().map(function(t){return{coordinates:[{x:0,y:t.coord},{x:a.width,y:t.coord}]}});null===(e=this.createFigure({name:"line",attrs:u,styles:l}))||void 0===e||e.draw(t)}var c=s.vertical;if(c.show){var u=o.getXAxisPane().getAxisComponent().getTicks().map(function(t){return{coordinates:[{x:t.coord,y:0},{x:t.coord,y:a.height}]}});null===(i=this.createFigure({name:"line",attrs:u,styles:c}))||void 0===i||i.draw(t)}t.restore()}},e}(t6),t9=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.eachChildren=function(t){for(var e=this.getWidget().getPane().getChart().getChartStore(),i=e.getVisibleRangeDataList(),n=e.getBarSpace(),r=i.length,o=0;o<r;)t(i[o],n,o),++o},e}(t6),t7=function(t){function e(){var e=t.apply(this,I([],E(arguments),!1))||this;return e._boundCandleBarClickEvent=function(t){return function(){return e.getWidget().getPane().getChart().executeAction(c.OnCandleBarClick,t),!1}},e}return _(e,t),e.prototype.drawImp=function(t){var e=this,i=this.getWidget().getPane(),n=i.getId()===tZ.CANDLE,r=i.getChart().getChartStore(),o=this.getCandleBarOptions();if(null!==o){var a=0,s=0;o.type===u.Ohlc&&((a=Math.min(Math.max(Math.round(.2*r.getBarSpace().gapBar),1),8))>2&&a%2==1&&a--,s=Math.floor(s/2));var l=i.getAxisComponent();this.eachChildren(function(i,r){var c=i.data,h=i.x;if(K(c)){var d=c.open,p=c.high,g=c.low,v=c.close,f=o.type,m=o.styles,y=[];v>d?(y[0]=m.upColor,y[1]=m.upBorderColor,y[2]=m.upWickColor):v<d?(y[0]=m.downColor,y[1]=m.downBorderColor,y[2]=m.downWickColor):(y[0]=m.noChangeColor,y[1]=m.noChangeBorderColor,y[2]=m.noChangeWickColor);var _=l.convertToPixel(d),x=l.convertToPixel(v),b=[_,x,l.convertToPixel(p),l.convertToPixel(g)];b.sort(function(t,e){return t-e});var C=r.gapBar%2==0?1:0,w=[];switch(f){case u.CandleSolid:w=e._createSolidBar(h,b,r,y,C);break;case u.CandleStroke:w=e._createStrokeBar(h,b,r,y,C);break;case u.CandleUpStroke:w=v>d?e._createStrokeBar(h,b,r,y,C):e._createSolidBar(h,b,r,y,C);break;case u.CandleDownStroke:w=d>v?e._createStrokeBar(h,b,r,y,C):e._createSolidBar(h,b,r,y,C);break;case u.Ohlc:w=[{name:"rect",attrs:[{x:h-s,y:b[0],width:a,height:b[3]-b[0]},{x:h-r.halfGapBar,y:_+a>b[3]?b[3]-a:_,width:r.halfGapBar,height:a},{x:h+s,y:x+a>b[3]?b[3]-a:x,width:r.halfGapBar-s,height:a}],styles:{color:y[0]}}]}w.forEach(function(r){var o,a=null;n&&(a={mouseClickEvent:e._boundCandleBarClickEvent(i)}),null===(o=e.createFigure(r,null!=a?a:void 0))||void 0===o||o.draw(t)})}})}},e.prototype.getCandleBarOptions=function(){var t=this.getWidget().getPane().getChart().getStyles().candle;return{type:t.type,styles:t.bar}},e.prototype._createSolidBar=function(t,e,i,n,o){return[{name:"rect",attrs:{x:t,y:e[0],width:1,height:e[3]-e[0]},styles:{color:n[2]}},{name:"rect",attrs:{x:t-i.halfGapBar,y:e[1],width:i.gapBar+o,height:Math.max(1,e[2]-e[1])},styles:{style:r.StrokeFill,color:n[0],borderColor:n[1]}}]},e.prototype._createStrokeBar=function(t,e,i,n,o){return[{name:"rect",attrs:[{x:t,y:e[0],width:1,height:e[1]-e[0]},{x:t,y:e[2],width:1,height:e[3]-e[2]}],styles:{color:n[2]}},{name:"rect",attrs:{x:t-i.halfGapBar,y:e[1],width:i.gapBar+o,height:Math.max(1,e[2]-e[1])},styles:{style:r.Stroke,borderColor:n[1]}}]},e}(t9),et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getCandleBarOptions=function(){var t,e,i=this.getWidget().getPane();if(!i.getAxisComponent().isInCandle()){var n=i.getChart().getChartStore(),r=n.getIndicatorsByPaneId(i.getId());try{for(var o=S(r),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.shouldOhlc&&s.visible){var l=s.styles,c=n.getStyles().indicator,h=J(l,"ohlc.upColor",c.ohlc.upColor),d=J(l,"ohlc.downColor",c.ohlc.downColor),p=J(l,"ohlc.noChangeColor",c.ohlc.noChangeColor);return{type:u.Ohlc,styles:{upColor:h,downColor:d,noChangeColor:p,upBorderColor:h,downBorderColor:d,noChangeBorderColor:p,upWickColor:h,downWickColor:d,noChangeWickColor:p}}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}}return null},e.prototype.drawImp=function(e){var i=this;t.prototype.drawImp.call(this,e);var n=this.getWidget(),r=n.getPane(),o=r.getChart(),a=n.getBounding(),s=o.getXAxisPane().getAxisComponent(),l=r.getAxisComponent(),u=o.getChartStore(),c=u.getIndicatorsByPaneId(r.getId()),h=u.getStyles().indicator;e.save(),c.forEach(function(t){if(t.visible){t.zLevel<0?e.globalCompositeOperation="destination-over":e.globalCompositeOperation="source-over";var n=!1;if(null!==t.draw&&(e.save(),n=t.draw({ctx:e,chart:o,indicator:t,bounding:a,xAxis:s,yAxis:l}),e.restore()),!n){var r=t.result,u=[];i.eachChildren(function(n,o){var c,d,p,g=o.halfGapBar,v=n.dataIndex,f=n.x,m=s.convertToPixel(v-1),y=s.convertToPixel(v+1),_=null!==(c=r[v-1])&&void 0!==c?c:null,x=null!==(d=r[v])&&void 0!==d?d:null,b=null!==(p=r[v+1])&&void 0!==p?p:null,C={x:m},w={x:f},S={x:y};t.figures.forEach(function(t){var e=t.key,i=null==_?void 0:_[e];G(i)&&(C[e]=l.convertToPixel(i));var n=null==x?void 0:x[e];G(n)&&(w[e]=l.convertToPixel(n));var r=null==b?void 0:b[e];G(r)&&(S[e]=l.convertToPixel(r))}),ta(t,v,h,function(t,n,r){var c,h,d;if(K(null==x?void 0:x[t.key])){var p=w[t.key],v=null===(c=t.attrs)||void 0===c?void 0:c.call(t,{data:{prev:_,current:x,next:b},coordinate:{prev:C,current:w,next:S},bounding:a,barSpace:o,xAxis:s,yAxis:l});if(!K(v))switch(t.type){case"circle":v={x:f,y:p,r:Math.max(1,g)};break;case"rect":case"bar":var m=null!==(h=t.baseValue)&&void 0!==h?h:l.getRange().from,y=l.convertToPixel(m),E=Math.abs(y-p);m!==(null==x?void 0:x[t.key])&&(E=Math.max(1,E));v={x:f-g,y:p>y?y:p,width:Math.max(1,2*g),height:E};break;case"line":K(u[r])||(u[r]=[]),G(w[t.key])&&G(S[t.key])&&u[r].push({coordinates:[{x:w.x,y:w[t.key]},{x:S.x,y:S[t.key]}],styles:n})}var I=t.type;K(v)&&"line"!==I&&(null===(d=i.createFigure({name:"bar"===I?"rect":I,attrs:v,styles:n}))||void 0===d||d.draw(e))}})}),u.forEach(function(t){var n,r,o,a;if(t.length>1){for(var s=[{coordinates:[t[0].coordinates[0],t[0].coordinates[1]],styles:t[0].styles}],l=1;l<t.length;l++){var u=s[s.length-1],c=t[l],h=u.coordinates[u.coordinates.length-1];h.x===c.coordinates[0].x&&h.y===c.coordinates[0].y&&u.styles.style===c.styles.style&&u.styles.color===c.styles.color&&u.styles.size===c.styles.size&&u.styles.smooth===c.styles.smooth&&(null===(n=u.styles.dashedValue)||void 0===n?void 0:n[0])===(null===(r=c.styles.dashedValue)||void 0===r?void 0:r[0])&&(null===(o=u.styles.dashedValue)||void 0===o?void 0:o[1])===(null===(a=c.styles.dashedValue)||void 0===a?void 0:a[1])?u.coordinates.push(c.coordinates[1]):s.push({coordinates:[c.coordinates[0],c.coordinates[1]],styles:c.styles})}s.forEach(function(t){var n,r=t.coordinates,o=t.styles;null===(n=i.createFigure({name:"line",attrs:{coordinates:r},styles:o}))||void 0===n||n.draw(e)})}})}}}),e.restore()},e}(t7),ee=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.drawImp=function(t){var e=this.getWidget(),i=e.getPane(),n=e.getBounding(),r=e.getPane().getChart().getChartStore(),o=r.getCrosshair(),a=r.getStyles().crosshair;if(Z(o.paneId)&&a.show){if(o.paneId===i.getId()){var s=o.y;this._drawLine(t,[{x:0,y:s},{x:n.width,y:s}],a.horizontal)}var l=o.realX;this._drawLine(t,[{x:l,y:0},{x:l,y:n.height}],a.vertical)}},e.prototype._drawLine=function(t,e,i){var n;if(i.show){var r=i.line;r.show&&(null===(n=this.createFigure({name:"line",attrs:{coordinates:e},styles:r}))||void 0===n||n.draw(t))}},e}(t6),ei=function(t){function e(){var e=t.apply(this,I([],E(arguments),!1))||this;return e._boundIconClickEvent=function(t){return function(){return e.getWidget().getPane().getChart().getChartStore().executeAction(c.OnTooltipIconClick,x({},t)),!0}},e._boundIconMouseMoveEvent=function(t){return function(){return e.getWidget().getPane().getChart().getChartStore().setActiveTooltipIcon(x({},t)),!0}},e}return _(e,t),e.prototype.drawImp=function(t){var e=this.getWidget(),i=e.getPane().getChart().getChartStore();if(K(i.getCrosshair().kLineData)){var n=e.getBounding(),r=i.getStyles().indicator.tooltip,o=r.offsetLeft,a=r.offsetTop,s=r.offsetRight;this.drawIndicatorTooltip(t,o,a,n.width-s)}},e.prototype.drawIndicatorTooltip=function(t,e,i,n){var r=this,o=this.getWidget().getPane(),a=o.getChart().getChartStore(),s=a.getStyles().indicator.tooltip;if(this.isDrawTooltip(a.getCrosshair(),s)){var l=a.getIndicatorsByPaneId(o.getId()),u=s.text;l.forEach(function(o){var a=0,l={x:e,y:i},c=r.getIndicatorTooltipData(o),h=c.name,d=c.calcParamsText,p=c.legends,g=c.icons,v=h.length>0,f=p.length>0;if(v||f){var m=E(r.classifyTooltipIcons(g),3),y=m[0],_=m[1],x=m[2];if(a=r.drawStandardTooltipIcons(t,y,l,o.name,e,a,n),v){var b=h;d.length>0&&(b="".concat(b).concat(d)),a=r.drawStandardTooltipLegends(t,[{title:{text:"",color:u.color},value:{text:b,color:u.color}}],l,e,a,n,u)}a=r.drawStandardTooltipIcons(t,_,l,o.name,e,a,n),f&&(a=r.drawStandardTooltipLegends(t,p,l,e,a,n,s.text)),a=r.drawStandardTooltipIcons(t,x,l,o.name,e,a,n),i=l.y+a}})}return i},e.prototype.drawStandardTooltipIcons=function(t,e,i,n,r,o,a){var s=this;if(e.length>0){var l=0,u=0;e.forEach(function(e){var i=e.marginLeft,n=e.marginTop,r=e.marginRight,o=e.marginBottom,a=e.paddingLeft,s=e.paddingTop,c=e.paddingRight,h=e.paddingBottom,d=e.size,p=e.fontFamily,g=e.icon;t.font=tn(d,"normal",p),l+=(void 0===i?0:i)+(void 0===a?0:a)+t.measureText(g).width+(void 0===c?0:c)+(void 0===r?0:r),u=Math.max(u,(void 0===n?0:n)+(void 0===s?0:s)+d+(void 0===h?0:h)+(void 0===o?0:o))}),i.x+l>a?(i.x=r,i.y+=o,o=u):o=Math.max(o,u);var c=this.getWidget().getPane(),h=c.getId(),d=c.getChart().getChartStore().getActiveTooltipIcon();e.forEach(function(e){var r,o=e.marginLeft,a=void 0===o?0:o,l=e.marginTop,u=e.marginRight,c=e.paddingLeft,p=void 0===c?0:c,g=e.paddingTop,v=e.paddingRight,f=void 0===v?0:v,m=e.paddingBottom,y=e.color,_=e.activeColor,x=e.size,b=e.fontFamily,C=e.icon,w=e.backgroundColor,S=e.activeBackgroundColor,E=(null==d?void 0:d.paneId)===h&&d.indicatorName===n&&d.iconId===e.id;null===(r=s.createFigure({name:"text",attrs:{text:C,x:i.x+a,y:i.y+(void 0===l?0:l)},styles:{paddingLeft:p,paddingTop:void 0===g?0:g,paddingRight:f,paddingBottom:void 0===m?0:m,color:E?_:y,size:x,family:b,backgroundColor:E?S:w}},{mouseClickEvent:s._boundIconClickEvent({paneId:h,indicatorName:n,iconId:e.id}),mouseMoveEvent:s._boundIconMouseMoveEvent({paneId:h,indicatorName:n,iconId:e.id})}))||void 0===r||r.draw(t),i.x+=a+p+t.measureText(C).width+f+(void 0===u?0:u)})}return o},e.prototype.drawStandardTooltipLegends=function(t,e,i,n,r,o,a){var s=this;if(e.length>0){var l=a.marginLeft,u=a.marginTop,c=a.marginRight,h=a.marginBottom,d=a.size,p=a.family,g=a.weight;t.font=tn(d,g,p),e.forEach(function(e){var a,v,f=e.title,m=e.value,y=t.measureText(f.text).width,_=y+t.measureText(m.text).width,x=u+d+h;i.x+l+_+c>o?(i.x=n,i.y+=r,r=x):r=Math.max(r,x),f.text.length>0&&(null===(a=s.createFigure({name:"text",attrs:{x:i.x+l,y:i.y+u,text:f.text},styles:{color:f.color,size:d,family:p,weight:g}}))||void 0===a||a.draw(t)),null===(v=s.createFigure({name:"text",attrs:{x:i.x+l+y,y:i.y+u,text:m.text},styles:{color:m.color,size:d,family:p,weight:g}}))||void 0===v||v.draw(t),i.x+=l+_+c})}return r},e.prototype.isDrawTooltip=function(t,e){var i=e.showRule;return i===o.Always||i===o.FollowCross&&Z(t.paneId)},e.prototype.getIndicatorTooltipData=function(t){var e,i,n=this.getWidget().getPane().getChart().getChartStore(),r=n.getStyles().indicator,o=r.tooltip,a=o.showName?t.shortName:"",s="",l=t.calcParams;l.length>0&&o.showParams&&(s="(".concat(l.join(","),")"));var u={name:a,calcParamsText:s,legends:[],icons:o.icons},c=n.getCrosshair().dataIndex,h=t.result,d=n.getCustomApi(),p=n.getDecimalFold(),g=n.getThousandsSeparator(),v=[];if(t.visible){var f=null!==(i=null!==(e=h[c])&&void 0!==e?e:h[c-1])&&void 0!==i?i:{};ta(t,c,r,function(e,i){if(Z(e.title)){var n=i.color,r=f[e.key];G(r)&&(r=$(r,t.precision),t.shouldFormatBigNumber&&(r=d.formatBigNumber(r))),v.push({title:{text:e.title,color:n},value:{text:p.format(g.format(null!=r?r:o.defaultValue)),color:n}})}}),u.legends=v}if(X(t.createTooltipDataSource)){var m=this.getWidget(),y=m.getPane(),_=y.getChart(),x=t.createTooltipDataSource({chart:_,indicator:t,crosshair:n.getCrosshair(),bounding:m.getBounding(),xAxis:y.getChart().getXAxisPane().getAxisComponent(),yAxis:y.getAxisComponent()}),b=x.name,C=x.calcParamsText,w=x.legends,S=x.icons;if(Z(b)&&o.showName&&(u.name=b),Z(C)&&o.showParams&&(u.calcParamsText=C),K(S)&&(u.icons=S),K(w)&&t.visible){var E=[],I=r.tooltip.text.color;w.forEach(function(t){var e={text:"",color:I};H(t.title)?e=t.title:e.text=t.title;var i={text:"",color:I};H(t.value)?i=t.value:i.text=t.value,G(Number(i.text))&&(i.text=p.format(g.format(i.text))),E.push({title:e,value:i})}),u.legends=E}}return u},e.prototype.classifyTooltipIcons=function(t){var e=[],i=[],n=[];return t.forEach(function(t){switch(t.position){case s.Left:e.push(t);break;case s.Middle:i.push(t);break;case s.Right:n.push(t)}}),[e,i,n]},e}(t6),en=function(t){function e(e){var i=t.call(this,e)||this;return i._initEvent(),i}return _(e,t),e.prototype._initEvent=function(){var t=this,e=this.getWidget().getPane(),i=e.getId(),n=e.getChart(),r=n.getChartStore();this.registerEvent("mouseMoveEvent",function(e){var o,a=r.getProgressOverlayInfo();if(null!==a){var s=a.overlay,l=a.paneId;s.isStart()&&(r.updateProgressOverlayInfo(i),l=i);var u=s.points.length-1,c="".concat(tl,"point_").concat(u);return s.isDrawing()&&l===i&&(s.eventMoveForDrawing(t._coordinateToPoint(s,e)),null===(o=s.onDrawing)||void 0===o||o.call(s,x({chart:n,overlay:s,figureKey:c,figureIndex:u},e))),t._figureMouseMoveEvent(s,1,c,u,0)(e)}return r.setHoverOverlayInfo({paneId:i,overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},e),!1}).registerEvent("mouseClickEvent",function(e){var o,a,s=r.getProgressOverlayInfo();if(null!==s){var l=s.overlay,u=s.paneId;l.isStart()&&(r.updateProgressOverlayInfo(i,!0),u=i);var c=l.points.length-1,h="".concat(tl,"point_").concat(c);return l.isDrawing()&&u===i&&(l.eventMoveForDrawing(t._coordinateToPoint(l,e)),null===(o=l.onDrawing)||void 0===o||o.call(l,x({chart:n,overlay:l,figureKey:h,figureIndex:c},e)),l.nextStep(),l.isDrawing()||(r.progressOverlayComplete(),null===(a=l.onDrawEnd)||void 0===a||a.call(l,x({chart:n,overlay:l,figureKey:h,figureIndex:c},e)))),t._figureMouseClickEvent(l,1,h,c,0)(e)}return r.setClickOverlayInfo({paneId:i,overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},e),!1}).registerEvent("mouseDoubleClickEvent",function(e){var o,a=r.getProgressOverlayInfo();if(null!==a){var s=a.overlay,l=a.paneId;if(s.isDrawing()&&l===i&&(s.forceComplete(),!s.isDrawing())){r.progressOverlayComplete();var u=s.points.length-1,c="".concat(tl,"point_").concat(u);null===(o=s.onDrawEnd)||void 0===o||o.call(s,x({chart:n,overlay:s,figureKey:c,figureIndex:u},e))}var h=s.points.length-1;return t._figureMouseClickEvent(s,1,"".concat(tl,"point_").concat(h),h,0)(e)}return!1}).registerEvent("mouseRightClickEvent",function(e){var i=r.getProgressOverlayInfo();if(null!==i){var n=i.overlay;if(n.isDrawing()){var o=n.points.length-1;return t._figureMouseRightClickEvent(n,1,"".concat(tl,"point_").concat(o),o,0)(e)}}return!1}).registerEvent("mouseUpEvent",function(t){var e,o=r.getPressedOverlayInfo(),a=o.overlay,s=o.figureIndex,l=o.figureKey;return null!==a&&(null===(e=a.onPressedMoveEnd)||void 0===e||e.call(a,x({chart:n,overlay:a,figureKey:l,figureIndex:s},t))),r.setPressedOverlayInfo({paneId:i,overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1}),!1}).registerEvent("pressedMouseMoveEvent",function(e){var i,o,a=r.getPressedOverlayInfo(),s=a.overlay,l=a.figureType,u=a.figureIndex,c=a.figureKey;if(null!==s){if(!s.lock&&!(null!==(o=null===(i=s.onPressedMoving)||void 0===i?void 0:i.call(s,x({chart:n,overlay:s,figureIndex:u,figureKey:c},e)))&&void 0!==o&&o)){var h=t._coordinateToPoint(s,e);1===l?s.eventPressedPointMove(h,u):s.eventPressedOtherMove(h,t.getWidget().getPane().getChart().getChartStore())}return!0}return!1})},e.prototype._createFigureEvents=function(t,e,i,n,r,o){var a=null;if(!t.isDrawing()){var s=[];if(K(o)&&(U(o)?o&&(s=["mouseClickEvent","mouseDoubleClickEvent","mouseRightClickEvent","tapEvent","doubleTapEvent","mouseDownEvent","touchStartEvent","mouseMoveEvent","touchMoveEvent"]):s=o),0===s.length)return{mouseMoveEvent:this._figureMouseMoveEvent(t,e,i,n,r),mouseDownEvent:this._figureMouseDownEvent(t,e,i,n,r),mouseClickEvent:this._figureMouseClickEvent(t,e,i,n,r),mouseRightClickEvent:this._figureMouseRightClickEvent(t,e,i,n,r),mouseDoubleClickEvent:this._figureMouseDoubleClickEvent(t,e,i,n,r)};a={},s.includes("mouseMoveEvent")||s.includes("touchMoveEvent")||(a.mouseMoveEvent=this._figureMouseMoveEvent(t,e,i,n,r)),s.includes("mouseDownEvent")||s.includes("touchStartEvent")||(a.mouseDownEvent=this._figureMouseDownEvent(t,e,i,n,r)),s.includes("mouseClickEvent")||s.includes("tapEvent")||(a.mouseClickEvent=this._figureMouseClickEvent(t,e,i,n,r)),s.includes("mouseDoubleClickEvent")||s.includes("doubleTapEvent")||(a.mouseDoubleClickEvent=this._figureMouseDoubleClickEvent(t,e,i,n,r)),s.includes("mouseRightClickEvent")||(a.mouseRightClickEvent=this._figureMouseRightClickEvent(t,e,i,n,r))}return null!=a?a:void 0},e.prototype._figureMouseMoveEvent=function(t,e,i,n,r){var o=this;return function(a){var s=o.getWidget().getPane();return s.getChart().getChartStore().setHoverOverlayInfo({paneId:s.getId(),overlay:t,figureType:e,figureKey:i,figureIndex:n,attrsIndex:r},a),!0}},e.prototype._figureMouseDownEvent=function(t,e,i,n,r){var o=this;return function(a){var s,l=o.getWidget().getPane(),u=l.getId();return t.startPressedMove(o._coordinateToPoint(t,a)),null===(s=t.onPressedMoveStart)||void 0===s||s.call(t,x({chart:l.getChart(),overlay:t,figureIndex:n,figureKey:i},a)),l.getChart().getChartStore().setPressedOverlayInfo({paneId:u,overlay:t,figureType:e,figureKey:i,figureIndex:n,attrsIndex:r}),!0}},e.prototype._figureMouseClickEvent=function(t,e,i,n,r){var o=this;return function(a){var s=o.getWidget().getPane(),l=s.getId();return s.getChart().getChartStore().setClickOverlayInfo({paneId:l,overlay:t,figureType:e,figureKey:i,figureIndex:n,attrsIndex:r},a),!0}},e.prototype._figureMouseDoubleClickEvent=function(t,e,i,n,r){var o=this;return function(e){var r;return null===(r=t.onDoubleClick)||void 0===r||r.call(t,x(x({},e),{chart:o.getWidget().getPane().getChart(),figureIndex:n,figureKey:i,overlay:t})),!0}},e.prototype._figureMouseRightClickEvent=function(t,e,i,n,r){var o=this;return function(e){var r,a;return null!==(a=null===(r=t.onRightClick)||void 0===r?void 0:r.call(t,x({chart:o.getWidget().getPane().getChart(),overlay:t,figureIndex:n,figureKey:i},e)))&&void 0!==a&&a||o.getWidget().getPane().getChart().getChartStore().removeOverlay(t),!0}},e.prototype._coordinateToPoint=function(t,e){var i,n={},r=this.getWidget().getPane(),o=r.getChart(),a=r.getId(),s=o.getChartStore();if(this.coordinateToPointTimestampDataIndexFlag()){var l=o.getXAxisPane().getAxisComponent().convertFromPixel(e.x),u=null!==(i=s.dataIndexToTimestamp(l))&&void 0!==i?i:void 0;n.dataIndex=l,n.timestamp=u}if(this.coordinateToPointValueFlag()){var c=r.getAxisComponent(),h=c.convertFromPixel(e.y);if(t.mode!==p.Normal&&a===tZ.CANDLE&&G(n.dataIndex)){var d=s.getDataByDataIndex(n.dataIndex);if(null!==d){var g=t.modeSensitivity;if(h>d.high){if(t.mode===p.WeakMagnet){var v=c.convertToPixel(d.high),f=c.convertFromPixel(v-g);h<f&&(h=d.high)}else h=d.high}else if(h<d.low){if(t.mode===p.WeakMagnet){var m=c.convertToPixel(d.low),f=c.convertFromPixel(m-g);h>f&&(h=d.low)}else h=d.low}else{var y=Math.max(d.open,d.close),_=Math.min(d.open,d.close);h=h>y?h-y<d.high-h?y:d.high:h<_?h-d.low<_-h?d.low:_:y-h<h-_?y:_}}}n.value=h}return n},e.prototype.coordinateToPointValueFlag=function(){return!0},e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.dispatchEvent=function(e,i,n){return this.getWidget().getPane().getChart().getChartStore().isOverlayDrawing()?this.onEvent(e,i,n):t.prototype.dispatchEvent.call(this,e,i,n)},e.prototype.checkEventOn=function(){return!0},e.prototype.drawImp=function(t){var e=this;this.getCompleteOverlays().forEach(function(i){i.visible&&e._drawOverlay(t,i)});var i=this.getProgressOverlay();K(i)&&i.visible&&this._drawOverlay(t,i)},e.prototype._drawOverlay=function(t,e){var i=e.points,n=this.getWidget().getPane(),r=n.getChart(),o=r.getChartStore(),a=n.getAxisComponent(),s=r.getXAxisPane().getAxisComponent(),l=i.map(function(t){var e,i=t.dataIndex;G(t.timestamp)&&(i=o.timestampToDataIndex(t.timestamp));var n={x:0,y:0};return G(i)&&(n.x=s.convertToPixel(i)),G(t.value)&&(n.y=null!==(e=null==a?void 0:a.convertToPixel(t.value))&&void 0!==e?e:0),n});if(l.length>0){var u=[].concat(this.getFigures(e,l));this.drawFigures(t,e,u)}this.drawDefaultFigures(t,e,l)},e.prototype.drawFigures=function(t,e,i){var n=this,r=this.getWidget().getPane().getChart().getStyles().overlay;i.forEach(function(i,o){var a=i.type,s=i.styles,l=i.attrs,u=i.ignoreEvent;[].concat(l).forEach(function(l,c){var h,d,p,g=n._createFigureEvents(e,2,null!==(h=i.key)&&void 0!==h?h:"",o,c,u),v=x(x(x({},r[a]),null===(d=e.styles)||void 0===d?void 0:d[a]),s);null===(p=n.createFigure({name:a,attrs:l,styles:v},g))||void 0===p||p.draw(t)})})},e.prototype.getCompleteOverlays=function(){var t=this.getWidget().getPane();return t.getChart().getChartStore().getOverlaysByPaneId(t.getId())},e.prototype.getProgressOverlay=function(){var t=this.getWidget().getPane(),e=t.getChart().getChartStore().getProgressOverlayInfo();return K(e)&&e.paneId===t.getId()?e.overlay:null},e.prototype.getFigures=function(t,e){var i,n,r=this.getWidget(),o=r.getPane(),a=o.getChart(),s=o.getAxisComponent(),l=a.getXAxisPane().getAxisComponent(),u=r.getBounding();return null!==(n=null===(i=t.createPointFigures)||void 0===i?void 0:i.call(t,{chart:a,overlay:t,coordinates:e,bounding:u,xAxis:l,yAxis:s}))&&void 0!==n?n:[]},e.prototype.drawDefaultFigures=function(t,e,i){var n,r,o=this;if(e.needDefaultPointFigure){var a=this.getWidget().getPane().getChart().getChartStore(),s=a.getHoverOverlayInfo(),l=a.getClickOverlayInfo();if((null===(n=s.overlay)||void 0===n?void 0:n.id)===e.id&&0!==s.figureType||(null===(r=l.overlay)||void 0===r?void 0:r.id)===e.id&&0!==l.figureType){var u=a.getStyles().overlay,c=e.styles,h=x(x({},u.point),null==c?void 0:c.point);i.forEach(function(i,n){var r,a,l,u=i.x,c=i.y,d=h.radius,p=h.color,g=h.borderColor,v=h.borderSize;(null===(r=s.overlay)||void 0===r?void 0:r.id)===e.id&&1===s.figureType&&s.figureIndex===n&&(d=h.activeRadius,p=h.activeColor,g=h.activeBorderColor,v=h.activeBorderSize),null===(a=o.createFigure({name:"circle",attrs:{x:u,y:c,r:d+v},styles:{color:g}},o._createFigureEvents(e,1,"".concat(tl,"point_").concat(n),n,0)))||void 0===a||a.draw(t),null===(l=o.createFigure({name:"circle",attrs:{x:u,y:c,r:d},styles:{color:p}}))||void 0===l||l.draw(t)})}}},e}(t6),er=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n._gridView=new t8(n),n._indicatorView=new et(n),n._crosshairLineView=new ee(n),n._tooltipView=n.createTooltipView(),n._overlayView=new en(n),n.addChild(n._tooltipView),n.addChild(n._overlayView),n.getContainer().style.cursor="crosshair",n.registerEvent("mouseMoveEvent",function(){return i.getChart().getChartStore().setActiveTooltipIcon(),!1}),n}return _(e,t),e.prototype.getName=function(){return tQ.MAIN},e.prototype.updateMain=function(t){"minimize"!==this.getPane().getOptions().state&&(this.updateMainContent(t),this._indicatorView.draw(t),this._gridView.draw(t))},e.prototype.createTooltipView=function(){return new ei(this)},e.prototype.updateMainContent=function(t){},e.prototype.updateOverlay=function(t){"minimize"!==this.getPane().getOptions().state&&(this._overlayView.draw(t),this._crosshairLineView.draw(t)),this._tooltipView.draw(t)},e}(t1),eo=function(t){function e(){var e=t.apply(this,I([],E(arguments),!1))||this;return e._ripplePoint=e.createFigure({name:"circle",attrs:{x:0,y:0,r:0},styles:{style:"fill"}}),e._animationFrameTime=0,e._animation=new tg({iterationCount:1/0}).doFrame(function(t){e._animationFrameTime=t;var i=e.getWidget().getPane();i.getChart().updatePane(0,i.getId())}),e}return _(e,t),e.prototype.drawImp=function(t){var e,i,n,r=this.getWidget(),o=r.getPane(),a=o.getChart(),s=a.getDataList().length-1,l=r.getBounding(),u=o.getAxisComponent(),c=a.getStyles().candle.area,h=[],d=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER,g=null;if(this.eachChildren(function(t){var e=t.data,i=t.x,n=null==e?void 0:e[c.value];if(G(n)){var r=u.convertToPixel(n);p===Number.MIN_SAFE_INTEGER&&(p=i),h.push({x:i,y:r}),d=Math.min(d,r),t.dataIndex===s&&(g={x:i,y:r})}}),h.length>0){null===(e=this.createFigure({name:"line",attrs:{coordinates:h},styles:{color:c.lineColor,size:c.lineSize,smooth:c.smooth}}))||void 0===e||e.draw(t);var v=c.backgroundColor,f="";if(Y(v)){var m=t.createLinearGradient(0,l.height,0,d);try{v.forEach(function(t){var e=t.offset,i=t.color;m.addColorStop(e,i)})}catch(t){}f=m}else f=v;t.fillStyle=f,t.beginPath(),t.moveTo(p,l.height),t.lineTo(h[0].x,h[0].y),tY(t,h,c.smooth),t.lineTo(h[h.length-1].x,l.height),t.closePath(),t.fill()}var y=c.point;if(y.show&&K(g)){null===(i=this.createFigure({name:"circle",attrs:{x:g.x,y:g.y,r:y.radius},styles:{style:"fill",color:y.color}}))||void 0===i||i.draw(t);var _=y.rippleRadius;y.animation&&(_=y.radius+this._animationFrameTime/y.animationDuration*(y.rippleRadius-y.radius),this._animation.setDuration(y.animationDuration).start()),null===(n=this._ripplePoint)||void 0===n||n.setAttrs({x:g.x,y:g.y,r:_}).setStyles({style:"fill",color:y.rippleColor}).draw(t)}else this.stopAnimation()},e.prototype.stopAnimation=function(){this._animation.stop()},e}(t9),ea=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.drawImp=function(t){var e=this.getWidget().getPane(),i=e.getChart().getChartStore(),n=i.getStyles().candle.priceMark,r=n.high,o=n.low;if(n.show&&(r.show||o.show)){var a=i.getVisibleRangeHighLowPrice(),s=i.getPrecision(),l=e.getAxisComponent(),u=a[0],c=u.price,h=u.x,d=a[1],p=d.price,g=d.x,v=l.convertToPixel(c),f=l.convertToPixel(p),m=i.getDecimalFold(),y=i.getThousandsSeparator();r.show&&c!==Number.MIN_SAFE_INTEGER&&this._drawMark(t,m.format(y.format($(c,s.price))),{x:h,y:v},v<f?[-2,-5]:[2,5],r),o.show&&p!==Number.MAX_SAFE_INTEGER&&this._drawMark(t,m.format(y.format($(p,s.price))),{x:g,y:f},v<f?[2,5]:[-2,-5],o)}},e.prototype._drawMark=function(t,e,i,n,r){var o,a,s,l=i.x,u=i.y+n[0];null===(o=this.createFigure({name:"line",attrs:{coordinates:[{x:l-2,y:u+n[0]},{x:l,y:u},{x:l+2,y:u+n[0]}]},styles:{color:r.color}}))||void 0===o||o.draw(t);var c=0,h=0,d="left";l>this.getWidget().getBounding().width/2?(h=(c=l-5)-r.textOffset,d="right"):(d="left",h=(c=l+5)+r.textOffset);var p=u+n[1];null===(a=this.createFigure({name:"line",attrs:{coordinates:[{x:l,y:u},{x:l,y:p},{x:c,y:p}]},styles:{color:r.color}}))||void 0===a||a.draw(t),null===(s=this.createFigure({name:"text",attrs:{x:h,y:p,text:e,align:d,baseline:"middle"},styles:{color:r.color,size:r.textSize,family:r.textFamily,weight:r.textWeight}}))||void 0===s||s.draw(t)},e}(t6),es=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.drawImp=function(t){var e,i=this.getWidget(),n=i.getPane(),r=i.getBounding(),o=n.getChart().getChartStore(),a=o.getStyles().candle.priceMark,s=a.last,l=s.line;if(a.show&&s.show&&l.show){var u=n.getAxisComponent(),c=o.getDataList(),h=c[c.length-1];if(K(h)){var d=h.close,p=h.open,g=u.convertToNicePixel(d),v="";v=d>p?s.upColor:d<p?s.downColor:s.noChangeColor,null===(e=this.createFigure({name:"line",attrs:{coordinates:[{x:0,y:g},{x:r.width,y:g}]},styles:{style:l.style,color:v,size:l.size,dashedValue:l.dashedValue}}))||void 0===e||e.draw(t)}}},e}(t6);function el(){return{from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0,displayFrom:0,displayTo:0,displayRange:0}}!function(t){t.Left="left",t.Right="right"}(f||(f={}));var eu=function(){function t(t){this.scrollZoomEnabled=!0,this._range=el(),this._prevRange=el(),this._ticks=[],this._autoCalcTickFlag=!0,this._parent=t}return t.prototype.getParent=function(){return this._parent},t.prototype.buildTicks=function(t){return this._autoCalcTickFlag&&(this._range=this.createRangeImp()),(this._prevRange.from!==this._range.from||this._prevRange.to!==this._range.to||!!t)&&(this._prevRange=this._range,this._ticks=this.createTicksImp(),!0)},t.prototype.getTicks=function(){return this._ticks},t.prototype.setRange=function(t){this._autoCalcTickFlag=!1,this._range=t},t.prototype.getRange=function(){return this._range},t.prototype.setAutoCalcTickFlag=function(t){this._autoCalcTickFlag=t},t.prototype.getAutoCalcTickFlag=function(){return this._autoCalcTickFlag},t}(),ec={"zh-CN":{time:"时间：",open:"开：",high:"高：",low:"低：",close:"收：",volume:"成交量：",turnover:"成交额：",change:"涨幅："},"en-US":{time:"Time: ",open:"Open: ",high:"High: ",low:"Low: ",close:"Close: ",volume:"Volume: ",turnover:"Turnover: ",change:"Change: "}},eh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.drawImp=function(t){var e=this.getWidget(),i=e.getPane().getChart().getChartStore(),n=i.getCrosshair();if(K(n.kLineData)){var r=e.getBounding(),o=i.getStyles(),s=o.candle,l=o.indicator;if(s.tooltip.showType===a.Rect&&l.tooltip.showType===a.Rect){var u=this.isDrawTooltip(n,s.tooltip),c=this.isDrawTooltip(n,l.tooltip);this._drawRectTooltip(t,u,c,s.tooltip.offsetTop)}else if(s.tooltip.showType===a.Standard&&l.tooltip.showType===a.Standard){var h=s.tooltip,d=h.offsetLeft,p=h.offsetTop,g=h.offsetRight,v=r.width-g,f=this._drawCandleStandardTooltip(t,d,p,v);this.drawIndicatorTooltip(t,d,f,v)}else if(s.tooltip.showType===a.Rect&&l.tooltip.showType===a.Standard){var m=s.tooltip,d=m.offsetLeft,p=m.offsetTop,g=m.offsetRight,v=r.width-g,y=this.drawIndicatorTooltip(t,d,p,v),u=this.isDrawTooltip(n,s.tooltip);this._drawRectTooltip(t,u,!1,y)}else{var _=s.tooltip,d=_.offsetLeft,p=_.offsetTop,g=_.offsetRight,v=r.width-g,x=this._drawCandleStandardTooltip(t,d,p,v),c=this.isDrawTooltip(n,l.tooltip);this._drawRectTooltip(t,!1,c,x)}}},e.prototype._drawCandleStandardTooltip=function(t,e,i,n){var r=this.getWidget().getPane().getChart().getChartStore(),o=r.getStyles().candle.tooltip,a=o.text,s=0,l={x:e,y:i},u=r.getCrosshair();if(this.isDrawTooltip(u,o)){var c=this._getCandleTooltipLegends(),h=E(this.classifyTooltipIcons(o.icons),3),d=h[0],p=h[1],g=h[2];s=this.drawStandardTooltipIcons(t,d,l,"",e,s,n),s=this.drawStandardTooltipIcons(t,p,l,"",e,s,n),c.length>0&&(s=this.drawStandardTooltipLegends(t,c,l,e,s,n,a)),s=this.drawStandardTooltipIcons(t,g,l,"",e,s,n)}return l.y+s},e.prototype._drawRectTooltip=function(t,e,i,n){var o,a,s=this,u=this.getWidget(),c=u.getPane(),h=c.getChart().getChartStore(),d=h.getStyles(),p=d.candle,g=d.indicator,v=p.tooltip,m=g.tooltip;if(e||i){var y=this._getCandleTooltipLegends(),_=v.offsetLeft,x=v.offsetTop,b=v.offsetRight,C=v.offsetBottom,w=v.text,S=w.marginLeft,E=w.marginRight,I=w.marginTop,T=w.marginBottom,P=w.size,k=w.weight,M=w.family,D=v.rect,A=D.position,R=D.paddingLeft,B=D.paddingRight,F=D.paddingTop,L=D.paddingBottom,O=D.offsetLeft,N=D.offsetRight,V=D.offsetTop,W=D.offsetBottom,z=D.borderSize,Y=D.borderRadius,X=D.borderColor,H=D.color,G=0,K=0,U=0;e&&(t.font=tn(P,k,M),y.forEach(function(e){var i=e.title,n=e.value,r="".concat(i.text).concat(n.text),o=t.measureText(r).width+S+E;G=Math.max(G,o)}),U+=(T+I+P)*y.length);var Z=m.text,j=Z.marginLeft,q=Z.marginRight,J=Z.marginTop,Q=Z.marginBottom,$=Z.size,tt=Z.weight,te=Z.family,ti=[];if(i){var tr=h.getIndicatorsByPaneId(c.getId());t.font=tn($,tt,te),tr.forEach(function(e){var i=s.getIndicatorTooltipData(e).legends;ti.push(i),i.forEach(function(e){var i=e.title,n=e.value,r="".concat(i.text).concat(n.text),o=t.measureText(r).width+j+q;G=Math.max(G,o),U+=J+Q+$})})}if(0!==(K+=G)&&0!==U){var to=h.getCrosshair(),ta=u.getBounding(),ts=c.getYAxisWidget().getBounding();K+=2*z+R+B,U+=2*z+F+L;var tl=ta.width/2,tu=A===l.Pointer&&to.paneId===tZ.CANDLE,tc=(null!==(o=to.realX)&&void 0!==o?o:0)>tl,th=0;if(tu){var td=to.realX;th=tc?td-N-K:td+O}else{var tp=this.getWidget().getPane().getAxisComponent();tc?(th=O+_,tp.inside&&tp.position===f.Left&&(th+=ts.width)):(th=ta.width-N-K-b,tp.inside&&tp.position===f.Right&&(th-=ts.width))}var tg=n+V;tu&&((tg=to.y-U/2)+U>ta.height-W-C&&(tg=ta.height-W-U-C),tg<n+V&&(tg=n+V+x)),null===(a=this.createFigure({name:"rect",attrs:{x:th,y:tg,width:K,height:U},styles:{style:r.StrokeFill,color:H,borderColor:X,borderSize:z,borderRadius:Y}}))||void 0===a||a.draw(t);var tv=th+z+R+S,tf=tg+z+F;if(e&&y.forEach(function(e){tf+=I;var i,n,r=e.title;null===(i=s.createFigure({name:"text",attrs:{x:tv,y:tf,text:r.text},styles:{color:r.color,size:P,family:M,weight:k}}))||void 0===i||i.draw(t);var o=e.value;null===(n=s.createFigure({name:"text",attrs:{x:th+K-z-E-B,y:tf,text:o.text,align:"right"},styles:{color:o.color,size:P,family:M,weight:k}}))||void 0===n||n.draw(t),tf+=P+T}),i){var tm=th+z+R+j;ti.forEach(function(e){e.forEach(function(e){tf+=J;var i,n,r=e.title,o=e.value;null===(i=s.createFigure({name:"text",attrs:{x:tm,y:tf,text:r.text},styles:{color:r.color,size:$,family:te,weight:tt}}))||void 0===i||i.draw(t),null===(n=s.createFigure({name:"text",attrs:{x:th+K-z-q-B,y:tf,text:o.text,align:"right"},styles:{color:o.color,size:$,family:te,weight:tt}}))||void 0===n||n.draw(t),tf+=$+Q})})}}}},e.prototype._getCandleTooltipLegends=function(){var t,e,i,n,r,o,a=this.getWidget().getPane().getChart().getChartStore(),s=a.getStyles().candle,l=a.getDataList(),u=a.getCustomApi(),c=a.getDecimalFold(),h=a.getThousandsSeparator(),d=a.getLocale(),p=a.getPrecision(),v=p.price,f=p.volume,m=null!==(t=a.getCrosshair().dataIndex)&&void 0!==t?t:0,y=s.tooltip,_=y.text.color,b=null!==(e=l[m-1])&&void 0!==e?e:null,C=l[m],w=null!==(i=null==b?void 0:b.close)&&void 0!==i?i:C.close,S=C.close-w,E={"{time}":u.formatDate(C.timestamp,"YYYY-MM-DD HH:mm",g.Tooltip),"{open}":c.format(h.format($(C.open,v))),"{high}":c.format(h.format($(C.high,v))),"{low}":c.format(h.format($(C.low,v))),"{close}":c.format(h.format($(C.close,v))),"{volume}":c.format(h.format(u.formatBigNumber($(null!==(n=C.volume)&&void 0!==n?n:y.defaultValue,f)))),"{turnover}":c.format(h.format($(null!==(r=C.turnover)&&void 0!==r?r:y.defaultValue,v))),"{change}":0===w?y.defaultValue:"".concat(h.format($(S/w*100)),"%")};return(X(y.custom)?y.custom({prev:b,current:C,next:null!==(o=l[m+1])&&void 0!==o?o:null},s):y.custom).map(function(t){var e,i,n,r=t.title,o=t.value,a={text:"",color:""};H(r)?a=x({},r):(a.text=r,a.color=_),a.text=(e=a.text,null!==(i=ec[d][e])&&void 0!==i?i:e);var l={text:y.defaultValue,color:""};H(o)?l=x({},o):(l.text=o,l.color=_);var u=/{(\S*)}/.exec(l.text);if(null!==u&&u.length>1){var c="{".concat(u[1],"}");l.text=l.text.replace(c,null!==(n=E[c])&&void 0!==n?n:y.defaultValue),"{change}"===c&&(l.color=0===S?s.priceMark.last.noChangeColor:S>0?s.priceMark.last.upColor:s.priceMark.last.downColor)}return{title:a,value:l}})},e}(ei),ed=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n._candleBarView=new t7(n),n._candleAreaView=new eo(n),n._candleHighLowPriceView=new ea(n),n._candleLastPriceLineView=new es(n),n.addChild(n._candleBarView),n}return _(e,t),e.prototype.updateMainContent=function(t){this.getPane().getChart().getStyles().candle.type!==u.Area?(this._candleBarView.draw(t),this._candleHighLowPriceView.draw(t),this._candleAreaView.stopAnimation()):this._candleAreaView.draw(t),this._candleLastPriceLineView.draw(t)},e.prototype.createTooltipView=function(){return new eh(this)},e}(er),ep=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.drawImp=function(t,e){var i,n,r=this,o=this.getWidget(),a=o.getPane(),s=o.getBounding(),l=a.getAxisComponent(),u=this.getAxisStyles(a.getChart().getStyles());if(u.show&&(u.axisLine.show&&(null===(i=this.createFigure({name:"line",attrs:this.createAxisLine(s,u),styles:u.axisLine}))||void 0===i||i.draw(t)),!e[0])){var c=l.getTicks();if(u.tickLine.show&&this.createTickLines(c,s,u).forEach(function(e){var i;null===(i=r.createFigure({name:"line",attrs:e,styles:u.tickLine}))||void 0===i||i.draw(t)}),u.tickText.show){var h=this.createTickTexts(c,s,u);null===(n=this.createFigure({name:"text",attrs:h,styles:u.tickText}))||void 0===n||n.draw(t)}}},e}(t6),eg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getAxisStyles=function(t){return t.yAxis},e.prototype.createAxisLine=function(t,e){var i=this.getWidget().getPane().getAxisComponent(),n=e.axisLine.size,r=0;return{coordinates:[{x:r=i.isFromZero()?0:t.width-n,y:0},{x:r,y:t.height}]}},e.prototype.createTickLines=function(t,e,i){var n=this.getWidget().getPane().getAxisComponent(),r=i.axisLine,o=i.tickLine,a=0,s=0;return n.isFromZero()?(a=0,r.show&&(a+=r.size),s=a+o.length):(a=e.width,r.show&&(a-=r.size),s=a-o.length),t.map(function(t){return{coordinates:[{x:a,y:t.coord},{x:s,y:t.coord}]}})},e.prototype.createTickTexts=function(t,e,i){var n=this.getWidget().getPane().getAxisComponent(),r=i.axisLine,o=i.tickLine,a=i.tickText,s=0;n.isFromZero()?(s=a.marginStart,r.show&&(s+=r.size),o.show&&(s+=o.length)):(s=e.width-a.marginEnd,r.show&&(s-=r.size),o.show&&(s-=o.length));var l=this.getWidget().getPane().getAxisComponent().isFromZero()?"left":"right";return t.map(function(t){return{x:s,y:t.coord,text:t.text,align:l,baseline:"middle"}})},e}(ep),ev=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.drawImp=function(t){var e,i=this.getWidget(),n=i.getPane(),r=i.getBounding(),o=n.getChart().getChartStore(),a=o.getStyles().candle.priceMark,s=a.last,l=s.text;if(a.show&&s.show&&l.show){var u=o.getPrecision(),c=n.getAxisComponent(),h=o.getDataList(),d=h[h.length-1];if(K(d)){var p=d.close,g=d.open,v=c.convertToNicePixel(p),f="";f=p>g?s.upColor:p<g?s.downColor:s.noChangeColor;var m=c.getRange(),y=c.displayValueToText(c.realValueToDisplayValue(c.valueToRealValue(p,{range:m}),{range:m}),u.price);y=o.getDecimalFold().format(o.getThousandsSeparator().format(y));var _=0,b="left";c.isFromZero()?(_=0,b="left"):(_=r.width,b="right"),null===(e=this.createFigure({name:"text",attrs:{x:_,y:v,text:y,align:b,baseline:"middle"},styles:x(x({},l),{backgroundColor:f})}))||void 0===e||e.draw(t)}}},e}(t6),ef=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.drawImp=function(t){var e=this,i=this.getWidget(),n=i.getPane(),r=i.getBounding(),o=n.getChart().getChartStore(),a=o.getStyles().indicator,s=a.lastValueMark,l=s.text;if(s.show){var u=n.getAxisComponent(),c=u.getRange(),h=o.getDataList().length-1,d=o.getIndicatorsByPaneId(n.getId()),p=o.getCustomApi(),g=o.getDecimalFold(),v=o.getThousandsSeparator();d.forEach(function(i){var n,o,s=i.result,d=null!==(o=null!==(n=s[h])&&void 0!==n?n:s[h-1])&&void 0!==o?o:{};if(K(d)&&i.visible){var f=i.precision;ta(i,h,a,function(n,o){var a,s=d[n.key];if(G(s)){var h=u.convertToNicePixel(s),m=u.displayValueToText(u.realValueToDisplayValue(u.valueToRealValue(s,{range:c}),{range:c}),f);i.shouldFormatBigNumber&&(m=p.formatBigNumber(m)),m=g.format(v.format(m));var y=0,_="left";u.isFromZero()?(y=0,_="left"):(y=r.width,_="right"),null===(a=e.createFigure({name:"text",attrs:{x:y,y:h,text:m,align:_,baseline:"middle"},styles:x(x({},l),{backgroundColor:o.color})}))||void 0===a||a.draw(t)}})}})}},e}(t6),em=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!1},e.prototype.drawDefaultFigures=function(t,e,i){this.drawFigures(t,e,this.getDefaultFigures(e,i))},e.prototype.getDefaultFigures=function(t,e){var i,n=this.getWidget(),r=n.getPane(),o=r.getChart().getChartStore(),a=o.getClickOverlayInfo(),s=[];if(t.needDefaultYAxisFigure&&t.id===(null===(i=a.overlay)||void 0===i?void 0:i.id)&&a.paneId===r.getId()){var l=r.getAxisComponent(),u=n.getBounding(),c=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER,d=l.isFromZero(),p="left",g=0;d?(p="left",g=0):(p="right",g=u.width);var v=o.getDecimalFold(),f=o.getThousandsSeparator();e.forEach(function(e,i){var n=t.points[i];if(G(n.value)){c=Math.min(c,e.y),h=Math.max(h,e.y);var r=v.format(f.format($(n.value,o.getPrecision().price)));s.push({type:"text",attrs:{x:g,y:e.y,text:r,align:p,baseline:"middle"},ignoreEvent:!0})}}),e.length>1&&s.unshift({type:"rect",attrs:{x:0,y:c,width:u.width,height:h-c},ignoreEvent:!0})}return s},e.prototype.getFigures=function(t,e){var i,n,r=this.getWidget(),o=r.getPane(),a=o.getChart(),s=o.getAxisComponent(),l=a.getXAxisPane().getAxisComponent(),u=r.getBounding();return null!==(n=null===(i=t.createYAxisFigures)||void 0===i?void 0:i.call(t,{chart:a,overlay:t,coordinates:e,bounding:u,xAxis:l,yAxis:s}))&&void 0!==n?n:[]},e}(en),ey=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.drawImp=function(t){var e,i=this.getWidget(),n=i.getPane(),r=i.getBounding(),o=i.getPane().getChart().getChartStore(),a=o.getCrosshair(),s=o.getStyles().crosshair;if(Z(a.paneId)&&this.compare(a,n.getId())&&s.show){var l=this.getDirectionStyles(s),u=l.text;if(l.show&&u.show){var c=n.getAxisComponent(),h=this.getText(a,o,c);t.font=tn(u.size,u.weight,u.family),null===(e=this.createFigure({name:"text",attrs:this.getTextAttrs(h,t.measureText(h).width,a,r,c,u),styles:u}))||void 0===e||e.draw(t)}}},e.prototype.compare=function(t,e){return t.paneId===e},e.prototype.getDirectionStyles=function(t){return t.horizontal},e.prototype.getText=function(t,e,i){var n=i.convertFromPixel(t.y),r=0,o=!1;i.isInCandle()?r=e.getPrecision().price:e.getIndicatorsByPaneId(t.paneId).forEach(function(t){r=Math.max(t.precision,r),o||(o=t.shouldFormatBigNumber)});var a=i.getRange(),s=i.displayValueToText(i.realValueToDisplayValue(i.valueToRealValue(n,{range:a}),{range:a}),r);return o&&(s=e.getCustomApi().formatBigNumber(s)),e.getDecimalFold().format(e.getThousandsSeparator().format(s))},e.prototype.getTextAttrs=function(t,e,i,n,r,o){var a=0,s="left";return r.isFromZero()?(a=0,s="left"):(a=n.width,s="right"),{x:a,y:i.y,text:t,align:s,baseline:"middle"}},e}(t6),e_=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n._yAxisView=new eg(n),n._candleLastPriceLabelView=new ev(n),n._indicatorLastValueView=new ef(n),n._overlayYAxisView=new em(n),n._crosshairHorizontalLabelView=new ey(n),n.getContainer().style.cursor="ns-resize",n.addChild(n._overlayYAxisView),n}return _(e,t),e.prototype.getName=function(){return tQ.Y_AXIS},e.prototype.updateMain=function(t){var e="minimize"===this.getPane().getOptions().state;this._yAxisView.draw(t,e),e||(this.getPane().getAxisComponent().isInCandle()&&this._candleLastPriceLabelView.draw(t),this._indicatorLastValueView.draw(t))},e.prototype.updateOverlay=function(t){"minimize"!==this.getPane().getOptions().state&&(this._overlayYAxisView.draw(t),this._crosshairHorizontalLabelView.draw(t))},e}(t1),ex=function(t){function e(e,i){var n=t.call(this,e)||this;return n.reverse=!1,n.inside=!1,n.position=f.Right,n.gap={top:.2,bottom:.1},n.createRange=function(t){return t.defaultRange},n.minSpan=function(t){return tw(-t)},n.valueToRealValue=function(t){return t},n.realValueToDisplayValue=function(t){return t},n.displayValueToRealValue=function(t){return t},n.realValueToValue=function(t){return t},n.displayValueToText=function(t,e){return $(t,e)},n.override(i),n}return _(e,t),e.prototype.override=function(t){var e=t.name,i=t.gap,n=b(t,["name","gap"]);Z(this.name)||(this.name=e),W(this.gap,i),W(this,n)},e.prototype.createRangeImp=function(){var t=this.getParent(),e=t.getChart(),i=e.getChartStore(),n=t.getId(),r=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,a=!1,s=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,h=i.getIndicatorsByPaneId(n);h.forEach(function(t){a||(a=t.shouldOhlc),c=Math.min(c,t.precision),G(t.minValue)&&(s=Math.min(s,t.minValue)),G(t.maxValue)&&(l=Math.max(l,t.maxValue))});var d=4,p=this.isInCandle();if(p){var g=i.getPrecision().price;d=c!==Number.MAX_SAFE_INTEGER?Math.min(c,g):g}else c!==Number.MAX_SAFE_INTEGER&&(d=c);var v=i.getVisibleRangeDataList(),f=e.getStyles().candle,m=f.type===u.Area,y=f.area.value,_=p&&!m||!p&&a;v.forEach(function(t){var e=t.dataIndex,i=t.data;if(K(i)&&(_&&(r=Math.min(r,i.low),o=Math.max(o,i.high)),p&&m)){var n=i[y];G(n)&&(r=Math.min(r,n),o=Math.max(o,n))}h.forEach(function(t){var i,n=t.result,a=t.figures,s=null!==(i=n[e])&&void 0!==i?i:{};a.forEach(function(t){var e=s[t.key];G(e)&&(r=Math.min(r,e),o=Math.max(o,e))})})}),r!==Number.MAX_SAFE_INTEGER&&o!==Number.MIN_SAFE_INTEGER?(r=Math.min(s,r),o=Math.max(l,o)):(r=0,o=10);var x=o-r,b={from:r,to:o,range:x,realFrom:r,realTo:o,realRange:x,displayFrom:r,displayTo:o,displayRange:x},C=this.createRange({chart:e,paneId:n,defaultRange:b}),w=C.realFrom,S=C.realTo,E=C.realRange,I=this.minSpan(d);if(w===S||E<I){var T=s===w,P=l===S;w=T?w:P?w-8*I:w-4*I,S=P?S:T?S+8*I:S+4*I}var k=this.getBounding().height,M=this.gap,D=M.top,A=M.bottom,R=D;R>=1&&(R/=k);var B=A;B>=1&&(B/=k),E=S-w,w-=E*B,S+=E*R;var F=this.realValueToValue(w,{range:C}),L=this.realValueToValue(S,{range:C}),O=this.realValueToDisplayValue(w,{range:C}),N=this.realValueToDisplayValue(S,{range:C});return{from:F,to:L,range:L-F,realFrom:w,realTo:S,realRange:S-w,displayFrom:O,displayTo:N,displayRange:N-O}},e.prototype.isInCandle=function(){return this.getParent().getId()===tZ.CANDLE},e.prototype.isFromZero=function(){return this.position===f.Left&&this.inside||this.position===f.Right&&!this.inside},e.prototype.createTicksImp=function(){var t,e,i=this,n=this.getRange(),r=n.displayFrom,o=n.displayTo,a=n.displayRange,s=[];if(a>=0){var l,u,c,h,d=(c=tw(u=Math.floor(tC(l=a/8))),+(l=((h=l/c)<1.5?1:h<2.5?2:h<3.5?3:h<4.5?4:h<5.5?5:h<6.5?6:8)*c).toFixed(Math.abs(u))),p=function(t){var e=t.toString(),i=e.indexOf("e");if(i>0){var n=+e.slice(i+1);return n<0?-n:0}var r=e.indexOf(".");return r<0?0:e.length-1-r}(d),g=tx(Math.ceil(r/d)*d,p),v=tx(Math.floor(o/d)*d,p),f=0,m=g;if(0!==d)for(;m<=v;){var y=m.toFixed(p);s[f]={text:y,coord:0,value:y},++f,m+=d}}var _=this.getParent(),x=null!==(e=null===(t=_.getYAxisWidget())||void 0===t?void 0:t.getBounding().height)&&void 0!==e?e:0,b=_.getChart().getChartStore(),C=[],w=b.getIndicatorsByPaneId(_.getId()),S=b.getStyles(),E=0,I=!1;this.isInCandle()?E=b.getPrecision().price:w.forEach(function(t){E=Math.max(E,t.precision),I||(I=t.shouldFormatBigNumber)});var T=b.getCustomApi(),P=b.getThousandsSeparator(),k=b.getDecimalFold(),M=S.xAxis.tickText.size,D=NaN;return(s.forEach(function(t){var e=t.value,r=i.displayValueToText(+e,E),o=i.convertToPixel(i.realValueToValue(i.displayValueToRealValue(+e,{range:n}),{range:n}));I&&(r=T.formatBigNumber(e)),r=k.format(P.format(r));var a=G(D);o>M&&o<x-M&&(a&&Math.abs(D-o)>2*M||!a)&&(C.push({text:r,coord:o,value:e}),D=o)}),X(this.createTicks))?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:C}):C},e.prototype.getAutoSize=function(){var t=this.getParent(),e=t.getChart().getChartStore(),i=e.getStyles(),n=i.yAxis,r=n.size;if("auto"!==r)return r;var o=0;if(n.show&&(n.axisLine.show&&(o+=n.axisLine.size),n.tickLine.show&&(o+=n.tickLine.length),n.tickText.show)){var a=0;this.getTicks().forEach(function(t){a=Math.max(a,tr(t.text,n.tickText.size,n.tickText.weight,n.tickText.family))}),o+=n.tickText.marginStart+n.tickText.marginEnd+a}var s=i.crosshair,l=0;if(s.show&&s.horizontal.show&&s.horizontal.text.show){var u=e.getIndicatorsByPaneId(t.getId()),c=0,h=!1;u.forEach(function(t){c=Math.max(t.precision,c),h||(h=t.shouldFormatBigNumber)});var d=2;if(this.isInCandle()){var p=e.getPrecision().price,g=i.indicator.lastValueMark;d=g.show&&g.text.show?Math.max(c,p):p}else d=c;var v=$(this.getRange().displayTo,d);h&&(v=e.getCustomApi().formatBigNumber(v)),v=e.getDecimalFold().format(v),l+=s.horizontal.text.paddingLeft+s.horizontal.text.paddingRight+2*s.horizontal.text.borderSize+tr(v,s.horizontal.text.size,s.horizontal.text.weight,s.horizontal.text.family)}return Math.max(o,l)},e.prototype.getBounding=function(){return this.getParent().getYAxisWidget().getBounding()},e.prototype.convertFromPixel=function(t){var e=this.getBounding().height,i=this.getRange(),n=i.realFrom,r=i.realRange,o=this.reverse?t/e:1-t/e;return this.realValueToValue(o*r+n,{range:i})},e.prototype.convertToPixel=function(t){var e,i,n=this.getRange(),r=this.valueToRealValue(t,{range:n}),o=null!==(i=null===(e=this.getParent().getYAxisWidget())||void 0===e?void 0:e.getBounding().height)&&void 0!==i?i:0,a=(r-n.realFrom)/n.realRange;return this.reverse?Math.round(a*o):Math.round((1-a)*o)},e.prototype.convertToNicePixel=function(t){var e,i,n=null!==(i=null===(e=this.getParent().getYAxisWidget())||void 0===e?void 0:e.getBounding().height)&&void 0!==i?i:0;return Math.round(Math.max(.05*n,Math.min(this.convertToPixel(t),.98*n)))},e.extend=function(t){return function(e){function i(i){return e.call(this,i,t)||this}return _(i,e),i}(e)},e}(eu),eb={normal:ex.extend({name:"normal"}),percentage:ex.extend({name:"percentage",minSpan:function(){return .01},displayValueToText:function(t){return"".concat($(t,2),"%")},valueToRealValue:function(t,e){var i=e.range;return(t-i.from)/i.range*i.realRange+i.realFrom},realValueToValue:function(t,e){var i=e.range;return(t-i.realFrom)/i.realRange*i.range+i.from},createRange:function(t){var e=t.chart,i=t.defaultRange,n=e.getDataList()[e.getVisibleRange().from];if(K(n)){var r=i.from,o=i.to,a=i.range,s=(i.from-n.close)/n.close*100,l=(i.to-n.close)/n.close*100,u=l-s;return{from:r,to:o,range:a,realFrom:s,realTo:l,realRange:u,displayFrom:s,displayTo:l,displayRange:u}}return i}}),logarithm:ex.extend({name:"logarithm",minSpan:function(t){return .05*tw(-t)},valueToRealValue:function(t){return t<0?-tC(Math.abs(t)):tC(t)},realValueToDisplayValue:function(t){return t<0?-tw(Math.abs(t)):tw(t)},displayValueToRealValue:function(t){return t<0?-tC(Math.abs(t)):tC(t)},realValueToValue:function(t){return t<0?-tw(Math.abs(t)):tw(t)},createRange:function(t){var e=t.defaultRange,i=e.from,n=e.to,r=e.range,o=i<0?-tC(Math.abs(i)):tC(i),a=n<0?-tC(Math.abs(n)):tC(n);return{from:i,to:n,range:r,realFrom:o,realTo:a,realRange:a-o,displayFrom:i,displayTo:n,displayRange:r}}})},eC=function(){function t(t,e,i,n){this._bounding=tc(),this._originalBounding=tc(),this._visible=!0,this._chart=i,this._id=n,this._init(t,e)}return t.prototype._init=function(t,e){this._rootContainer=t,this._container=ty("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"}),null!==e?t.insertBefore(this._container,e):t.appendChild(this._container)},t.prototype.getContainer=function(){return this._container},t.prototype.setVisible=function(t){this._visible!==t&&(this._container.style.display=t?"block":"none",this._visible=t)},t.prototype.getVisible=function(){return this._visible},t.prototype.getId=function(){return this._id},t.prototype.getChart=function(){return this._chart},t.prototype.getBounding=function(){return this._bounding},t.prototype.setOriginalBounding=function(t){W(this._originalBounding,t)},t.prototype.getOriginalBounding=function(){return this._originalBounding},t.prototype.update=function(t){this._bounding.height!==this._container.clientHeight&&(this._container.style.height="".concat(this._bounding.height,"px")),this.updateImp(null!=t?t:3,this._container,this._bounding)},t.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},t}(),ew=function(t){function e(e,i,n,r,o){var a=t.call(this,e,i,n,r)||this;a._yAxisWidget=null,a._options={id:"",minHeight:30,dragEnabled:!0,order:0,height:100,state:"normal",axis:{name:"normal",scrollZoomEnabled:!0}};var s=a.getContainer();return a._mainWidget=a.createMainWidget(s),a._yAxisWidget=a.createYAxisWidget(s),a.setOptions(o),a}return _(e,t),e.prototype.setOptions=function(t){var e,i,n,r,o,a=this.getId();if(a===tZ.CANDLE||a===tZ.X_AXIS){var s=null===(e=t.axis)||void 0===e?void 0:e.name;(!K(this._axis)||K(s)&&this._options.axis.name!==s)&&(this._axis=this.createAxisComponent(null!=s?s:"normal"))}else K(this._axis)||(this._axis=this.createAxisComponent("normal"));this._axis instanceof ex&&this._axis.setAutoCalcTickFlag(!0),W(this._options,t),this._axis.override(x(x({},this._options.axis),{name:null!==(n=null===(i=t.axis)||void 0===i?void 0:i.name)&&void 0!==n?n:"normal"}));var l=null,u="default";return this.getId()===tZ.X_AXIS?(l=this.getMainWidget().getContainer(),u="ew-resize"):(l=this.getYAxisWidget().getContainer(),u="ns-resize"),null===(o=null===(r=t.axis)||void 0===r?void 0:r.scrollZoomEnabled)||void 0===o||o?l.style.cursor=u:l.style.cursor="default",this},e.prototype.getOptions=function(){return this._options},e.prototype.getAxisComponent=function(){return this._axis},e.prototype.setBounding=function(t,e,i,n){W(this.getBounding(),t);var r,o,a,s,l={};K(t.height)&&(l.height=t.height),K(t.top)&&(l.top=t.top),this._mainWidget.setBounding(l);var u=K(e);return u&&this._mainWidget.setBounding(e),K(this._yAxisWidget)&&(this._yAxisWidget.setBounding(l),this._axis.position===f.Left?K(i)&&this._yAxisWidget.setBounding(x(x({},i),{left:0})):K(n)&&(this._yAxisWidget.setBounding(n),u&&this._yAxisWidget.setBounding({left:(null!==(r=e.left)&&void 0!==r?r:0)+(null!==(o=e.width)&&void 0!==o?o:0)+(null!==(a=e.right)&&void 0!==a?a:0)-(null!==(s=n.width)&&void 0!==s?s:0)}))),this},e.prototype.getMainWidget=function(){return this._mainWidget},e.prototype.getYAxisWidget=function(){return this._yAxisWidget},e.prototype.updateImp=function(t){var e;this._mainWidget.update(t),null===(e=this._yAxisWidget)||void 0===e||e.update(t)},e.prototype.destroy=function(){var e;t.prototype.destroy.call(this),this._mainWidget.destroy(),null===(e=this._yAxisWidget)||void 0===e||e.destroy()},e.prototype.getImage=function(t){var e=this.getBounding(),i=e.width,n=e.height,r=ty("canvas",{width:"".concat(i,"px"),height:"".concat(n,"px"),boxSizing:"border-box"}),o=r.getContext("2d"),a=ti(r);r.width=i*a,r.height=n*a,o.scale(a,a);var s=this._mainWidget.getBounding();if(o.drawImage(this._mainWidget.getImage(t),s.left,0,s.width,s.height),null!==this._yAxisWidget){var l=this._yAxisWidget.getBounding();o.drawImage(this._yAxisWidget.getImage(t),l.left,0,l.width,l.height)}return r},e.prototype.createYAxisWidget=function(t){return null},e}(eC),eS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.createAxisComponent=function(t){var e;return new(null!==(e=eb[null!=t?t:"default"])&&void 0!==e?e:eb.normal)(this)},e.prototype.createMainWidget=function(t){return new er(t,this)},e.prototype.createYAxisWidget=function(t){return new e_(t,this)},e}(ew),eE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.createMainWidget=function(t){return new ed(t,this)},e}(eS),eI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getAxisStyles=function(t){return t.xAxis},e.prototype.createAxisLine=function(t){return{coordinates:[{x:0,y:0},{x:t.width,y:0}]}},e.prototype.createTickLines=function(t,e,i){var n=i.tickLine,r=i.axisLine.size;return t.map(function(t){return{coordinates:[{x:t.coord,y:0},{x:t.coord,y:r+n.length}]}})},e.prototype.createTickTexts=function(t,e,i){var n=i.tickText,r=i.axisLine.size,o=i.tickLine.length;return t.map(function(t){return{x:t.coord,y:r+o+n.marginStart,text:t.text,align:"center",baseline:"top"}})},e}(ep),eT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.coordinateToPointValueFlag=function(){return!1},e.prototype.getCompleteOverlays=function(){return this.getWidget().getPane().getChart().getChartStore().getOverlaysByPaneId()},e.prototype.getProgressOverlay=function(){var t,e;return null!==(e=null===(t=this.getWidget().getPane().getChart().getChartStore().getProgressOverlayInfo())||void 0===t?void 0:t.overlay)&&void 0!==e?e:null},e.prototype.getDefaultFigures=function(t,e){var i,n=[],r=this.getWidget(),o=r.getPane().getChart().getChartStore(),a=o.getClickOverlayInfo();if(t.needDefaultXAxisFigure&&t.id===(null===(i=a.overlay)||void 0===i?void 0:i.id)){var s=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;e.forEach(function(e,i){s=Math.min(s,e.x),l=Math.max(l,e.x);var r=t.points[i];if(G(r.timestamp)){var a=o.getCustomApi().formatDate(r.timestamp,"YYYY-MM-DD HH:mm",g.Crosshair);n.push({type:"text",attrs:{x:e.x,y:0,text:a,align:"center"},ignoreEvent:!0})}}),e.length>1&&n.unshift({type:"rect",attrs:{x:s,y:0,width:l-s,height:r.getBounding().height},ignoreEvent:!0})}return n},e.prototype.getFigures=function(t,e){var i,n,r=this.getWidget(),o=r.getPane(),a=o.getChart(),s=o.getAxisComponent(),l=a.getXAxisPane().getAxisComponent(),u=r.getBounding();return null!==(n=null===(i=t.createXAxisFigures)||void 0===i?void 0:i.call(t,{chart:a,overlay:t,coordinates:e,bounding:u,xAxis:l,yAxis:s}))&&void 0!==n?n:[]},e}(em),eP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.compare=function(t){return K(t.kLineData)&&t.dataIndex===t.realDataIndex},e.prototype.getDirectionStyles=function(t){return t.vertical},e.prototype.getText=function(t,e){var i,n=null===(i=t.kLineData)||void 0===i?void 0:i.timestamp;return e.getCustomApi().formatDate(n,"YYYY-MM-DD HH:mm",g.Crosshair)},e.prototype.getTextAttrs=function(t,e,i,n,r,o){var a=i.realX,s=0,l="center";return a-e/2-o.paddingLeft<0?(s=0,l="left"):a+e/2+o.paddingRight>n.width?(s=n.width,l="right"):s=a,{x:s,y:0,text:t,align:l,baseline:"top"}},e}(ey),ek=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n._xAxisView=new eI(n),n._overlayXAxisView=new eT(n),n._crosshairVerticalLabelView=new eP(n),n.getContainer().style.cursor="ew-resize",n.addChild(n._overlayXAxisView),n}return _(e,t),e.prototype.getName=function(){return tQ.X_AXIS},e.prototype.updateMain=function(t){this._xAxisView.draw(t)},e.prototype.updateOverlay=function(t){this._overlayXAxisView.draw(t),this._crosshairVerticalLabelView.draw(t)},e}(t1),eM={normal:(function(t){function e(e,i){var n=t.call(this,e)||this;return n.override(i),n}return _(e,t),e.prototype.override=function(t){var e=t.name,i=t.scrollZoomEnabled,n=t.createTicks;Z(this.name)||(this.name=e),this.scrollZoomEnabled=null!=i?i:this.scrollZoomEnabled,this.createTicks=null!=n?n:this.createTicks},e.prototype.createRangeImp=function(){var t=this.getParent().getChart().getChartStore().getVisibleRange(),e=t.from,i=t.to,n=i-1,r=i-e;return{from:e,to:n,range:r,realFrom:e,realTo:n,realRange:r,displayFrom:e,displayTo:n,displayRange:r}},e.prototype.createTicksImp=function(){var t=this,e=this.getParent().getChart().getChartStore(),i=e.getCustomApi().formatDate,n=e.getVisibleRangeTimeTickList().map(function(e){var n=e.dataIndex,r=e.weight,o=e.timestamp,a="";switch(r){case tj.Year:a=i(o,"YYYY",g.XAxis);break;case tj.Month:a=i(o,"YYYY-MM",g.XAxis);break;case tj.Day:a=i(o,"MM-DD",g.XAxis);break;case tj.Hour:case tj.Minute:a=i(o,"HH:mm",g.XAxis);break;default:a=i(o,"HH:mm:ss",g.XAxis)}return{coord:t.convertToPixel(n),text:a,value:o}});return X(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:n}):n},e.prototype.getAutoSize=function(){var t=this.getParent().getChart().getStyles(),e=t.xAxis,i=e.size;if("auto"!==i)return i;var n=t.crosshair,r=0;e.show&&(e.axisLine.show&&(r+=e.axisLine.size),e.tickLine.show&&(r+=e.tickLine.length),e.tickText.show&&(r+=e.tickText.marginStart+e.tickText.marginEnd+e.tickText.size));var o=0;return n.show&&n.vertical.show&&n.vertical.text.show&&(o+=n.vertical.text.paddingTop+n.vertical.text.paddingBottom+2*n.vertical.text.borderSize+n.vertical.text.size),Math.max(r,o)},e.prototype.getBounding=function(){return this.getParent().getMainWidget().getBounding()},e.prototype.convertTimestampFromPixel=function(t){var e=this.getParent().getChart().getChartStore(),i=e.coordinateToDataIndex(t);return e.dataIndexToTimestamp(i)},e.prototype.convertTimestampToPixel=function(t){var e=this.getParent().getChart().getChartStore(),i=e.timestampToDataIndex(t);return e.dataIndexToCoordinate(i)},e.prototype.convertFromPixel=function(t){return this.getParent().getChart().getChartStore().coordinateToDataIndex(t)},e.prototype.convertToPixel=function(t){return this.getParent().getChart().getChartStore().dataIndexToCoordinate(t)},e.extend=function(t){return function(e){function i(i){return e.call(this,i,t)||this}return _(i,e),i}(e)},e})(eu).extend({name:"normal"})},eD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.createAxisComponent=function(t){var e;return new(null!==(e=eM[t])&&void 0!==e?e:eM.normal)(this)},e.prototype.createMainWidget=function(t){return new ek(t,this)},e}(ew),eA=function(t){function e(e,i){var n,r,o=t.call(this,e,i)||this;return o._dragFlag=!1,o._dragStartY=0,o._topPaneHeight=0,o._bottomPaneHeight=0,o._topPane=null,o._bottomPane=null,o._pressedMouseMoveEvent=(n=o._pressedTouchMouseMoveEvent,r=0,function(){var t=Date.now();t-r>20&&(n.apply(this,arguments),r=t)}),o.registerEvent("touchStartEvent",o._mouseDownEvent.bind(o)).registerEvent("touchMoveEvent",o._pressedMouseMoveEvent.bind(o)).registerEvent("touchEndEvent",o._mouseUpEvent.bind(o)).registerEvent("mouseDownEvent",o._mouseDownEvent.bind(o)).registerEvent("mouseUpEvent",o._mouseUpEvent.bind(o)).registerEvent("pressedMouseMoveEvent",o._pressedMouseMoveEvent.bind(o)).registerEvent("mouseEnterEvent",o._mouseEnterEvent.bind(o)).registerEvent("mouseLeaveEvent",o._mouseLeaveEvent.bind(o)),o}return _(e,t),e.prototype.getName=function(){return tQ.SEPARATOR},e.prototype.checkEventOn=function(){return!0},e.prototype._mouseDownEvent=function(t){var e=this;this._dragFlag=!0,this._dragStartY=t.pageY;var i=this.getPane(),n=i.getChart();this._topPane=i.getTopPane(),this._bottomPane=i.getBottomPane();var r=n.getDrawPanes();if("minimize"===this._topPane.getOptions().state)for(var o=r.findIndex(function(t){var i;return t.getId()===(null===(i=e._topPane)||void 0===i?void 0:i.getId())}),a=o-1;a>-1;a--){var s=r[a];if("minimize"!==s.getOptions().state){this._topPane=s;break}}if("minimize"===this._bottomPane.getOptions().state)for(var o=r.findIndex(function(t){var i;return t.getId()===(null===(i=e._bottomPane)||void 0===i?void 0:i.getId())}),a=o+1;a<r.length;a++){var l=r[a];if("minimize"!==l.getOptions().state){this._bottomPane=l;break}}return this._topPaneHeight=this._topPane.getBounding().height,this._bottomPaneHeight=this._bottomPane.getBounding().height,!0},e.prototype._mouseUpEvent=function(){return this._dragFlag=!1,this._topPane=null,this._bottomPane=null,this._topPaneHeight=0,this._bottomPaneHeight=0,this._mouseLeaveEvent()},e.prototype._pressedTouchMouseMoveEvent=function(t){var e=t.pageY-this._dragStartY,i=e<0;if(K(this._topPane)&&K(this._bottomPane)){var n=this._bottomPane.getOptions();if("minimize"!==this._topPane.getOptions().state&&"minimize"!==n.state&&n.dragEnabled){var r=null,o=null,a=0,s=0;i?(r=this._topPane,o=this._bottomPane,a=this._topPaneHeight,s=this._bottomPaneHeight):(r=this._bottomPane,o=this._topPane,a=this._bottomPaneHeight,s=this._topPaneHeight);var l=r.getOptions().minHeight;if(a>l){var u=Math.max(a-Math.abs(e),l),h=a-u;r.setBounding({height:u}),o.setBounding({height:s+h});var d=this.getPane(),p=d.getChart();p.getChartStore().executeAction(c.OnPaneDrag,{paneId:d.getId()}),p.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}}}return!0},e.prototype._mouseEnterEvent=function(){var t=this.getPane();if(t.getBottomPane().getOptions().dragEnabled){var e=t.getChart().getStyles().separator;return this.getContainer().style.background=e.activeBackgroundColor,!0}return!1},e.prototype._mouseLeaveEvent=function(){return!this._dragFlag&&(this.getContainer().style.background="transparent",!0)},e.prototype.createContainer=function(){return ty("div",{width:"100%",height:"".concat(7,"px"),margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box",cursor:"ns-resize"})},e.prototype.updateImp=function(t,e,i){if(4===i||2===i){var n=this.getPane().getChart().getStyles().separator;t.style.top="".concat(-Math.floor((7-n.size)/2),"px"),t.style.height="".concat(7,"px")}},e}(t0),eR=function(t){function e(e,i,n,r,o,a){var s=t.call(this,e,i,n,r)||this;return s.getContainer().style.overflow="",s._topPane=o,s._bottomPane=a,s._separatorWidget=new eA(s.getContainer(),s),s}return _(e,t),e.prototype.setBounding=function(t){return W(this.getBounding(),t),this},e.prototype.getTopPane=function(){return this._topPane},e.prototype.setTopPane=function(t){return this._topPane=t,this},e.prototype.getBottomPane=function(){return this._bottomPane},e.prototype.setBottomPane=function(t){return this._bottomPane=t,this},e.prototype.getWidget=function(){return this._separatorWidget},e.prototype.getImage=function(t){var e=this.getBounding(),i=e.width,n=e.height,r=this.getChart().getStyles().separator,o=ty("canvas",{width:"".concat(i,"px"),height:"".concat(n,"px"),boxSizing:"border-box"}),a=o.getContext("2d"),s=ti(o);return o.width=i*s,o.height=n*s,a.scale(s,s),a.fillStyle=r.color,a.fillRect(0,0,i,n),o},e.prototype.updateImp=function(t,e,i){if(4===t||2===t){var n=this.getChart().getStyles().separator;e.style.backgroundColor=n.color,e.style.height="".concat(i.height,"px"),e.style.marginLeft="".concat(i.left,"px"),e.style.width="".concat(i.width,"px"),this._separatorWidget.update(t)}},e}(eC);function eB(){return"undefined"!=typeof window&&window.navigator.userAgent.toLowerCase().includes("firefox")}function eF(){return"undefined"!=typeof window&&/iPhone|iPad|iPod|iOS/.test(window.navigator.userAgent)}var eL={CancelClick:5,CancelTap:5,DoubleClick:5,DoubleTap:30},eO={Left:0,Middle:1,Right:2},eN=function(){function t(t,e,i){var n=this;this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartCoordinate=null,this._touchMoveStartCoordinate=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeMouseWheel=null,this._unsubscribeContextMenu=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!eF(),this._onFirefoxOutsideMouseUp=function(t){n._mouseUpHandler(t)},this._onMobileSafariDoubleClick=function(t){if(n._firesTouchEvents(t)){if(++n._tapCount,null!==n._tapTimeoutId&&n._tapCount>1){var e=n._mouseTouchMoveWithDownInfo(n._getCoordinate(t),n._tapCoordinate).manhattanDistance;e<eL.DoubleTap&&!n._cancelTap&&n._processEvent(n._makeCompatEvent(t),n._handler.doubleTapEvent),n._resetTapTimeout()}}else if(++n._clickCount,null!==n._clickTimeoutId&&n._clickCount>1){var e=n._mouseTouchMoveWithDownInfo(n._getCoordinate(t),n._clickCoordinate).manhattanDistance;e<eL.DoubleClick&&!n._cancelClick&&n._processEvent(n._makeCompatEvent(t),n._handler.mouseDoubleClickEvent),n._resetClickTimeout()}},this._target=t,this._handler=e,this._options=i,this._init()}return t.prototype.destroy=function(){null!==this._unsubscribeOutsideMouseEvents&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),null!==this._unsubscribeOutsideTouchEvents&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),null!==this._unsubscribeMousemove&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),null!==this._unsubscribeMouseWheel&&(this._unsubscribeMouseWheel(),this._unsubscribeMouseWheel=null),null!==this._unsubscribeContextMenu&&(this._unsubscribeContextMenu(),this._unsubscribeContextMenu=null),null!==this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),null!==this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),null!==this._unsubscribeMobileSafariEvents&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},t.prototype._mouseEnterHandler=function(t){var e,i,n,r=this;null===(e=this._unsubscribeMousemove)||void 0===e||e.call(this),null===(i=this._unsubscribeMouseWheel)||void 0===i||i.call(this),null===(n=this._unsubscribeContextMenu)||void 0===n||n.call(this);var o=this._mouseMoveHandler.bind(this);this._unsubscribeMousemove=function(){r._target.removeEventListener("mousemove",o)},this._target.addEventListener("mousemove",o);var a=this._mouseWheelHandler.bind(this);this._unsubscribeMouseWheel=function(){r._target.removeEventListener("wheel",a)},this._target.addEventListener("wheel",a,{passive:!1});var s=this._contextMenuHandler.bind(this);this._unsubscribeContextMenu=function(){r._target.removeEventListener("contextmenu",s)},this._target.addEventListener("contextmenu",s,{passive:!1}),this._firesTouchEvents(t)||(this._processEvent(this._makeCompatEvent(t),this._handler.mouseEnterEvent),this._acceptMouseLeave=!0)},t.prototype._resetClickTimeout=function(){null!==this._clickTimeoutId&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},t.prototype._resetTapTimeout=function(){null!==this._tapTimeoutId&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},t.prototype._mouseMoveHandler=function(t){this._mousePressed||null!==this._touchMoveStartCoordinate||this._firesTouchEvents(t)||(this._processEvent(this._makeCompatEvent(t),this._handler.mouseMoveEvent),this._acceptMouseLeave=!0)},t.prototype._mouseWheelHandler=function(t){if(Math.abs(t.deltaX)>Math.abs(t.deltaY))K(this._handler.mouseWheelHortEvent)&&(this._preventDefault(t),0!==Math.abs(t.deltaX)&&this._handler.mouseWheelHortEvent(this._makeCompatEvent(t),-t.deltaX));else{if(!K(this._handler.mouseWheelVertEvent))return;var e=-(t.deltaY/100);if(0===e)return;switch(this._preventDefault(t),t.deltaMode){case t.DOM_DELTA_PAGE:e*=120;break;case t.DOM_DELTA_LINE:e*=32}if(0!==e){var i=Math.sign(e)*Math.min(1,Math.abs(e));this._handler.mouseWheelVertEvent(this._makeCompatEvent(t),i)}}},t.prototype._contextMenuHandler=function(t){this._preventDefault(t)},t.prototype._touchMoveHandler=function(t){var e=this._touchWithId(t.changedTouches,this._activeTouchId);if(null!==e&&(this._lastTouchEventTimeStamp=this._eventTimeStamp(t),null===this._startPinchMiddleCoordinate&&!this._preventTouchDragProcess)){this._pinchPrevented=!0;var i=this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._touchMoveStartCoordinate),n=i.xOffset,r=i.yOffset,o=i.manhattanDistance;if(this._touchMoveExceededManhattanDistance||!(o<eL.CancelTap)){if(!this._touchMoveExceededManhattanDistance){var a=.5*n,s=r>=a&&!this._options.treatVertDragAsPageScroll(),l=a>r&&!this._options.treatHorzDragAsPageScroll();s||l||(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}this._preventTouchDragProcess||this._processEvent(this._makeCompatEvent(t,e),this._handler.touchMoveEvent)}}},t.prototype._mouseMoveWithDownHandler=function(t){t.button===eO.Left&&(this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._mouseMoveStartCoordinate).manhattanDistance>=eL.CancelClick&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick&&this._processEvent(this._makeCompatEvent(t),this._handler.pressedMouseMoveEvent))},t.prototype._mouseTouchMoveWithDownInfo=function(t,e){var i=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return{xOffset:i,yOffset:n,manhattanDistance:i+n}},t.prototype._touchEndHandler=function(t){var e=this._touchWithId(t.changedTouches,this._activeTouchId);if(null===e&&0===t.touches.length&&(e=t.changedTouches[0]),null!==e){this._activeTouchId=null,this._lastTouchEventTimeStamp=this._eventTimeStamp(t),this._clearLongTapTimeout(),this._touchMoveStartCoordinate=null,null!==this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var i=this._makeCompatEvent(t,e);this._processEvent(i,this._handler.touchEndEvent),++this._tapCount,null!==this._tapTimeoutId&&this._tapCount>1?(this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._tapCoordinate).manhattanDistance<eL.DoubleTap&&!this._cancelTap&&this._processEvent(i,this._handler.doubleTapEvent),this._resetTapTimeout()):!this._cancelTap&&(this._processEvent(i,this._handler.tapEvent),K(this._handler.tapEvent)&&this._preventDefault(t)),0===this._tapCount&&this._preventDefault(t),0===t.touches.length&&this._longTapActive&&(this._longTapActive=!1,this._preventDefault(t))}},t.prototype._mouseUpHandler=function(t){if(t.button===eO.Left){var e=this._makeCompatEvent(t);this._mouseMoveStartCoordinate=null,this._mousePressed=!1,null!==this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),eB()&&this._target.ownerDocument.documentElement.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp),!this._firesTouchEvents(t)&&(this._processEvent(e,this._handler.mouseUpEvent),++this._clickCount,null!==this._clickTimeoutId&&this._clickCount>1?(this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._clickCoordinate).manhattanDistance<eL.DoubleClick&&!this._cancelClick&&this._processEvent(e,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()):this._cancelClick||this._processEvent(e,this._handler.mouseClickEvent))}},t.prototype._clearLongTapTimeout=function(){null!==this._longTapTimeoutId&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},t.prototype._touchStartHandler=function(t){if(null===this._activeTouchId){var e=t.changedTouches[0];this._activeTouchId=e.identifier,this._lastTouchEventTimeStamp=this._eventTimeStamp(t);var i=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartCoordinate=this._getCoordinate(e),null!==this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var n=this._touchMoveHandler.bind(this),r=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){i.removeEventListener("touchmove",n),i.removeEventListener("touchend",r)},i.addEventListener("touchmove",n,{passive:!1}),i.addEventListener("touchend",r,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,t),500),this._processEvent(this._makeCompatEvent(t,e),this._handler.touchStartEvent),null===this._tapTimeoutId&&(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),500),this._tapCoordinate=this._getCoordinate(e))}},t.prototype._mouseDownHandler=function(t){if(t.button===eO.Right){this._preventDefault(t),this._processEvent(this._makeCompatEvent(t),this._handler.mouseRightClickEvent);return}if(t.button===eO.Left){var e=this._target.ownerDocument.documentElement;eB()&&e.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartCoordinate=this._getCoordinate(t),null!==this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);var i=this._mouseMoveWithDownHandler.bind(this),n=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=function(){e.removeEventListener("mousemove",i),e.removeEventListener("mouseup",n)},e.addEventListener("mousemove",i),e.addEventListener("mouseup",n),this._mousePressed=!0,this._firesTouchEvents(t)||(this._processEvent(this._makeCompatEvent(t),this._handler.mouseDownEvent),null===this._clickTimeoutId&&(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500),this._clickCoordinate=this._getCoordinate(t)))}},t.prototype._init=function(){var t=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));var e=this._target.ownerDocument,i=function(e){null==t._handler.mouseDownOutsideEvent||e.composed&&t._target.contains(e.composedPath()[0])||null!==e.target&&t._target.contains(e.target)||t._handler.mouseDownOutsideEvent({x:0,y:0,pageX:0,pageY:0})};this._unsubscribeOutsideTouchEvents=function(){e.removeEventListener("touchstart",i)},this._unsubscribeOutsideMouseEvents=function(){e.removeEventListener("mousedown",i)},e.addEventListener("mousedown",i),e.addEventListener("touchstart",i,{passive:!0}),eF()&&(this._unsubscribeMobileSafariEvents=function(){t._target.removeEventListener("dblclick",t._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),this._target.addEventListener("mousedown",function(t){if(t.button===eO.Middle)return t.preventDefault(),!1}),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",function(){},{passive:!1})},t.prototype._initPinch=function(){var t=this;(K(this._handler.pinchStartEvent)||K(this._handler.pinchEvent)||K(this._handler.pinchEndEvent))&&(this._target.addEventListener("touchstart",function(e){t._checkPinchState(e.touches)},{passive:!0}),this._target.addEventListener("touchmove",function(e){if(2===e.touches.length&&null!==t._startPinchMiddleCoordinate&&K(t._handler.pinchEvent)){var i=t._getTouchDistance(e.touches[0],e.touches[1])/t._startPinchDistance;t._handler.pinchEvent(x(x({},t._startPinchMiddleCoordinate),{pageX:0,pageY:0}),i),t._preventDefault(e)}},{passive:!1}),this._target.addEventListener("touchend",function(e){t._checkPinchState(e.touches)}))},t.prototype._checkPinchState=function(t){1===t.length&&(this._pinchPrevented=!1),2!==t.length||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(t)},t.prototype._startPinch=function(t){var e=this._target.getBoundingClientRect();this._startPinchMiddleCoordinate={x:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,y:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this._startPinchDistance=this._getTouchDistance(t[0],t[1]),K(this._handler.pinchStartEvent)&&this._handler.pinchStartEvent({x:0,y:0,pageX:0,pageY:0}),this._clearLongTapTimeout()},t.prototype._stopPinch=function(){null!==this._startPinchMiddleCoordinate&&(this._startPinchMiddleCoordinate=null,K(this._handler.pinchEndEvent)&&this._handler.pinchEndEvent({x:0,y:0,pageX:0,pageY:0}))},t.prototype._mouseLeaveHandler=function(t){var e,i,n;null===(e=this._unsubscribeMousemove)||void 0===e||e.call(this),null===(i=this._unsubscribeMouseWheel)||void 0===i||i.call(this),null===(n=this._unsubscribeContextMenu)||void 0===n||n.call(this),!this._firesTouchEvents(t)&&this._acceptMouseLeave&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseLeaveEvent),this._acceptMouseLeave=!eF())},t.prototype._longTapHandler=function(t){var e=this._touchWithId(t.touches,this._activeTouchId);null!==e&&(this._processEvent(this._makeCompatEvent(t,e),this._handler.longTapEvent),this._cancelTap=!0,this._longTapActive=!0)},t.prototype._firesTouchEvents=function(t){var e;return K(null===(e=t.sourceCapabilities)||void 0===e?void 0:e.firesTouchEvents)?t.sourceCapabilities.firesTouchEvents:this._eventTimeStamp(t)<this._lastTouchEventTimeStamp+500},t.prototype._processEvent=function(t,e){null==e||e.call(this._handler,t)},t.prototype._makeCompatEvent=function(t,e){var i=this,n=null!=e?e:t,r=this._target.getBoundingClientRect();return{x:n.clientX-r.left,y:n.clientY-r.top,pageX:n.pageX,pageY:n.pageY,isTouch:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type&&"wheel"!==t.type,preventDefault:function(){"touchstart"!==t.type&&i._preventDefault(t)}}},t.prototype._getTouchDistance=function(t,e){var i=t.clientX-e.clientX,n=t.clientY-e.clientY;return Math.sqrt(i*i+n*n)},t.prototype._preventDefault=function(t){t.cancelable&&t.preventDefault()},t.prototype._getCoordinate=function(t){return{x:t.pageX,y:t.pageY}},t.prototype._eventTimeStamp=function(t){var e;return null!==(e=t.timeStamp)&&void 0!==e?e:performance.now()},t.prototype._touchWithId=function(t,e){for(var i=0;i<t.length;++i)if(t[i].identifier===e)return t[i];return null},t}(),eV=function(){function t(t,e){var i=this;this._flingStartTime=new Date().getTime(),this._flingScrollRequestId=null,this._startScrollCoordinate=null,this._touchCoordinate=null,this._touchCancelCrosshair=!1,this._touchZoomed=!1,this._pinchScale=1,this._mouseDownWidget=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,this._mouseMoveTriggerWidgetInfo={pane:null,widget:null},this._boundKeyBoardDownEvent=function(t){if(t.shiftKey)switch(t.code){case"Equal":i._chart.getChartStore().zoom(.5);break;case"Minus":i._chart.getChartStore().zoom(-.5);break;case"ArrowLeft":var e=i._chart.getChartStore();e.startScroll(),e.scroll(-3*e.getBarSpace().bar);break;case"ArrowRight":var e=i._chart.getChartStore();e.startScroll(),e.scroll(3*e.getBarSpace().bar)}},this._container=t,this._chart=e,this._event=new eN(t,this,{treatVertDragAsPageScroll:function(){return!1},treatHorzDragAsPageScroll:function(){return!1}}),t.addEventListener("keydown",this._boundKeyBoardDownEvent)}return t.prototype.pinchStartEvent=function(){return this._touchZoomed=!0,this._pinchScale=1,!0},t.prototype.pinchEvent=function(t,e){var i=this._findWidgetByEvent(t),n=i.pane,r=i.widget;if((null==n?void 0:n.getId())!==tZ.X_AXIS&&(null==r?void 0:r.getName())===tQ.MAIN){var o=this._makeWidgetEvent(t,r),a=(e-this._pinchScale)*5;return this._pinchScale=e,this._chart.getChartStore().zoom(a,{x:o.x,y:o.y}),!0}return!1},t.prototype.mouseWheelHortEvent=function(t,e){var i=this._chart.getChartStore();return i.startScroll(),i.scroll(e),!0},t.prototype.mouseWheelVertEvent=function(t,e){var i=this._findWidgetByEvent(t).widget,n=this._makeWidgetEvent(t,i);return(null==i?void 0:i.getName())===tQ.MAIN&&(this._chart.getChartStore().zoom(e,{x:n.x,y:n.y}),!0)},t.prototype.mouseDownEvent=function(t){var e=this._findWidgetByEvent(t),i=e.pane,n=e.widget;if(this._mouseDownWidget=n,null!==n){var r=this._makeWidgetEvent(t,n);switch(n.getName()){case tQ.SEPARATOR:return n.dispatchEvent("mouseDownEvent",r);case tQ.MAIN:var o=i.getAxisComponent().getRange();return this._prevYAxisRange=x({},o),this._startScrollCoordinate={x:r.x,y:r.y},this._chart.getChartStore().startScroll(),n.dispatchEvent("mouseDownEvent",r);case tQ.X_AXIS:var a=n.dispatchEvent("mouseDownEvent",r);return a&&this._chart.updatePane(1),this._xAxisStartScaleCoordinate={x:r.x,y:r.y},this._xAxisStartScaleDistance=r.pageX,a;case tQ.Y_AXIS:var a=n.dispatchEvent("mouseDownEvent",r);a&&this._chart.updatePane(1);var o=i.getAxisComponent().getRange();return this._prevYAxisRange=x({},o),this._yAxisStartScaleDistance=r.pageY,a}}return!1},t.prototype.mouseMoveEvent=function(t){var e,i,n,r=this._findWidgetByEvent(t),o=r.pane,a=r.widget,s=this._makeWidgetEvent(t,a);if(((null===(e=this._mouseMoveTriggerWidgetInfo.pane)||void 0===e?void 0:e.getId())!==(null==o?void 0:o.getId())||(null===(i=this._mouseMoveTriggerWidgetInfo.widget)||void 0===i?void 0:i.getName())!==(null==a?void 0:a.getName()))&&(null==a||a.dispatchEvent("mouseEnterEvent",s),null===(n=this._mouseMoveTriggerWidgetInfo.widget)||void 0===n||n.dispatchEvent("mouseLeaveEvent",s),this._mouseMoveTriggerWidgetInfo={pane:o,widget:a}),null!==a)switch(a.getName()){case tQ.MAIN:var l=a.dispatchEvent("mouseMoveEvent",s),u=this._chart.getChartStore(),c={x:s.x,y:s.y,paneId:null==o?void 0:o.getId()};return l&&null!==u.getActiveTooltipIcon()&&(c=void 0,a.getContainer().style.cursor="pointer"),this._chart.getChartStore().setCrosshair(c),l;case tQ.SEPARATOR:case tQ.X_AXIS:case tQ.Y_AXIS:var l=a.dispatchEvent("mouseMoveEvent",s);return this._chart.getChartStore().setCrosshair(),l}return!1},t.prototype.pressedMouseMoveEvent=function(t){if(null!==this._mouseDownWidget&&this._mouseDownWidget.getName()===tQ.SEPARATOR)return this._mouseDownWidget.dispatchEvent("pressedMouseMoveEvent",t);var e,i,n,r=this._findWidgetByEvent(t),o=r.pane,a=r.widget;if(null!==a&&(null===(e=this._mouseDownWidget)||void 0===e?void 0:e.getPane().getId())===(null==o?void 0:o.getId())&&(null===(i=this._mouseDownWidget)||void 0===i?void 0:i.getName())===a.getName()){var s=this._makeWidgetEvent(t,a);switch(a.getName()){case tQ.MAIN:var l=a.getBounding(),u=a.dispatchEvent("pressedMouseMoveEvent",s);if(!u&&null!==this._startScrollCoordinate){var c=o.getAxisComponent();if(null!==this._prevYAxisRange&&!c.getAutoCalcTickFlag()&&c.scrollZoomEnabled){var h=this._prevYAxisRange,d=h.from,p=h.to,g=h.range,v=(c.reverse?this._startScrollCoordinate.y-s.y:s.y-this._startScrollCoordinate.y)/l.height,f=g*v,m=d+f,y=p+f,_=c.valueToRealValue(m,{range:this._prevYAxisRange}),x=c.valueToRealValue(y,{range:this._prevYAxisRange}),b=c.realValueToDisplayValue(_,{range:this._prevYAxisRange}),C=c.realValueToDisplayValue(x,{range:this._prevYAxisRange});c.setRange({from:m,to:y,range:y-m,realFrom:_,realTo:x,realRange:x-_,displayFrom:b,displayTo:C,displayRange:C-b})}var w=s.x-this._startScrollCoordinate.x;this._chart.getChartStore().scroll(w)}return this._chart.getChartStore().setCrosshair({x:s.x,y:s.y,paneId:null==o?void 0:o.getId()}),u;case tQ.X_AXIS:var u=a.dispatchEvent("pressedMouseMoveEvent",s);if(u)this._chart.updatePane(1);else if(o.getAxisComponent().scrollZoomEnabled){var v=this._xAxisStartScaleDistance/s.pageX;if(Number.isFinite(v)){var S=(v-this._xAxisScale)*10;this._xAxisScale=v,this._chart.getChartStore().zoom(S,null!==(n=this._xAxisStartScaleCoordinate)&&void 0!==n?n:void 0)}}return u;case tQ.Y_AXIS:var u=a.dispatchEvent("pressedMouseMoveEvent",s);if(u)this._chart.updatePane(1);else{var c=o.getAxisComponent();if(null!==this._prevYAxisRange&&c.scrollZoomEnabled){var E=this._prevYAxisRange,d=E.from,p=E.to,g=E.range,v=s.pageY/this._yAxisStartScaleDistance,I=g*v,f=(I-g)/2,m=d-f,y=p+f,_=c.valueToRealValue(m,{range:this._prevYAxisRange}),x=c.valueToRealValue(y,{range:this._prevYAxisRange}),b=c.realValueToDisplayValue(_,{range:this._prevYAxisRange}),C=c.realValueToDisplayValue(x,{range:this._prevYAxisRange});c.setRange({from:m,to:y,range:I,realFrom:_,realTo:x,realRange:x-_,displayFrom:b,displayTo:C,displayRange:C-b}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})}}return u}}return!1},t.prototype.mouseUpEvent=function(t){var e=this._findWidgetByEvent(t).widget,i=!1;if(null!==e){var n=this._makeWidgetEvent(t,e);switch(e.getName()){case tQ.MAIN:case tQ.SEPARATOR:case tQ.X_AXIS:case tQ.Y_AXIS:i=e.dispatchEvent("mouseUpEvent",n)}i&&this._chart.updatePane(1)}return this._mouseDownWidget=null,this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,i},t.prototype.mouseClickEvent=function(t){var e=this._findWidgetByEvent(t).widget;if(null!==e){var i=this._makeWidgetEvent(t,e);return e.dispatchEvent("mouseClickEvent",i)}return!1},t.prototype.mouseRightClickEvent=function(t){var e=this._findWidgetByEvent(t).widget,i=!1;if(null!==e){var n=this._makeWidgetEvent(t,e);switch(e.getName()){case tQ.MAIN:case tQ.X_AXIS:case tQ.Y_AXIS:i=e.dispatchEvent("mouseRightClickEvent",n)}i&&this._chart.updatePane(1)}return!1},t.prototype.mouseDoubleClickEvent=function(t){var e=this._findWidgetByEvent(t),i=e.pane,n=e.widget;if(null!==n)switch(n.getName()){case tQ.MAIN:var r=this._makeWidgetEvent(t,n);return n.dispatchEvent("mouseDoubleClickEvent",r);case tQ.Y_AXIS:var o=i.getAxisComponent();if(!o.getAutoCalcTickFlag())return o.setAutoCalcTickFlag(!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}),!0}return!1},t.prototype.mouseLeaveEvent=function(){return this._chart.getChartStore().setCrosshair(),!0},t.prototype.touchStartEvent=function(t){var e=this._findWidgetByEvent(t),i=e.pane,n=e.widget;if(null!==n){var r=this._makeWidgetEvent(t,n);switch(n.getName()){case tQ.MAIN:var o=this._chart.getChartStore();if(n.dispatchEvent("mouseDownEvent",r))return this._touchCancelCrosshair=!0,this._touchCoordinate=null,o.setCrosshair(void 0,!0),this._chart.updatePane(1),!0;if(null!==this._flingScrollRequestId&&(td(this._flingScrollRequestId),this._flingScrollRequestId=null),this._flingStartTime=new Date().getTime(),this._startScrollCoordinate={x:r.x,y:r.y},o.startScroll(),this._touchZoomed=!1,null!==this._touchCoordinate){var a=r.x-this._touchCoordinate.x,s=r.y-this._touchCoordinate.y;10>Math.sqrt(a*a+s*s)?(this._touchCoordinate={x:r.x,y:r.y},o.setCrosshair({x:r.x,y:r.y,paneId:null==i?void 0:i.getId()})):(this._touchCoordinate=null,this._touchCancelCrosshair=!0,o.setCrosshair())}return!0;case tQ.X_AXIS:case tQ.Y_AXIS:var l=n.dispatchEvent("mouseDownEvent",r);return l&&this._chart.updatePane(1),l}}return!1},t.prototype.touchMoveEvent=function(t){var e,i,n,r=this._findWidgetByEvent(t),o=r.pane,a=r.widget;if(null!==a){var s=this._makeWidgetEvent(t,a),l=a.getName(),u=this._chart.getChartStore();switch(l){case tQ.MAIN:if(a.dispatchEvent("pressedMouseMoveEvent",s))return null===(e=s.preventDefault)||void 0===e||e.call(s),u.setCrosshair(void 0,!0),this._chart.updatePane(1),!0;if(null!==this._touchCoordinate)null===(i=s.preventDefault)||void 0===i||i.call(s),u.setCrosshair({x:s.x,y:s.y,paneId:null==o?void 0:o.getId()});else if(null!==this._startScrollCoordinate&&Math.abs(this._startScrollCoordinate.x-s.x)>this._startScrollCoordinate.y-s.y){var c=s.x-this._startScrollCoordinate.x;u.scroll(c)}return!0;case tQ.X_AXIS:case tQ.Y_AXIS:var h=a.dispatchEvent("pressedMouseMoveEvent",s);return h&&(null===(n=s.preventDefault)||void 0===n||n.call(s),this._chart.updatePane(1)),h}}return!1},t.prototype.touchEndEvent=function(t){var e=this,i=this._findWidgetByEvent(t).widget;if(null!==i){var n=this._makeWidgetEvent(t,i);switch(i.getName()){case tQ.MAIN:if(i.dispatchEvent("mouseUpEvent",n),null!==this._startScrollCoordinate){var r=new Date().getTime()-this._flingStartTime,o=(n.x-this._startScrollCoordinate.x)/(r>0?r:1)*20;if(r<200&&Math.abs(o)>0){var a=this._chart.getChartStore(),s=function(){e._flingScrollRequestId=th(function(){a.startScroll(),a.scroll(o),1>Math.abs(o*=.975)?null!==e._flingScrollRequestId&&(td(e._flingScrollRequestId),e._flingScrollRequestId=null):s()})};s()}}return!0;case tQ.X_AXIS:case tQ.Y_AXIS:i.dispatchEvent("mouseUpEvent",n)&&this._chart.updatePane(1)}}return!1},t.prototype.tapEvent=function(t){var e=this._findWidgetByEvent(t),i=e.pane,n=e.widget,r=!1;if(null!==n){var o=this._makeWidgetEvent(t,n),a=n.dispatchEvent("mouseClickEvent",o);if(n.getName()===tQ.MAIN){var s=this._makeWidgetEvent(t,n),l=this._chart.getChartStore();a?(this._touchCancelCrosshair=!0,this._touchCoordinate=null,l.setCrosshair(void 0,!0),r=!0):(this._touchCancelCrosshair||this._touchZoomed||(this._touchCoordinate={x:s.x,y:s.y},l.setCrosshair({x:s.x,y:s.y,paneId:null==i?void 0:i.getId()},!0),r=!0),this._touchCancelCrosshair=!1)}(r||a)&&this._chart.updatePane(1)}return r},t.prototype.doubleTapEvent=function(t){return this.mouseDoubleClickEvent(t)},t.prototype.longTapEvent=function(t){var e=this._findWidgetByEvent(t),i=e.pane,n=e.widget;if(null!==n&&n.getName()===tQ.MAIN){var r=this._makeWidgetEvent(t,n);return this._touchCoordinate={x:r.x,y:r.y},this._chart.getChartStore().setCrosshair({x:r.x,y:r.y,paneId:null==i?void 0:i.getId()}),!0}return!1},t.prototype._findWidgetByEvent=function(t){var e,i,n,r,o=t.x,a=t.y,s=this._chart.getSeparatorPanes(),l=this._chart.getStyles().separator.size;try{for(var u=S(s),c=u.next();!c.done;c=u.next()){var h=E(c.value,2)[1],d=h.getBounding(),p=d.top-Math.round((7-l)/2);if(o>=d.left&&o<=d.left+d.width&&a>=p&&a<=p+7)return{pane:h,widget:h.getWidget()}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}var g=this._chart.getDrawPanes(),v=null;try{for(var f=S(g),m=f.next();!m.done;m=f.next()){var y=m.value,d=y.getBounding();if(o>=d.left&&o<=d.left+d.width&&a>=d.top&&a<=d.top+d.height){v=y;break}}}catch(t){n={error:t}}finally{try{m&&!m.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}var _=null;if(null!==v){if(!K(_)){var x=v.getMainWidget(),b=x.getBounding();o>=b.left&&o<=b.left+b.width&&a>=b.top&&a<=b.top+b.height&&(_=x)}if(!K(_)){var C=v.getYAxisWidget();if(null!==C){var w=C.getBounding();o>=w.left&&o<=w.left+w.width&&a>=w.top&&a<=w.top+w.height&&(_=C)}}}return{pane:v,widget:_}},t.prototype._makeWidgetEvent=function(t,e){var i,n,r,o=null!==(i=null==e?void 0:e.getBounding())&&void 0!==i?i:null;return x(x({},t),{x:t.x-(null!==(n=null==o?void 0:o.left)&&void 0!==n?n:0),y:t.y-(null!==(r=null==o?void 0:o.top)&&void 0!==r?r:0)})},t.prototype.destroy=function(){this._container.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._event.destroy()},t}();!function(t){t.Root="root",t.Main="main",t.YAxis="yAxis"}(m||(m={}));var eW=function(){function t(t,e){this._chartBounding=tc(),this._drawPanes=[],this._separatorPanes=new Map,this._layoutOptions={measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!1,forceBuildYAxisTick:!1},this._layoutPending=!1,this._initContainer(t),this._chartEvent=new eV(this._chartContainer,this),this._chartStore=new tJ(this,e),this._initPanes(e),this._layout()}return t.prototype._initContainer=function(t){this._container=t,this._chartContainer=ty("div",{position:"relative",width:"100%",height:"100%",outline:"none",borderStyle:"none",cursor:"crosshair",boxSizing:"border-box",userSelect:"none",webkitUserSelect:"none",overflow:"hidden",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent"}),this._chartContainer.tabIndex=1,t.appendChild(this._chartContainer),this._cacheChartBounding()},t.prototype._cacheChartBounding=function(){this._chartBounding.width=Math.floor(this._chartContainer.clientWidth),this._chartBounding.height=Math.floor(this._chartContainer.clientHeight)},t.prototype._initPanes=function(t){var e,i=this,n=null!==(e=null==t?void 0:t.layout)&&void 0!==e?e:[{type:"candle"}],r=function(t){var e,n;if(!K(i._candlePane)){var r=null!==(e=t.options)&&void 0!==e?e:{};W(r,{id:tZ.CANDLE}),i._candlePane=i._createPane(eE,tZ.CANDLE,r),(null!==(n=t.content)&&void 0!==n?n:[]).forEach(function(t){i.createIndicator(t,!0,r)})}},o=function(t){if(!K(i._xAxisPane)){var e=i._createPane(eD,tZ.X_AXIS,null!=t?t:{});i._xAxisPane=e}};n.forEach(function(t){var e;switch(t.type){case"candle":r(t);break;case"indicator":var n=null!==(e=t.content)&&void 0!==e?e:[];if(n.length>0){var a=null;n.forEach(function(e){K(a)?i.createIndicator(e,!0,{id:a}):a=i.createIndicator(e,!0,t.options)})}break;case"xAxis":o(t.options)}}),r({type:"candle"}),o({order:Number.MAX_SAFE_INTEGER})},t.prototype._createPane=function(t,e,i){var n,r,o,a=null,s=null,l=null!==(n=null==i?void 0:i.order)&&void 0!==n?n:0;if(this._drawPanes.length>0&&(l<this._drawPanes[0].getOptions().order&&(s=new t(this._chartContainer,this._drawPanes[0].getContainer(),this,e,null!=i?i:{}),a=0),!K(s)))for(var u=1;u<this._drawPanes.length;u++){var c=this._drawPanes[u-1],h=this._drawPanes[u];if(l>=c.getOptions().order&&l<h.getOptions().order){var d=null;d=h.getId()!==tZ.X_AXIS?null!==(o=null===(r=this._separatorPanes.get(h))||void 0===r?void 0:r.getContainer())&&void 0!==o?o:null:h.getContainer(),s=new t(this._chartContainer,d,this,e,null!=i?i:{}),a=u;break}}K(s)||(s=new t(this._chartContainer,null,this,e,null!=i?i:{}));var p=0;if(G(a)?(this._drawPanes.splice(a,0,s),p=a):(this._drawPanes.push(s),p=this._drawPanes.length-1),s.getId()!==tZ.X_AXIS){var g=this._drawPanes[p+1];if(K(g)&&g.getId()===tZ.X_AXIS&&(g=this._drawPanes[p+2]),K(g)){var v=this._separatorPanes.get(g);K(v)?v.setTopPane(s):(v=new eR(this._chartContainer,g.getContainer(),this,"",s,g),this._separatorPanes.set(g,v))}var c=this._drawPanes[p-1];if(K(c)&&c.getId()===tZ.X_AXIS&&(c=this._drawPanes[p-2]),K(c)){var v=new eR(this._chartContainer,s.getContainer(),this,"",c,s);this._separatorPanes.set(s,v)}}return s},t.prototype._recalculatePaneHeight=function(t,e,i){if(0===i)return!1;var n=this._drawPanes.filter(function(e){var i=e.getId();return"normal"===e.getOptions().state&&i!==t.getId()&&i!==tZ.X_AXIS}),r=n.length;if(0===r)return!1;if(t.getId()!==tZ.CANDLE&&K(this._candlePane)&&"normal"===this._candlePane.getOptions().state){var o=this._candlePane.getBounding().height;if(o>0){var a=this._candlePane.getOptions().minHeight,s=o+i;s<a&&(e-=o+i-(s=a)),this._candlePane.setBounding({height:s})}}else{var l=i,u=Math.floor(i/r);n.forEach(function(t,e){var i=t.getBounding().height,n=0;(n=e===r-1?i+l:i+u)<t.getOptions().minHeight&&(n=t.getOptions().minHeight),t.setBounding({height:n}),l-=n-i}),Math.abs(l)>0&&(e-=l)}return t.setBounding({height:e}),!0},t.prototype.getDrawPaneById=function(t){if(t===tZ.CANDLE)return this._candlePane;if(t===tZ.X_AXIS)return this._xAxisPane;var e=this._drawPanes.find(function(e){return e.getId()===t});return null!=e?e:null},t.prototype.getContainer=function(){return this._container},t.prototype.getChartStore=function(){return this._chartStore},t.prototype.getXAxisPane=function(){return this._xAxisPane},t.prototype.getDrawPanes=function(){return this._drawPanes},t.prototype.getSeparatorPanes=function(){return this._separatorPanes},t.prototype.layout=function(t){var e,i,n,r,o,a=this;null!==(e=t.measureHeight)&&void 0!==e&&e&&(this._layoutOptions.measureHeight=t.measureHeight),null!==(i=t.measureWidth)&&void 0!==i&&i&&(this._layoutOptions.measureWidth=t.measureWidth),null!==(n=t.update)&&void 0!==n&&n&&(this._layoutOptions.update=t.update),null!==(r=t.buildYAxisTick)&&void 0!==r&&r&&(this._layoutOptions.buildYAxisTick=t.buildYAxisTick),null!==(o=t.buildYAxisTick)&&void 0!==o&&o&&(this._layoutOptions.forceBuildYAxisTick=t.forceBuildYAxisTick),this._layoutPending||(this._layoutPending=!0,Promise.resolve().then(function(t){a._layout(),a._layoutPending=!1}).catch(function(t){}))},t.prototype._layout=function(){var t=this,e=this._layoutOptions,i=e.measureHeight,n=e.measureWidth,r=e.update,o=e.buildYAxisTick,a=e.forceBuildYAxisTick;if(i){var s=this._chartBounding.height,l=this.getStyles().separator.size,u=this._xAxisPane.getAxisComponent().getAutoSize(),c=s-u;c<0&&(c=0),this._drawPanes.forEach(function(e){var i=e.getId();if(K(t._separatorPanes.get(e))&&(c-=l),i!==tZ.X_AXIS&&i!==tZ.CANDLE&&e.getVisible()){var n=e.getBounding().height;n>c?(n=c,c=0):c-=n,e.setBounding({height:n})}}),this._candlePane.setBounding({height:Math.max(c,0)}),this._xAxisPane.setBounding({height:u});var h=0;this._drawPanes.forEach(function(e){var i=t._separatorPanes.get(e);K(i)&&(i.setBounding({height:l,top:h}),h+=l),e.setBounding({top:h}),h+=e.getBounding().height})}var d=n;if((o||a)&&this._drawPanes.forEach(function(t){var e=t.getAxisComponent().buildTicks(a);d||(d=e)}),d){var p=this._chartBounding.width,g=this.getStyles(),v=0,m=!0,y=0,_=!0;this._drawPanes.forEach(function(t){if(t.getId()!==tZ.X_AXIS){var e=t.getAxisComponent(),i=e.inside,n=e.getAutoSize();e.position===f.Left?(v=Math.max(v,n),i&&(m=!1)):(y=Math.max(y,n),i&&(_=!1))}});var x=p,b=0,C=0;m&&(x-=v,b=v),_&&(x-=y,C=y),this._chartStore.setTotalBarSpace(x);var w={width:p},S={width:x,left:b,right:C},E={width:v},I={width:y},T=g.separator.fill,P={};P=T?w:S,this._drawPanes.forEach(function(e){var i;null===(i=t._separatorPanes.get(e))||void 0===i||i.setBounding(P),e.setBounding(w,S,E,I)})}r&&(this._xAxisPane.getAxisComponent().buildTicks(!0),this.updatePane(4)),this._layoutOptions={measureHeight:!1,measureWidth:!1,update:!1,buildYAxisTick:!1,forceBuildYAxisTick:!1}},t.prototype.updatePane=function(t,e){var i=this;if(K(e)){var n=this.getDrawPaneById(e);null==n||n.update(t)}else this._drawPanes.forEach(function(e){var n;e.update(t),null===(n=i._separatorPanes.get(e))||void 0===n||n.update(t)})},t.prototype.crosshairChange=function(t){var e=this;if(this._chartStore.hasAction(c.OnCrosshairChange)){var i={};this._drawPanes.forEach(function(n){var r=n.getId(),o={};e._chartStore.getIndicatorsByPaneId(r).forEach(function(e){var i,n=e.result;o[e.name]=n[null!==(i=t.dataIndex)&&void 0!==i?i:n.length-1]}),i[r]=o}),Z(t.paneId)&&this._chartStore.executeAction(c.OnCrosshairChange,x(x({},t),{indicatorData:i}))}},t.prototype.getDom=function(t,e){if(!K(t))return this._chartContainer;var i,n,r=this.getDrawPaneById(t);if(K(r))switch(null!=e?e:m.Root){case m.Root:return r.getContainer();case m.Main:return r.getMainWidget().getContainer();case m.YAxis:return null!==(n=null===(i=r.getYAxisWidget())||void 0===i?void 0:i.getContainer())&&void 0!==n?n:null}return null},t.prototype.getSize=function(t,e){if(!K(t))return this._chartBounding;var i,n,r=this.getDrawPaneById(t);if(K(r))switch(null!=e?e:m.Root){case m.Root:return r.getBounding();case m.Main:return r.getMainWidget().getBounding();case m.YAxis:return null!==(n=null===(i=r.getYAxisWidget())||void 0===i?void 0:i.getBounding())&&void 0!==n?n:null}return null},t.prototype.setPrecision=function(t){this._chartStore.setPrecision(t)},t.prototype.getPrecision=function(){return this._chartStore.getPrecision()},t.prototype.setStyles=function(t){var e=this;this._setOptions(function(){e._chartStore.setStyles(t)})},t.prototype.getStyles=function(){return this._chartStore.getStyles()},t.prototype.setCustomApi=function(t){var e=this;this._setOptions(function(){e._chartStore.setCustomApi(t)})},t.prototype.getCustomApi=function(){return this._chartStore.getCustomApi()},t.prototype.setLocale=function(t){var e=this;this._setOptions(function(){e._chartStore.setLocale(t)})},t.prototype.getLocale=function(){return this._chartStore.getLocale()},t.prototype.setTimezone=function(t){var e=this;this._setOptions(function(){e._chartStore.setTimezone(t)})},t.prototype.getTimezone=function(){return this._chartStore.getTimezone()},t.prototype.setThousandsSeparator=function(t){var e=this;this._setOptions(function(){e._chartStore.setThousandsSeparator(t)})},t.prototype.getThousandsSeparator=function(){return this._chartStore.getThousandsSeparator()},t.prototype.setDecimalFold=function(t){var e=this;this._setOptions(function(){e._chartStore.setDecimalFold(t)})},t.prototype.getDecimalFold=function(){return this._chartStore.getDecimalFold()},t.prototype._setOptions=function(t){t(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},t.prototype.setOffsetRightDistance=function(t){this._chartStore.setOffsetRightDistance(t,!0)},t.prototype.getOffsetRightDistance=function(){return this._chartStore.getOffsetRightDistance()},t.prototype.setMaxOffsetLeftDistance=function(t){if(t<0){V("setMaxOffsetLeftDistance","distance","distance must greater than zero!!!");return}this._chartStore.setMaxOffsetLeftDistance(t)},t.prototype.setMaxOffsetRightDistance=function(t){if(t<0){V("setMaxOffsetRightDistance","distance","distance must greater than zero!!!");return}this._chartStore.setMaxOffsetRightDistance(t)},t.prototype.setLeftMinVisibleBarCount=function(t){if(t<0){V("setLeftMinVisibleBarCount","barCount","barCount must greater than zero!!!");return}this._chartStore.setLeftMinVisibleBarCount(Math.ceil(t))},t.prototype.setRightMinVisibleBarCount=function(t){if(t<0){V("setRightMinVisibleBarCount","barCount","barCount must greater than zero!!!");return}this._chartStore.setRightMinVisibleBarCount(Math.ceil(t))},t.prototype.setBarSpace=function(t){this._chartStore.setBarSpace(t)},t.prototype.getBarSpace=function(){return this._chartStore.getBarSpace()},t.prototype.getVisibleRange=function(){return this._chartStore.getVisibleRange()},t.prototype.clearData=function(){this._chartStore.clearData()},t.prototype.getDataList=function(){return this._chartStore.getDataList()},t.prototype.applyNewData=function(t,e){this._drawPanes.forEach(function(t){t.getAxisComponent().setAutoCalcTickFlag(!0)});var i={forward:!1,backward:!1};U(e)?(i.forward=e,i.backward=e):i=x(x({},i),e),this._chartStore.addData(t,v.Init,i)},t.prototype.updateData=function(t){this._chartStore.addData(t,v.Update)},t.prototype.setLoadMoreDataCallback=function(t){this._chartStore.setLoadMoreDataCallback(t)},t.prototype.createIndicator=function(t,e,i){var n,r=Z(t)?{name:t}:t;if(null===tO(r.name))return V("createIndicator","value","indicator not supported, you may need to use registerIndicator to add one!!!"),null;var o=x({},i);Z(o.id)||(o.id=tm(tZ.INDICATOR));var a=this.getDrawPaneById(o.id);return K(a)||(a=this._createPane(eS,o.id,o),(null===(n=o.height)||void 0===n)&&(o.height=100)),this.setPaneOptions(o),this._chartStore.addIndicator(r,o.id,null!=e&&e)&&this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0}),o.id},t.prototype.overrideIndicator=function(t,e){return this._chartStore.overrideIndicator(t,e)},t.prototype.getIndicators=function(t){return this._chartStore.getIndicatorsByFilter(null!=t?t:{})},t.prototype.removeIndicator=function(t){var e=this,i=this._chartStore.removeIndicator(null!=t?t:{});if(i){var n=!1,r=[];this._drawPanes.forEach(function(t){var e=t.getId();e!==tZ.CANDLE&&e!==tZ.X_AXIS&&r.push(e)}),r.forEach(function(t){if(!e._chartStore.hasIndicators(t)){var i,r,o,a=e._drawPanes.findIndex(function(e){return e.getId()===t}),s=e._drawPanes[a];if(K(s)){n=!0;var l=e._separatorPanes.get(s);if(K(l)){var u=l.getTopPane();try{for(var c=S(e._separatorPanes),h=c.next();!h.done;h=c.next()){var d=h.value;if(d[1].getTopPane().getId()===t){d[1].setTopPane(u);break}}}catch(t){i={error:t}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(i)throw i.error}}l.destroy(),e._separatorPanes.delete(s)}e._recalculatePaneHeight(s,0,s.getBounding().height),e._drawPanes.splice(a,1),s.destroy();var p=e._drawPanes[0];K(p)&&p.getId()===tZ.X_AXIS&&(p=e._drawPanes[1]),null===(o=e._separatorPanes.get(p))||void 0===o||o.destroy(),e._separatorPanes.delete(p)}}}),2===this._drawPanes.length&&(this._candlePane.setVisible(!0),this._candlePane.setBounding({height:this._chartBounding.height-this._xAxisPane.getBounding().height})),this.layout({measureHeight:n,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}return i},t.prototype.createOverlay=function(t){var e=this,i=[],n=[],r=function(t){K(t.paneId)&&null!==e.getDrawPaneById(t.paneId)?n.push(!0):(t.paneId=tZ.CANDLE,n.push(!1)),i.push(t)};Z(t)?r({name:t}):Y(t)?t.forEach(function(t){r(Z(t)?{name:t}:t)}):r(t);var o=this._chartStore.addOverlays(i,n);return Y(t)?o:o[0]},t.prototype.getOverlays=function(t){return this._chartStore.getOverlaysByFilter(null!=t?t:{})},t.prototype.overrideOverlay=function(t){return this._chartStore.overrideOverlay(t)},t.prototype.removeOverlay=function(t){return this._chartStore.removeOverlay(null!=t?t:{})},t.prototype.setPaneOptions=function(t){var e,i,n,r=this,o=!1,a=!1,s=K(t.id),l=this;try{for(var u=S(this._drawPanes),c=u.next();!c.done;c=u.next()){var h=c.value,d=function(e){var i=e.getId();if(s&&t.id===i||!s){if(i!==tZ.X_AXIS){if(G(t.height)&&t.height>0){var u=Math.max(Math.max(null!==(n=t.minHeight)&&void 0!==n?n:e.getOptions().minHeight,0),t.height);a=!0,o=!0,e.setOriginalBounding({height:u}),l._recalculatePaneHeight(e,u,-u)}if(K(t.state)&&e.getOptions().state!==t.state){o=!0,a=!0;var c=t.state;switch(c){case"maximize":if(!K(l._drawPanes.find(function(t){var e=t.getId();return"maximize"===t.getOptions().state&&e!==tZ.X_AXIS}))){"normal"===e.getOptions().state&&e.setOriginalBounding({height:e.getBounding().height}),e.setOptions({state:c});var h=l._chartBounding.height;e.setBounding({height:h-l._xAxisPane.getBounding().height}),l._drawPanes.forEach(function(t){var e;t.getId()!==tZ.X_AXIS&&t.getId()!==i&&(t.setBounding({height:t.getOriginalBounding().height}),t.setVisible(!1),null===(e=r._separatorPanes.get(t))||void 0===e||e.setVisible(!1))})}break;case"minimize":var u=e.getBounding().height,d=e.getOptions().state,p=u-30;"maximize"===d&&(p=e.getOriginalBounding().height-30),l._recalculatePaneHeight(e,30,p)&&("normal"===d&&e.setOriginalBounding({height:u}),e.setOptions({state:c})),l._drawPanes.forEach(function(t){var e;t.getId()!==tZ.X_AXIS&&(t.setVisible(!0),null===(e=r._separatorPanes.get(t))||void 0===e||e.setVisible(!0))});break;default:var u=e.getOriginalBounding().height;l._recalculatePaneHeight(e,u,e.getBounding().height-u)&&e.setOptions({state:c}),l._drawPanes.forEach(function(t){var e;t.getId()!==tZ.X_AXIS&&(t.setVisible(!0),null===(e=r._separatorPanes.get(t))||void 0===e||e.setVisible(!0))})}}}K(t.axis)&&(a=!0);var g=x({},t);if(delete g.state,e.setOptions(g),i===t.id)return"break"}}(h);if("break"===d)break}}catch(t){e={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}a&&this.layout({measureHeight:o,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},t.prototype.getPaneOptions=function(t){var e;if(K(t)){var i=this.getDrawPaneById(t);return null!==(e=null==i?void 0:i.getOptions())&&void 0!==e?e:null}return this._drawPanes.map(function(t){return t.getOptions()})},t.prototype.setZoomEnabled=function(t){this._chartStore.setZoomEnabled(t)},t.prototype.isZoomEnabled=function(){return this._chartStore.isZoomEnabled()},t.prototype.setScrollEnabled=function(t){this._chartStore.setScrollEnabled(t)},t.prototype.isScrollEnabled=function(){return this._chartStore.isScrollEnabled()},t.prototype.scrollByDistance=function(t,e){var i=this,n=G(e)&&e>0?e:0;if(this._chartStore.startScroll(),n>0){var r=new tg({duration:n});r.doFrame(function(e){i._chartStore.scroll(e/n*t)}),r.start()}else this._chartStore.scroll(t)},t.prototype.scrollToRealTime=function(t){var e=this._chartStore.getBarSpace().bar,i=this._chartStore.getLastBarRightSideDiffBarCount()-this._chartStore.getInitialOffsetRightDistance()/e;this.scrollByDistance(i*e,t)},t.prototype.scrollToDataIndex=function(t,e){var i=(this._chartStore.getLastBarRightSideDiffBarCount()+(this.getDataList().length-1-t))*this._chartStore.getBarSpace().bar;this.scrollByDistance(i,e)},t.prototype.scrollToTimestamp=function(t,e){var i=t_(this.getDataList(),"timestamp",t);this.scrollToDataIndex(i,e)},t.prototype.zoomAtCoordinate=function(t,e,i){var n=this,r=G(i)&&i>0?i:0,o=this._chartStore.getBarSpace().bar,a=o*t-o;if(r>0){var s=0,l=new tg({duration:r});l.doFrame(function(t){var i=t/r*a,o=(i-s)/n._chartStore.getBarSpace().bar*10;n._chartStore.zoom(o,e),s=i}),l.start()}else this._chartStore.zoom(a/o*10,e)},t.prototype.zoomAtDataIndex=function(t,e,i){var n=this._chartStore.dataIndexToCoordinate(e);this.zoomAtCoordinate(t,{x:n,y:0},i)},t.prototype.zoomAtTimestamp=function(t,e,i){var n=t_(this.getDataList(),"timestamp",e);this.zoomAtDataIndex(t,n,i)},t.prototype.convertToPixel=function(t,e){var i,n=this,r=null!=e?e:{},o=r.paneId,a=void 0===o?tZ.CANDLE:o,s=r.absolute,l=void 0!==s&&s,u=[];if(a!==tZ.X_AXIS){var c=this.getDrawPaneById(a);if(null!==c){var h=c.getBounding(),d=[].concat(t),p=this._xAxisPane.getAxisComponent(),g=c.getAxisComponent();u=d.map(function(t){var e={},i=t.dataIndex;if(G(t.timestamp)&&(i=n._chartStore.timestampToDataIndex(t.timestamp)),G(i)&&(e.x=p.convertToPixel(i)),G(t.value)){var r=g.convertToPixel(t.value);e.y=l?h.top+r:r}return e})}}return Y(t)?u:null!==(i=u[0])&&void 0!==i?i:{}},t.prototype.convertFromPixel=function(t,e){var i,n=this,r=null!=e?e:{},o=r.paneId,a=void 0===o?tZ.CANDLE:o,s=r.absolute,l=void 0!==s&&s,u=[];if(a!==tZ.X_AXIS){var c=this.getDrawPaneById(a);if(null!==c){var h=c.getBounding(),d=[].concat(t),p=this._xAxisPane.getAxisComponent(),g=c.getAxisComponent();u=d.map(function(t){var e,i={};if(G(t.x)){var r=p.convertFromPixel(t.x);i.dataIndex=r,i.timestamp=null!==(e=n._chartStore.dataIndexToTimestamp(r))&&void 0!==e?e:void 0}if(G(t.y)){var o=l?t.y-h.top:t.y;i.value=g.convertFromPixel(o)}return i})}}return Y(t)?u:null!==(i=u[0])&&void 0!==i?i:{}},t.prototype.executeAction=function(t,e){var i;if(t===c.OnCrosshairChange){var n=x({},e);n.paneId=null!==(i=n.paneId)&&void 0!==i?i:tZ.CANDLE,this._chartStore.setCrosshair(n)}},t.prototype.subscribeAction=function(t,e){this._chartStore.subscribeAction(t,e)},t.prototype.unsubscribeAction=function(t,e){this._chartStore.unsubscribeAction(t,e)},t.prototype.getConvertPictureUrl=function(t,e,i){var n=this,r=this._chartBounding,o=r.width,a=r.height,s=ty("canvas",{width:"".concat(o,"px"),height:"".concat(a,"px"),boxSizing:"border-box"}),l=s.getContext("2d"),u=ti(s);s.width=o*u,s.height=a*u,l.scale(u,u),l.fillStyle=null!=i?i:"#FFFFFF",l.fillRect(0,0,o,a);var c=null!=t&&t;return this._drawPanes.forEach(function(t){var e=n._separatorPanes.get(t);if(K(e)){var i=e.getBounding();l.drawImage(e.getImage(c),i.left,i.top,i.width,i.height)}var r=t.getBounding();l.drawImage(t.getImage(c),0,r.top,o,r.height)}),s.toDataURL("image/".concat(null!=e?e:"jpeg"))},t.prototype.resize=function(){this._cacheChartBounding(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},t.prototype.destroy=function(){var t=this;this._chartEvent.destroy(),this._drawPanes.forEach(function(e){var i;e.destroy(),null===(i=t._separatorPanes.get(e))||void 0===i||i.destroy()}),this._drawPanes=[],this._separatorPanes.clear(),this._container.removeChild(this._chartContainer)},t}(),ez=new Map,eY=1;function eX(t,e){var i=null;if(null===(i=Z(t)?document.getElementById(t):t))return null;var n=ez.get(i.id);if(K(n))return V("","","The chart has been initialized on the dom！！！"),n;var r="k_line_chart_".concat(eY++);return(n=new eW(i,e)).id=r,i.setAttribute("k-line-chart-id",r),ez.set(r,n),n}function eH(t){var e,i,n=null;if(t instanceof eW)n=t.id;else{var r=null;n=null!==(e=null==(r=Z(t)?document.getElementById(t):t)?void 0:r.getAttribute("k-line-chart-id"))&&void 0!==e?e:null}null!==n&&(null===(i=ez.get(n))||void 0===i||i.destroy(),ez.delete(n))}}}]);